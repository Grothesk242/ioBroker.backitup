var Js=Object.defineProperty,Hs=Object.defineProperties;var zs=Object.getOwnPropertyDescriptors;var Bn=Object.getOwnPropertySymbols,js=Object.getPrototypeOf,Ks=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,Ys=Reflect.get;var Et=Math.pow,gn=(R,Y,$)=>Y in R?Js(R,Y,{enumerable:!0,configurable:!0,writable:!0,value:$}):R[Y]=$,ne=(R,Y)=>{for(var $ in Y||(Y={}))Ks.call(Y,$)&&gn(R,$,Y[$]);if(Bn)for(var $ of Bn(Y))Gs.call(Y,$)&&gn(R,$,Y[$]);return R},Ne=(R,Y)=>Hs(R,zs(Y));var te=(R,Y,$)=>gn(R,typeof Y!="symbol"?Y+"":Y,$);var Ue=(R,Y,$)=>Ys(js(R),$,Y);var fe=(R,Y,$)=>new Promise((b,r)=>{var D=f=>{try{C($.next(f))}catch(o){r(o)}},d=f=>{try{C($.throw(f))}catch(o){r(o)}},C=f=>f.done?b(f.value):Promise.resolve(f.value).then(D,d);C(($=$.apply(R,Y)).next())});(self.webpackChunkiobroker_admin_component_backitup=self.webpackChunkiobroker_admin_component_backitup||[]).push([["vendors-node_modules_iobroker_json-config_build_index_js"],{40996:(R,Y,$)=>{"use strict";$.r(Y),$.d(Y,{ConfigGeneric:()=>m,ConfigPanel:()=>$t,JsonConfig:()=>Us,JsonConfigComponent:()=>Ht});var b=$(28437),r=$.n(b),D=$(85589),d=$.n(D),C=$(91778),f=$.n(C),o=$(67085),c=$(21839),l=$(37449);const v="material",F=["Su","Mo","Tu","We","Th","Fr","Sa"],S=["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O={0:"0x00 - good",1:"0x01 - general problem",2:"0x02 - no connection problem",16:"0x10 - substitute value from controller",32:"0x20 - substitute initial value",64:"0x40 - substitute value from device or instance",128:"0x80 - substitute value from sensor",17:"0x11 - general problem by instance",65:"0x41 - general problem by device",129:"0x81 - general problem by sensor",18:"0x12 - instance not connected",66:"0x42 - device not connected",130:"0x82 - sensor not connected",68:"0x44 - device reports error",132:"0x84 - sensor reports error"},k={JVBERi0:"pdf",R0lGODdh:"gif",R0lGODlh:"gif",iVBORw0KGgo:"png","/9j/":"jpg",PHN2Zw:"svg",Qk1:"bmp",AAABAA:"ico"},Se=class Se{static CapitalWords(n){return(n||"").split(/[\s_]/).filter(e=>e).map(e=>e?e[0].toUpperCase()+e.substring(1).toLowerCase():"").join(" ")}static formatSeconds(n){const e=Math.floor(n/86400);n%=3600*24;let t=Math.floor(n/3600);t<10&&(t=`0${t}`),n%=3600;let s=Math.floor(n/60);s<10&&(s=`0${s}`),n%=60,n=Math.floor(n),n<10&&(n=`0${n}`);let i="";return e&&(i+=`${e} ${l.I18n.t("ra_daysShortText")} `),i+=`${t}:${s}:${n}`,i}static getObjectName(n,e,t,s,i){const a=n[e];let u;const p=i?"desc":"name";if(typeof t=="string"&&!s&&(s={language:t},t=null),s=s||{},s.language||(s.language=n["system.config"]&&n["system.config"].common&&n["system.config"].common.language||window.sysLang||"en"),t&&t.name)u=t.name,typeof u=="object"&&(u=u[s.language]||u.en);else if(a&&a.common&&a.common[p])u=a.common[p],p!=="desc"&&!u&&a.common.desc&&(u=a.common.desc),typeof u=="object"&&(u=u[s.language]||u.en||u.de||u.ru||""),u=(u||"").toString().replace(/[_.]/g," "),u===u.toUpperCase()&&(u=u[0]+u.substring(1).toLowerCase());else{const V=e.lastIndexOf(".");u=e.substring(V+1).replace(/[_.]/g," "),u=Se.CapitalWords(u)}return u.trim()}static getObjectNameFromObj(n,e,t,s,i){const a=n;let u=n&&n._id||"";const p=s?"desc":"name";return typeof e=="string"&&!t&&(t={language:e},e=null),t=t||{},e&&e.name?(u=e.name,typeof u=="object"&&(u=u[t.language]||u.en)):a&&a.common&&a.common[p]&&(u=a.common[p],p!=="desc"&&!u&&a.common.desc&&(u=a.common.desc),typeof u=="object"&&(u=u[t.language]||u.en),u=(u||"").toString().replace(/[_.]/g," "),u===u.toUpperCase()&&(u=u[0]+u.substring(1).toLowerCase())),i?u:u.trim()}static getSettingsOrder(n,e,t){n&&Object.prototype.hasOwnProperty.call(n,"common")&&(n=n.common);let s;if(n&&n.custom){s=(n.custom||{})[v];const i=t.user||"admin";if(s&&s[i]){if(e){if(s[i].subOrder&&s[i].subOrder[e])return JSON.parse(JSON.stringify(s[i].subOrder[e]))}else if(s[i].order)return JSON.parse(JSON.stringify(s[i].order))}}return null}static getSettingsCustomURLs(n,e,t){n&&Object.prototype.hasOwnProperty.call(n,"common")&&(n=n.common);let s;if(n&&n.custom){s=(n.custom||{})[v];const i=t.user||"admin";if(s&&s[i]){if(e){if(s[i].subURLs&&s[i].subURLs[e])return JSON.parse(JSON.stringify(s[i].subURLs[e]))}else if(s[i].URLs)return JSON.parse(JSON.stringify(s[i].URLs))}}return null}static reorder(n,e,t){const s=Array.from(n),[i]=s.splice(e,1);return s.splice(t,0,i),s}static getSettings(n,e,t){let s;const i=n&&n._id||e&&e.id;if(n&&Object.prototype.hasOwnProperty.call(n,"common")&&(n=n.common),n!=null&&n.custom?(s=n.custom,s=s[v]&&s[v][e.user||"admin"]?JSON.parse(JSON.stringify(s[v][e.user||"admin"])):{enabled:!0}):s={enabled:t===void 0?!0:t,useCustom:!1},Object.prototype.hasOwnProperty.call(s,"enabled")||(s.enabled=t===void 0?!0:t),e&&(!s.name&&e.name&&(s.name=e.name),!s.icon&&e.icon&&(s.icon=e.icon),!s.color&&e.color&&(s.color=e.color)),n&&(!s.color&&n.color&&(s.color=n.color),!s.icon&&n.icon&&(s.icon=n.icon),!s.name&&n.name&&(s.name=n.name)),typeof s.name=="object"&&(s.name=s.name[e.language]||s.name.en,s.name=(s.name||"").toString().replace(/_/g," "),s.name===s.name.toUpperCase()&&(s.name=s.name[0]+s.name.substring(1).toLowerCase())),!s.name&&i){const a=i.lastIndexOf(".");s.name=i.substring(a+1).replace(/[_.]/g," "),s.name=(s.name||"").toString().replace(/_/g," "),s.name=Se.CapitalWords(s.name)}return s}static setSettings(n,e,t){if(n){n.common=n.common||{},n.common.custom=n.common.custom||{},n.common.custom[v]=n.common.custom[v]||{},n.common.custom[v][t.user||"admin"]=e;const s=n.common.custom[v][t.user||"admin"];return s.useCommon&&(s.color!==void 0&&(n.common.color=s.color,delete s.color),s.icon!==void 0&&(n.common.icon=s.icon,delete s.icon),s.name!==void 0&&(typeof n.common.name!="object"&&(n.common.name={}),n.common.name[t.language]=s.name,delete s.name)),!0}return!1}static getIcon(n,e){return n&&n.icon?n.icon.length<=2?r().createElement("span",{style:e||{}},n.icon):n.icon.startsWith("data:image")?r().createElement("img",{alt:n.name,src:n.icon,style:e||{}}):r().createElement("img",{alt:n.name,src:(n.prefix||"")+n.icon,style:e||{}}):null}static getObjectIcon(n,e){if(typeof n=="object"&&(e=n,n=e._id),e&&e.common&&e.common.icon){let t=e.common.icon;if(typeof t=="string"&&t.length<=2||t.startsWith("data:image"))return t;const s=n.split(".");return s[0]==="system"?t=`adapter/${s[2]}${t.startsWith("/")?"":"/"}${t}`:t=`adapter/${s[0]}${t.startsWith("/")?"":"/"}${t}`,window.location.pathname.match(/adapter\/[^/]+\/[^/]+\.html/)?t=`../../${t}`:window.location.pathname.match(/material\/[.\d]+/)?t=`../../${t}`:window.location.pathname.match(/material\//)&&(t=`../${t}`),t}return null}static splitCamelCase(n){return Se.CapitalWords(n)}static isUseBright(n,e){if(n==null||n==="")return e===void 0?!0:e;n=n.toString(),n.startsWith("#")&&(n=n.slice(1));let t,s,i;const a=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(a&&a.length===4)t=parseInt(a[1],10),s=parseInt(a[2],10),i=parseInt(a[3],10);else{if(n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),n.length===8)n=n.substring(0,6);else if(n.length!==6)return!1;t=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),i=parseInt(n.slice(4,6),16)}return t*.299+s*.587+i*.114<=186}static getTimeString(n){if(n=parseFloat(n),Number.isNaN(n))return"--:--";const e=Math.floor(n/3600);let t=Math.floor(n%3600/60),s=n%60;return e?(t<10&&(t=`0${t}`),s<10&&(s=`0${s}`),`${e}:${t}:${s}`):(s<10&&(s=`0${s}`),`${t}:${s}`)}static getWindDirection(n){return n>=0&&n<11.25?"N":n>=11.25&&n<33.75?"NNE":n>=33.75&&n<56.25?"NE":n>=56.25&&n<78.75?"ENE":n>=78.75&&n<101.25?"E":n>=101.25&&n<123.75?"ESE":n>=123.75&&n<146.25?"SE":n>=146.25&&n<168.75?"SSE":n>=168.75&&n<191.25?"S":n>=191.25&&n<213.75?"SSW":n>=213.75&&n<236.25?"SW":n>=236.25&&n<258.75?"WSW":n>=258.75&&n<281.25?"W":n>=281.25&&n<303.75?"WNW":n>=303.75&&n<326.25?"NW":n>=326.25&&n<348.75?"NNW":"N"}static padding(n){return typeof n=="string"?n.length<2?`0${n}`:n:n<10?`0${n}`:n}static setDataFormat(n){n&&(Se.dateFormat=n.toUpperCase().split(/[.-/]/),Se.dateFormat.splice(Se.dateFormat.indexOf("YYYY"),1))}static date2string(n){if(typeof n=="string"){if(n=n.trim(),!n)return"";if(n.match(/^[\w\s]+$/))return n;const t=n.match(/(\d{1,4})[-./](\d{1,2})[-./](\d{1,4})/);if(t){const s=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)],i=s.find(u=>u>31);s.splice(s.indexOf(i),1);const a=s.find(u=>u>12);a?(s.splice(s.indexOf(a),1),n=new Date(i,s[0]-1,a)):Se.dateFormat[0][0]==="M"&&Se.dateFormat[1][0]==="D"?(n=new Date(i,s[0]-1,s[1]),Math.abs(n.getTime-Date.now())>36e5*24*10&&(n=new Date(i,s[1]-1,s[0]))):Se.dateFormat[0][0]==="D"&&Se.dateFormat[1][0]==="M"?(n=new Date(i,s[1]-1,s[0]),Math.abs(n.getTime-Date.now())>36e5*24*10&&(n=new Date(i,s[0]-1,s[1]))):n=new Date(n)}else n=new Date(n)}else n=new Date(n);let e=l.I18n.t(`ra_dow_${F[n.getDay()]}`).replace("ra_dow_","");return e+=`. ${n.getDate()} ${l.I18n.t(`ra_month_${S[n.getMonth()]}`).replace("ra_month_","")}`,e}static renderTextWithA(n){let e=n.match(/<a [^<]+<\/a>|<br\/?>|<b>[^<]+<\/b>|<i>[^<]+<\/i>/);if(e){const t=[];let s=1;do{const i=n.substring(0,e.index);if(n=n.substring(e.index+e[0].length),i&&t.push(r().createElement("span",{key:`a${s++}`},i)),e[0].startsWith("<b>"))t.push(r().createElement("b",{key:`a${s++}`},e[0].substring(3,e[0].length-4)));else if(e[0].startsWith("<i>"))t.push(r().createElement("i",{key:`a${s++}`},e[0].substring(3,e[0].length-4)));else if(e[0].startsWith("<br"))t.push(r().createElement("br",{key:`a${s++}`}));else{const a=e[0].match(/href="([^"]+)"/)||e[0].match(/href='([^']+)'/),u=e[0].match(/target="([^"]+)"/)||e[0].match(/target='([^']+)'/),p=e[0].match(/rel="([^"]+)"/)||e[0].match(/rel='([^']+)'/),V=e[0].match(/>([^<]*)</);t.push(r().createElement("a",{key:`a${s++}`,href:a?a[1]:"",target:u?u[1]:"_blank",rel:p?p[1]:"",style:{color:"inherit"}},V?V[1]:""))}e=n&&n.match(/<a [^<]+<\/a>|<br\/?>|<b>[^<]+<\/b>|<i>[^<]+<\/i>/),e||n&&t.push(r().createElement("span",{key:`a${s++}`},n))}while(e);return t}return n}static getSmartName(n,e,t,s){var i,a;return e?s?n[e]&&((a=n[e].common)!=null&&a.custom)&&n[e].common.custom[t]&&n[e].common.custom[t].smartName||null:n[e].common.smartName:s?n&&!n.common?n.smartName:(i=n==null?void 0:n.common)!=null&&i.custom&&n.common.custom[t]?n.common.custom[t].smartName:void 0:!n.common||n&&!n.common?n.smartName:n.common.smartName}static getSmartNameFromObj(n,e,t){var s;return t?n&&!n.common?n.smartName:(s=n==null?void 0:n.common)!=null&&s.custom&&n.common.custom[e]?n.common.custom[e].smartName:void 0:!n.common||n&&!n.common?n.smartName:n.common.smartName}static enableSmartName(n,e,t){t?(n.common.custom=n.common.custom||{},n.common.custom[e]=n.common.custom[e]||{},n.common.custom[e].smartName={}):n.common.smartName={}}static removeSmartName(n,e,t){t?n.common&&n.common.custom&&n.common.custom[e]&&(n.common.custom[e]=null):n.common.smartName=null}static updateSmartName(n,e,t,s,i,a){const u=l.I18n.getLanguage();if(typeof n.common.smartName=="string"){const p=n.common.smartName;n.common.smartName={},n.common.smartName[u]=p}if(n.native&&n.native.byON){delete n.native.byON;let p=n.common.smartName;(!p||typeof p!="object")&&(p={en:p},p[u]=p.en),n.common.smartName=p}if(s!==void 0&&(a?(n.common.custom=n.common.custom||{},n.common.custom[i]=n.common.custom[i]||{},n.common.custom[i].smartName=n.common.custom[i].smartName||{},s?n.common.custom[i].smartName.smartType=s:delete n.common.custom[i].smartName.smartType):(n.common.smartName=n.common.smartName||{},s?n.common.smartName.smartType=s:delete n.common.smartName.smartType)),t!==void 0&&(a?(n.common.custom=n.common.custom||{},n.common.custom[i]=n.common.custom[i]||{},n.common.custom[i].smartName=n.common.custom[i].smartName||{},n.common.custom[i].smartName.byON=t):(n.common.smartName=n.common.smartName||{},n.common.smartName.byON=t)),e!==void 0){let p;if(a?(n.common.custom=n.common.custom||{},n.common.custom[i]=n.common.custom[i]||{},n.common.custom[i].smartName=n.common.custom[i].smartName||{},p=n.common.custom[i].smartName):(n.common.smartName=n.common.smartName||{},p=n.common.smartName),p[u]=e,p&&(!p[u]||p[u]===n.common.name&&(!n.common.role||n.common.role.includes("button")))){delete p[u];let V=!0;for(const K in p)if(Object.prototype.hasOwnProperty.call(p,K)){V=!1;break}V&&(a?n.common.custom[i].smartName.byON===void 0?delete n.common.custom[i]:(delete n.common.custom[i].en,delete n.common.custom[i].de,delete n.common.custom[i].ru,delete n.common.custom[i].nl,delete n.common.custom[i].pl,delete n.common.custom[i].it,delete n.common.custom[i].fr,delete n.common.custom[i].pt,delete n.common.custom[i].es,delete n.common.custom[i].uk,delete n.common.custom[i]["zh-cn"]):n.common.smartName.byON!==void 0?(delete n.common.smartName.en,delete n.common.smartName.de,delete n.common.smartName.ru,delete n.common.smartName.nl,delete n.common.smartName.pl,delete n.common.smartName.it,delete n.common.smartName.fr,delete n.common.smartName.pt,delete n.common.smartName.es,delete n.common.smartName.uk,delete n.common.smartName["zh-cn"]):n.common.smartName=null)}}}static disableSmartName(n,e,t){t?(n.common.custom=n.common.custom||{},n.common.custom[e]=n.common.custom[e]||{},n.common.custom[e].smartName=!1):n.common.smartName=!1}static copyToClipboard(n,e){return e&&e.stopPropagation(),e&&e.preventDefault(),l.Utils.copyToClipboard(n)}static getFileExtension(n){const e=(n||"").lastIndexOf(".");return e!==-1?n.substring(e+1).toLowerCase():null}static formatBytes(n){if(Math.abs(n)<1024)return`${n} B`;const e=["KB","MB","GB"];let t=-1;do n/=1024,++t;while(Math.abs(n)>=1024&&t<e.length-1);return`${n.toFixed(1)} ${e[t]}`}static getInvertedColor(n,e,t){if(!n)return;const s=Se.invertColor(n,!0);if(s==="#FFFFFF"&&(e==="dark"||t&&e==="light"))return"#DDD";if(s==="#000000"&&(e==="light"||t&&e==="dark"))return"#222"}static invertColor(n,e){if(n==null||n===""||typeof n!="string")return"";if(n.startsWith("rgba")){const u=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),\s*([.\d]+)\)/);u&&(n=parseInt(u[1],10).toString(16).padStart(2,"0")+parseInt(u[2],10).toString(16).padStart(2,"0")+parseInt(u[2],10).toString(16).padStart(2,"0"))}else if(n.startsWith("rgb")){const u=n.match(/rgb?\((\d+),\s*(\d+),\s*(\d+)\)/);u&&(n=parseInt(u[1],10).toString(16).padStart(2,"0")+parseInt(u[2],10).toString(16).padStart(2,"0")+parseInt(u[2],10).toString(16).padStart(2,"0"))}else n.startsWith("#")&&(n=n.slice(1));n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);let t=null;if(n.length===8)t=n.substring(6,8),n=n.substring(0,6);else if(n.length!==6)return console.warn(`Cannot invert color: ${n}`),n;let s=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),a=parseInt(n.slice(4,6),16);return e?s*.299+i*.587+a*.114>186?`#000000${t||""}`:`#FFFFFF${t||""}`:(s=(255-s).toString(16),i=(255-i).toString(16),a=(255-a).toString(16),`#${s.padStart(2,"0")}${i.padStart(2,"0")}${a.padStart(2,"0")}${t||""}`)}static color2rgb(n){if(n==null||n===""||typeof n!="string")return"";if(n.startsWith("rgba")){const e=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),\s*([.\d]+)\)/);e&&(n=parseInt(e[1],10).toString(16).padStart(2,"0")+parseInt(e[2],10).toString(16).padStart(2,"0")+parseInt(e[2],10).toString(16).padStart(2,"0"))}else if(n.startsWith("rgb")){const e=n.match(/rgb?\((\d+),\s*(\d+),\s*(\d+)\)/);e&&(n=parseInt(e[1],10).toString(16).padStart(2,"0")+parseInt(e[2],10).toString(16).padStart(2,"0")+parseInt(e[2],10).toString(16).padStart(2,"0"))}else n.startsWith("#")&&(n=n.slice(1));return n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),n.length!==6&&n.length!==8?(console.warn(`Cannot invert color: ${n}`),!1):[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}static rgb2lab(n){let e=n[0]/255,t=n[1]/255,s=n[2]/255;e=e>.04045?Et((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Et((t+.055)/1.055,2.4):t/12.92,s=s>.04045?Et((s+.055)/1.055,2.4):s/12.92;let i=(e*.4124+t*.3576+s*.1805)/.95047,a=e*.2126+t*.7152+s*.0722,u=(e*.0193+t*.1192+s*.9505)/1.08883;return i=i>.008856?Et(i,.33333333):7.787*i+.137931,a=a>.008856?Et(a,.33333333):7.787*a+.137931,u=u>.008856?Et(u,.33333333):7.787*u+.137931,[116*a-16,500*(i-a),200*(a-u)]}static colorDistance(n,e){const t=Se.rgb2lab(Se.color2rgb(n)),s=Se.rgb2lab(Se.color2rgb(e)),i=t[0]-s[0],a=t[1]-s[1],u=t[2]-s[2],p=Math.sqrt(t[1]*t[1]+t[2]*t[2]),V=Math.sqrt(s[1]*s[1]+s[2]*s[2]),K=p-V;let G=a*a+u*u-K*K;G=G<0?0:Math.sqrt(G);const q=1+.045*p,ce=1+.015*p,Ee=i,re=K/q,ye=G/ce,de=Ee*Ee+re*re+ye*ye;return de<0?0:de}static _toVal(n){let e,t="";if(typeof n=="string"||typeof n=="number")t+=n;else if(typeof n=="object")if(Array.isArray(n))for(let s=0;s<n.length;s++)n[s]&&(e=Se._toVal(n[s]),e&&(t&&(t+=" "),t+=e));else for(const s in n)n[s]&&(t&&(t+=" "),t+=s);return t}static clsx(){let n=0,e,t,s="";for(;n<arguments.length;)e=arguments[n++],e&&(t=Se._toVal(e),t&&(s&&(s+=" "),s+=t));return s}static getThemeName(n=""){return window.vendorPrefix&&window.vendorPrefix!=="@@vendorPrefix@@"?window.vendorPrefix:n||((window._localStorage||window.localStorage).getItem("App.themeName")?(window._localStorage||window.localStorage).getItem("App.themeName"):window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"colored")}static getThemeType(n=""){return window.vendorPrefix&&window.vendorPrefix!=="@@vendorPrefix@@"?"light":(n=n||(window._localStorage||window.localStorage).getItem("App.themeName"),n==="dark"||n==="blue"?"dark":"light")}static setThemeName(n){window.vendorPrefix&&window.vendorPrefix!=="@@vendorPrefix@@"||((window._localStorage||window.localStorage).setItem("App.themeName",n),(window._localStorage||window.localStorage).setItem("App.theme",n==="dark"||n==="blue"?"dark":"light"))}static toggleTheme(n){if(window.vendorPrefix&&window.vendorPrefix!=="@@vendorPrefix@@")return window.vendorPrefix;n=n||(window._localStorage||window.localStorage).getItem("App.themeName");const e=Se.getThemeNames(),t=e.indexOf(n);let s;return t!==-1?s=e[(t+1)%e.length]:s=e[0],Se.setThemeName(s),s}static getThemeNames(){return window.vendorPrefix&&window.vendorPrefix!=="@@vendorPrefix@@"?[window.vendorPrefix]:["light","dark","blue","colored"]}static parseQuery(n){n=(n||"").toString().replace(/^\?/,"");const e={};return n.split("&").forEach(t=>{if(t=t.trim(),t){const s=t.split("="),i=decodeURIComponent(s[0]).trim();if(s.length>1)if(e[i]=decodeURIComponent(s[1]),e[i]==="true")e[i]=!0;else if(e[i]==="false")e[i]=!1;else{const a=parseFloat(e[i]);a.toString()===e[i]&&(e[i]=a)}else e[i]=!0}}),e}static getParentId(n){const e=(n||"").toString().split(".");return e.length>1?(e.pop(),e.join(".")):null}static formatDate(n,e){if(!n)return"";let t,s=n.getMonth()+1;s<10&&(s=`0${s}`);let i=n.getDate();i<10&&(i=`0${i}`),e==="MM/DD/YYYY"?t=`${s}/${i}/${n.getFullYear()}`:t=`${n.getFullYear()}-${s}-${i}`;let a=n.getHours();return a<10?t+=` 0${a}`:t+=` ${a}`,a=n.getMinutes(),a<10?t+=`:0${a}`:t+=`:${a}`,a=n.getSeconds(),a<10?t+=`:0${a}`:t+=`:${a}`,a=n.getMilliseconds(),a<10?t+=`.00${a}`:a<100?t+=`.0${a}`:t+=`.${a}`,t}static formatTime(n){if(n){n=Math.round(n);const e=Math.floor(n/(3600*24)),t=Math.floor(n%(3600*24)/3600),s=Math.floor(n%3600/60),i=n%60;return e?`${e}.${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:t?`${t}:${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`0:${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}return"0:00:00"}static MDtext2link(n){const e=n.match(/\d+\.\)\s/);return e&&(n=n.replace(e[0],e[0].replace(/\s/,"&nbsp;"))),n.replace(/[^a-zA-Zа-яА-Я0-9]/g,"").trim().replace(/\s/g,"").toLowerCase()}static openLink(n,e){n=n.replace(/\/\/([0-9a-f]*:[0-9a-f]*:[0-9a-f]*:[0-9a-f]*:[0-9a-f]*:[0-9a-f]*)(:\d+)?\//i,"//[$1]$2/"),e==="this"?window.location=n:window.open(n,e||"_blank")}static MDgetTitle(n){const e=Se.extractHeader(n),t=e.header;let s=e.body;if(!t.title){s=s.replace(/{[^}]*}/g,""),s=s.trim();const i=s.replace(/\r/g,"").split(`
`);for(let a=0;a<i.length;a++)if(i[a].startsWith("# "))return i[a].substring(2).trim();return""}return t.title}static MDextractHeader(n){const e={};if(n.substring(0,3)==="---"){const t=n.substring(3).indexOf(`
---`);t!==-1&&(n.substring(3,t+3).replace(/\r/g,"").split(`
`).forEach(a=>{if(!a.trim())return;const u=a.indexOf(":");if(u!==-1){const p=a.substring(0,u).trim();e[p]=a.substring(u+1).trim(),e[p]=e[p].replace(/^['"]|['"]$/g,""),e[p]==="true"?e[p]=!0:e[p]==="false"?e[p]=!1:parseFloat(e[p]).toString()===e[p]&&(e[p]=parseFloat(e[p]))}else e[a.trim()]=!0}),n=n.substring(t+7))}return{header:e,body:n}}static MDremoveDocsify(n){const e=n.match(/{docsify-[^}]*}/g);return e&&e.forEach(t=>n=n.replace(t,"")),n}static generateFile(n,e){const t=document.createElement("a");t.setAttribute("href",`data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e,null,2))}`),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}static quality2text(n){const e=n&4294901760,t=O[n];let s;return t?s=[t]:n&1?s=[O[1],`0x${(n&65534).toString(16)}`]:n&2?s=[O[2],`0x${(n&65533).toString(16)}`]:s=[`0x${n.toString(16)}`],e&&s.push(`0x${(e>>16).toString(16).toUpperCase()}`),s}static clone(n){return JSON.parse(JSON.stringify(n))}static getStates(n){var t;let e=(t=n==null?void 0:n.common)==null?void 0:t.states;if(e){if(typeof e=="string"&&e[0]==="{")try{e=JSON.parse(e)}catch(s){console.error(`Cannot parse states: ${e}`),e=null}else if(typeof e=="string"){const s=e.split(";");e={};for(let i=0;i<s.length;i++){const a=s[i].split(":");e[a[0]]=a[1]}}else if(Array.isArray(e)){const s={};return n.common.type==="number"?e.forEach((i,a)=>s[a]=i):n.common.type==="string"?e.forEach(i=>s[i]=i):n.common.type==="boolean"&&(s.false=e[0],s.true=e[1]),s}}return e}static getSvg(n){return fetch(n).then(e=>e.blob()).then(e=>new Promise(t=>{const s=new FileReader;s.onload=function(){t(this.result)},s.readAsDataURL(e)}))}static detectMimeType(n){const e=Object.keys(k).find(t=>n.startsWith(t));return e?k[e]:null}static isStableRepository(n){return!!(typeof n=="string"&&n.toLowerCase().startsWith("stable")||n&&typeof n!="string"&&n.find(e=>e.toLowerCase().startsWith("stable")))}static isStringInteger(n){return parseInt(n).toString()===n}static isValidDate(n){return n instanceof Date&&!isNaN(n)}static getStyle(n,...e){const t={};for(let s=0;s<e.length;s++)typeof e[s]=="function"?Object.assign(t,e[s](n)):e[s]&&typeof e[s]=="object"&&Object.keys(e[s]).forEach(i=>{if(typeof e[s][i]=="function")t[i]=e[s][i](n);else if(typeof e[s][i]=="object"){const a=e[s][i];t[i]=t[i]||{},Object.keys(a).forEach(u=>{typeof a[u]=="function"?t[i][u]=a(n):(a[u]||a[u]===0)&&(t[i][u]=a[u])})}else(e[s][i]||e[s][i]===0)&&(t[i]=e[s][i])});return t}};te(Se,"namespace",v),te(Se,"INSTANCES","instances"),te(Se,"dateFormat",["DD","MM"]),te(Se,"FORBIDDEN_CHARS",/[^._\-/ :!#$%&()+=@^{}|~\p{Ll}\p{Lu}\p{Nd}]+/gu);let B=Se;const X=B;function ee(L){return Object.prototype.toString.call(L)==="[object Object]"}const Fe=class Fe extends b.Component{constructor(e){super(e);te(this,"defaultValue");te(this,"isError");te(this,"lang");te(this,"defaultSendToDone");te(this,"sendToTimeout");te(this,"noPlaceRequired");te(this,"onUpdate",e=>{const t=Fe.getValue(e||this.props.data,this.props.attr)||"";this.state.value!==t?this.setState({value:t}):this.forceUpdate()});this.state={confirmDialog:!1,confirmNewValue:null,confirmAttr:null,confirmData:null},this.isError={},e.schema&&(e.custom?this.defaultValue=e.schema.defaultFunc?this.executeCustom(e.schema.defaultFunc,e.data,e.customObj,e.instanceObj,e.arrayIndex,e.globalData):e.schema.default:this.defaultValue=e.schema.defaultFunc?this.execute(e.schema.defaultFunc,e.schema.default,e.data,e.arrayIndex,e.globalData):e.schema.default),this.lang=l.I18n.getLanguage()}componentDidMount(){this.props.registerOnForceUpdate&&this.props.registerOnForceUpdate(this.props.attr,this.onUpdate);const e=["select","autocomplete","autocompleteSendTo"];if(this.defaultValue!==void 0){const t=Fe.getValue(this.props.data,this.props.attr);(t===void 0||e.includes(this.props.schema.type)&&(t===""||t===null))&&setTimeout(()=>{this.props.custom?this.props.onChange(this.props.attr,this.defaultValue,()=>setTimeout(()=>this.props.forceUpdate([this.props.attr],this.props.data),100)):(Fe.setValue(this.props.data,this.props.attr,this.defaultValue),this.props.onChange(this.props.data,void 0,()=>this.props.forceUpdate([this.props.attr],this.props.data)))},100)}else this.props.schema.defaultSendTo&&this.sendTo()}sendTo(){if(this.props.alive){this.defaultSendToDone=!0;let e=this.props.schema.data;if(e===void 0&&this.props.schema.jsonData){const t=this.getPattern(this.props.schema.jsonData);try{e=JSON.parse(t)}catch(s){console.error(`Cannot parse json data: ${t}`)}}else e={attr:this.props.attr,value:Fe.getValue(this.props.data,this.props.attr)};e===void 0&&(e=null),this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,this.props.schema.defaultSendTo,e).then(t=>{t!=null&&(this.props.custom?this.props.onChange(this.props.attr,t,()=>this.props.forceUpdate([this.props.attr],this.props.data)):(Fe.setValue(this.props.data,this.props.attr,t),this.props.onChange(this.props.data,void 0,()=>this.props.forceUpdate([this.props.attr],this.props.data))))})}else this.defaultSendToDone=!1,this.onError(this.props.attr,l.I18n.t("ra_Instance %s is not alive",this.props.instance.toString()))}componentWillUnmount(){this.props.registerOnForceUpdate&&this.props.registerOnForceUpdate(this.props.attr),this.sendToTimeout&&(clearTimeout(this.sendToTimeout),this.sendToTimeout=null)}static getValue(e,t){if(typeof t=="string")return Fe.getValue(e,t.split("."));if(t.length===1)return e[t[0]];const s=t.shift();return typeof s=="string"&&typeof e[s]=="object"?Fe.getValue(e[s],t):null}static setValue(e,t,s){if(typeof t=="string"){Fe.setValue(e,t.split("."),s);return}if(t.length===1)s===null?delete e[t[0]]:e[t[0]]=s;else{const i=t.shift();if(typeof i!="string")return;(!e[i]||typeof e[i]=="object")&&(e[i]=e[i]||{}),Fe.setValue(e[i],t,s)}}getText(e,t){if(!e)return"";if(typeof e=="string"){const s=t?e:l.I18n.t(e);return s.includes("${")?this.getPattern(s):s}return ee(e)?e.func?typeof e.func=="object"?this.getPattern(e.func[this.lang]||e.func.en||""):this.getPattern(e.func):e[this.lang]||e.en||"":e.toString()}renderConfirmDialog(){if(!this.state.confirmDialog)return null;const e=this.state.confirmData||this.props.schema.confirm;let t=null;return e.type==="warning"?t=r().createElement(c.Warning,null):e.type==="error"?t=r().createElement(c.Error,null):e.type==="info"&&(t=r().createElement(c.Info,null)),r().createElement(l.Confirm,{title:this.getText(e.title)||l.I18n.t("ra_Please confirm"),text:this.getText(e.text),ok:this.getText(e.ok)||l.I18n.t("ra_Ok"),cancel:this.getText(e.cancel)||l.I18n.t("ra_Cancel"),icon:t||void 0,onClose:s=>this.setState({confirmDialog:!1},()=>{if(s){const i=JSON.parse(JSON.stringify(this.props.data));this.state.confirmDepAttr&&Fe.setValue(i,this.state.confirmDepAttr,this.state.confirmDepNewValue),Fe.setValue(i,this.state.confirmAttr,this.state.confirmNewValue),this.setState({confirmDialog:!1,confirmDepAttr:null,confirmDepNewValue:null,confirmNewValue:null,confirmAttr:null,confirmData:null},()=>this.props.onChange(i))}else this.setState({confirmDialog:!1,confirmDepAttr:null,confirmDepNewValue:null,confirmNewValue:null,confirmAttr:null,confirmData:null})})})}getIcon(e){e=e||this.props.schema.icon;let t=null;return e==="auth"?t=r().createElement(c.Key,null):e==="send"?t=r().createElement(c.Send,null):e==="web"?t=r().createElement(c.Public,null):e==="warning"?t=r().createElement(c.Warning,null):e==="error"?t=r().createElement(c.Error,null):e==="info"?t=r().createElement(c.Info,null):e==="search"?t=r().createElement(c.Search,null):e==="book"?t=r().createElement(c.MenuBook,null):e==="help"?t=r().createElement(c.Help,null):e==="upload"?t=r().createElement(c.UploadFile,null):e==="edit"?t=r().createElement(c.Edit,null):e==="user"?t=r().createElement(c.Person,null):e==="group"?t=r().createElement(c.Group,null):e==="delete"?t=r().createElement(c.Delete,null):e==="refresh"?t=r().createElement(c.Refresh,null):e==="add"?t=r().createElement(c.Add,null):e==="unpair"?t=r().createElement(c.LinkOff,null):e==="pair"?t=r().createElement(c.Link,null):e&&((e.endsWith(".png")||e.endsWith(".svg")||e.endsWith(".jpg"))&&!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`./adapter/${this.props.adapterName}/${e}`),t=r().createElement(l.Icon,{src:e,style:{width:22,height:22}})),t}onChangeAsync(e,t){return new Promise(s=>{this.onChange(e,t,s)})}onChange(e,t,s){const i=JSON.parse(JSON.stringify(this.props.data));if(Fe.setValue(i,e,t),this.props.schema.confirm&&this.execute(this.props.schema.confirm.condition,!1,i,this.props.arrayIndex,this.props.globalData))return new Promise(u=>{this.setState({confirmDialog:!0,confirmNewValue:t,confirmAttr:e,confirmData:null},()=>{typeof s=="function"?s():u()})});if(this.props.schema.confirmDependsOn)for(let u=0;u<this.props.schema.confirmDependsOn.length;u++){const p=this.props.schema.confirmDependsOn[u];if(p.confirm){const V=Fe.getValue(i,p.attr);if(this.execute(p.confirm.condition,!1,i,this.props.arrayIndex,this.props.globalData))return new Promise(K=>{this.setState({confirmDialog:!0,confirmNewValue:t,confirmAttr:e,confirmDepNewValue:V,confirmDepAttr:p.attr,confirmData:p.confirm},()=>{typeof s=="function"?s():K()})})}}const a=[];if(this.props.schema.onChangeDependsOn)for(let u=0;u<this.props.schema.onChangeDependsOn.length;u++){const p=this.props.schema.onChangeDependsOn[u];if(p.onChange){const V=Fe.getValue(i,p.attr);let K;this.props.custom?K=this.executeCustom(p.onChange.calculateFunc,i,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):K=this.execute(p.onChange.calculateFunc,V,i,this.props.arrayIndex,this.props.globalData),K!==V&&(Fe.setValue(i,p.attr,K),a.push(p.attr))}}if(this.props.schema.hiddenDependsOn)for(let u=0;u<this.props.schema.hiddenDependsOn.length;u++){const p=this.props.schema.hiddenDependsOn[u];p.hidden&&a.push(p.attr)}if(this.props.schema.labelDependsOn)for(let u=0;u<this.props.schema.labelDependsOn.length;u++){const p=this.props.schema.labelDependsOn[u];p.hidden&&a.push(p.attr)}if(this.props.schema.helpDependsOn)for(let u=0;u<this.props.schema.helpDependsOn.length;u++){const p=this.props.schema.helpDependsOn[u];p.hidden&&a.push(p.attr)}if(this.props.schema.onChange&&!this.props.schema.onChange.ignoreOwnChanges){const u=Fe.getValue(i,this.props.attr),p=this.props.custom?this.executeCustom(this.props.schema.onChange.calculateFunc,i,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):this.execute(this.props.schema.onChange.calculateFunc,u,i,this.props.arrayIndex,this.props.globalData);p!==u&&Fe.setValue(i,this.props.attr,p)}return this.props.custom?(this.props.onChange(e,t,()=>s&&s()),a&&a.length&&a.forEach((u,p)=>setTimeout(()=>this.props.onChange(u,Fe.getValue(i,u)),p*50))):this.props.onChange(i,void 0,()=>{a.length&&this.props.forceUpdate(a,i),s&&s()}),Promise.resolve()}execute(e,t,s,i,a){let u;if(ee(e))u=e.func;else if(typeof e=="string")u=e;else return e;if(!u)return t;try{return new Function("data","originalData","_system","_alive","_common","_socket","_instance","arrayIndex","globalData","_changed",u.includes("return")?u:`return ${u}`)(s||this.props.data,this.props.originalData,this.props.systemConfig,this.props.alive,this.props.common,this.props.socket,this.props.instance,i,a,this.props.changed)}catch(p){return console.error(`Cannot execute ${e}: ${p}`),t}}executeCustom(e,t,s,i,a,u){let p;if(ee(e))p=e.func;else if(typeof e=="string")p=e;else return e;if(!p)return null;try{return new Function("data","originalData","_system","instanceObj","customObj","_socket","arrayIndex","globalData","_changed",p.includes("return")?p:`return ${p}`)(t||this.props.data,this.props.originalData,this.props.systemConfig,i,s,this.props.socket,a,u,this.props.changed)}catch(V){return console.error(`Cannot execute ${p}: ${V}`),null}}calculate(e){let t,s,i,a;return this.props.custom?(t=e.validator?!this.executeCustom(e.validator,this.props.data,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):!1,s=e.disabled?this.executeCustom(e.disabled,this.props.data,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):!1,i=e.hidden?this.executeCustom(e.hidden,this.props.data,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):!1,a=e.defaultFunc?this.executeCustom(e.defaultFunc,this.props.data,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):e.default):(t=e.validator?!this.execute(e.validator,!1,this.props.data,this.props.arrayIndex,this.props.globalData):!1,s=e.disabled?this.execute(e.disabled,!1,this.props.data,this.props.arrayIndex,this.props.globalData):!1,i=e.hidden?this.execute(e.hidden,!1,this.props.data,this.props.arrayIndex,this.props.globalData):!1,a=e.defaultFunc?this.execute(e.defaultFunc,e.default,this.props.data,this.props.arrayIndex,this.props.globalData):e.default),{error:t,disabled:s,hidden:i,defaultValue:a}}onError(e,t){t?this.isError[e]=t:delete this.isError[e],this.props.onError&&this.props.onError(e,t)}renderItem(e,t,s){return this.getText(this.props.schema.label)||this.getText(this.props.schema.text)}renderHelp(e,t,s){return t?r().createElement("a",{href:t,target:"_blank",rel:"noreferrer",style:{color:this.props.themeType==="dark"?"#a147ff":"#5b238f",textDecoration:"underline"}},this.getText(e,s)):(e=this.getText(e,s)||"",e&&(e.includes("<a ")||e.includes("<br")||e.includes("<b>")||e.includes("<i>"))?l.Utils.renderTextWithA(e):e)}static escapeString(e,t){return typeof e!="string"?"":(e=e.replace(/`/g,"\\`"),e=e.replace(/\${([^}]+)}/g,(s,i)=>{if(i&&typeof i=="string"&&i.startsWith("data.")){const a=Fe.getValue(t,i.replace(/^data\./,""));if(typeof a=="string"&&a.includes('"'))return`\${${i}.replace(/"/g, '\\\\"')}`}return s}),e)}getPattern(e,t){if(t=t||this.props.data,!e)return"";let s;typeof e=="object"?e.func?s=e.func:(console.log(`Object must be stringified: ${JSON.stringify(e)}`),s=JSON.stringify(e)):s=e;try{return this.props.custom?new Function("data","originalData","arrayIndex","globalData","_system","instanceObj","customObj","_socket","_changed",`return \`${Fe.escapeString(s,t)}\``)(t,this.props.originalData,this.props.arrayIndex,this.props.globalData,this.props.systemConfig,this.props.instanceObj,this.props.customObj,this.props.socket,this.props.changed):new Function("data","originalData","arrayIndex","globalData","_system","_alive","_common","_socket","_changed",`return \`${Fe.escapeString(s,t)}\``)(t,this.props.originalData,this.props.arrayIndex,this.props.globalData,this.props.systemConfig,this.props.alive,this.props.common,this.props.socket,this.props.changed)}catch(i){return console.error(`Cannot execute ${s}: ${i}`),s}}render(){const e=this.props.schema;if(!e)return null;this.props.alive&&this.defaultSendToDone===!1&&(this.sendToTimeout=setTimeout(()=>{this.sendToTimeout=null,this.sendTo()},200));const{error:t,disabled:s,hidden:i,defaultValue:a}=this.calculate(e);if(i){if(Object.keys(this.isError).length&&(setTimeout(V=>Object.keys(V).forEach(K=>this.props.onError(K)),100,JSON.parse(JSON.stringify(this.isError))),this.isError={}),e.hideOnlyControl){const V=r().createElement(o.Grid,{item:!0,xs:e.xs||void 0,lg:e.lg||void 0,md:e.md||void 0,sm:e.sm||void 0,style:ne(ne({marginBottom:0,textAlign:"left"},e.style),this.props.themeType==="dark"?e.darkStyle:{})});return e.newLine?r().createElement(r().Fragment,null,r().createElement("div",{style:{flexBasis:"100%",height:0}}),V):V}return null}e.validatorNoSaveOnError&&(t&&!Object.keys(this.isError).length?(this.isError={[this.props.attr]:e.validatorErrorText?l.I18n.t(e.validatorErrorText):!0},setTimeout(V=>Object.keys(V).forEach(K=>this.props.onError(K,V[K])),100,JSON.parse(JSON.stringify(this.isError)))):!t&&Object.keys(this.isError).length&&(setTimeout(V=>Object.keys(V).forEach(K=>this.props.onError(K)),100,JSON.parse(JSON.stringify(this.isError))),this.isError={}));const u=this.renderItem(t,s||this.props.commandRunning||this.props.disabled,a);if(this.noPlaceRequired)return u;const p=r().createElement(o.Grid,{item:!0,title:this.getText(e.tooltip),xs:e.xs||void 0,lg:e.lg||void 0,md:e.md||void 0,sm:e.sm||void 0,style:ne(ne({marginBottom:0,textAlign:"left",width:e.type==="divider"||e.type==="header"?e.width||"100%":void 0},e.style),this.props.themeType==="dark"?e.darkStyle:{})},this.props.schema.defaultSendTo&&this.props.schema.button?r().createElement(o.Grid,{container:!0,style:{width:"100%"}},r().createElement(o.Grid,{item:!0,flex:1},u),r().createElement(o.Grid,{item:!0},r().createElement(o.Button,{variant:"outlined",onClick:()=>this.sendTo(),title:this.props.schema.buttonTooltip?this.getText(this.props.schema.buttonTooltip,this.props.schema.buttonTooltipNoTranslation):l.I18n.t("ra_Request data by instance")},this.getText(this.props.schema.button)))):u);return e.newLine?r().createElement(r().Fragment,null,r().createElement("div",{style:{flexBasis:"100%",height:0}}),this.renderConfirmDialog(),p):this.state.confirmDialog?r().createElement(r().Fragment,null,this.renderConfirmDialog(),p):p}};te(Fe,"DIFFERENT_VALUE","__different__"),te(Fe,"DIFFERENT_LABEL","ra___different__"),te(Fe,"NONE_VALUE",""),te(Fe,"NONE_LABEL","ra_none");let m=Fe;const w={fullWidth:{width:"100%"},accordionSummary:L=>({backgroundColor:L.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)"}),accordionTitle:{},toolbar:L=>({backgroundColor:L.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)",borderRadius:"3px"}),tooltip:{pointerEvents:"none"}};class E extends m{constructor(e){super(e);te(this,"typingTimer",null);te(this,"onDelete",e=>()=>{const t=JSON.parse(JSON.stringify(this.state.value));t.splice(e,1),this.setState({value:t,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(t))});te(this,"onClone",e=>()=>{const t=JSON.parse(JSON.stringify(this.state.value)),s=JSON.parse(JSON.stringify(t[e]));if(typeof this.props.schema.clone=="string"&&typeof s[this.props.schema.clone]=="string"){let i=1,a=s[this.props.schema.clone];const u=a.match(/(\d+)$/);for(u?(a=a.replace(u[0],""),i=parseInt(u[0],10)+1):a+="_";t.find(p=>p[this.props.schema.clone]===a+i.toString());)i++;s[this.props.schema.clone]=`${s[this.props.schema.clone]}_${i}`}t.splice(e,0,s),this.setState({value:t,activeIndex:-1,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(t))});te(this,"onChangeWrapper",e=>{this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=setTimeout(t=>{this.typingTimer=null,this.onChange(this.props.attr,t)},300,e)});te(this,"onAdd",()=>{const{schema:e}=this.props,t=JSON.parse(JSON.stringify(this.state.value)),s=e.items&&e.items.reduce((i,a)=>{let u;return a.defaultFunc?this.props.custom?u=a.defaultFunc?this.executeCustom(a.defaultFunc,this.props.data,this.props.customObj,this.props.instanceObj,t.length,this.props.data):this.props.schema.default:u=a.defaultFunc?this.execute(a.defaultFunc,this.props.schema.default,this.props.data,t.length,this.props.data):this.props.schema.default:u=a.default===void 0?null:a.default,i[a.attr]=u,i},{});t.push(s),this.setState({value:t,activeIndex:t.length-1},()=>this.onChangeWrapper(t))});this.props.schema.items=this.props.schema.items||[]}componentDidMount(){return fe(this,null,function*(){Ue(E.prototype,this,"componentDidMount").call(this);let e=m.getValue(this.props.data,this.props.attr)||[];Array.isArray(e)||(e=[]),this.setState({value:e,activeIndex:-1,iteration:0})})}componentWillUnmount(){this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=null,super.componentWillUnmount()}itemAccordion(e,t){const{value:s}=this.state,{schema:i}=this.props,a={type:"panel",items:i.items.reduce((u,p)=>(u[p.attr]=p,u),{}),style:{marginLeft:"-8px",marginTop:"10px",marginBottom:"10px"}};return r().createElement($t,{index:t+this.state.iteration,arrayIndex:t,changed:this.props.changed,globalData:this.props.data,socket:this.props.socket,adapterName:this.props.adapterName,instance:this.props.instance,common:this.props.common,alive:this.props.alive,themeType:this.props.themeType,themeName:this.props.themeName,data:e,custom:!0,schema:a,systemConfig:this.props.systemConfig,originalData:this.props.originalData,customs:this.props.customs,dateFormat:this.props.dateFormat,isFloatComma:this.props.isFloatComma,forceUpdate:this.props.forceUpdate,imagePrefix:this.props.imagePrefix,onCommandRunning:this.props.onCommandRunning,onChange:(u,p)=>{const V=JSON.parse(JSON.stringify(s));V[t][u]=p,this.setState({value:V},()=>this.onChangeWrapper(V))},onError:(u,p)=>this.onError(u,p),table:this.props.table,DeviceManager:this.props.DeviceManager,theme:this.props.theme})}onMoveUp(e){const t=JSON.parse(JSON.stringify(this.state.value)),s=t[e];t.splice(e,1),t.splice(e-1,0,s);const i=this.state.activeIndex-1;this.setState({value:t,activeIndex:i,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(t))}onMoveDown(e){const t=JSON.parse(JSON.stringify(this.state.value)),s=t[e];t.splice(e,1),t.splice(e+1,0,s);const i=this.state.activeIndex+1;this.setState({value:t,activeIndex:i,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(t))}renderItem(){const{schema:e}=this.props,{value:t}=this.state;return t?r().createElement(o.Paper,null,e.label||!e.noDelete?r().createElement(o.Toolbar,{variant:"dense"},e.label?r().createElement(o.Typography,{variant:"h6",id:"tableTitle",component:"div"},this.getText(e.label)):null,e.noDelete?null:r().createElement(o.IconButton,{size:"small",color:"primary",onClick:this.onAdd},r().createElement(c.Add,null))):null,t.map((s,i)=>r().createElement(o.Accordion,{key:`${s}_${i}`,expanded:this.state.activeIndex===i,onChange:(a,u)=>this.setState({activeIndex:u?i:-1})},r().createElement(o.AccordionSummary,{expandIcon:r().createElement(c.ExpandMore,null),sx:X.getStyle(this.props.theme,w.fullWidth,w.accordionSummary)},r().createElement(o.Typography,{style:w.accordionTitle},s[e.titleAttr])),r().createElement(o.AccordionDetails,{style:ne(ne({},e.style),this.props.themeType?e.darkStyle:void 0)},this.itemAccordion(t[i],i),r().createElement(o.Toolbar,{sx:w.toolbar},i?r().createElement(o.Tooltip,{title:l.I18n.t("ra_Move up"),componentsProps:{popper:{sx:w.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:()=>this.onMoveUp(i)},r().createElement(c.ArrowUpward,null))):r().createElement("div",{style:w.buttonEmpty}),i<t.length-1?r().createElement(o.Tooltip,{title:l.I18n.t("ra_Move down"),componentsProps:{popper:{sx:w.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:()=>this.onMoveDown(i)},r().createElement(c.ArrowDownward,null))):r().createElement("div",{style:w.buttonEmpty}),e.noDelete?null:r().createElement(o.Tooltip,{title:l.I18n.t("ra_Delete current row"),componentsProps:{popper:{sx:w.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:this.onDelete(i)},r().createElement(c.Delete,null))),e.clone?r().createElement(o.Tooltip,{title:l.I18n.t("ra_Clone current row"),componentsProps:{popper:{sx:w.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:this.onClone(i)},r().createElement(c.ContentCopy,null))):null)))),!e.noDelete&&t.length>0?r().createElement(o.Toolbar,{variant:"dense",sx:w.rootTool},r().createElement(o.IconButton,{size:"small",color:"primary",onClick:this.onAdd},r().createElement(c.Add,null))):null,e.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null):null}}const h=E,y={root:{width:"100%"},notAlive:{color:"#a30000"}};class g extends m{componentDidMount(){super.componentDidMount();const n=this.getInstance();this.props.socket.getState(`${n}.alive`).then(e=>this.setState({alive:!!(e&&e.val),instance:n}))}getInstance(){let n=this.props.schema.instance||`${this.props.adapterName}.${this.props.instance}`;return n.includes("${")&&(n=this.getPattern(n)),n&&!n.startsWith("system.adapter.")&&(n=`system.adapter.${n}`),n}renderItem(){if(this.getInstance()!==this.state.instance&&setTimeout(()=>{const e=this.getInstance();e?this.props.socket.getState(`${e}.alive`).then(t=>this.setState({alive:!!(t&&t.val),instance:e})):this.setState({alive:null,instance:e})},200),this.state.alive!==!1&&this.state.alive!==!0)return null;const n=this.state.instance.replace(/^system.adapter./,"");return r().createElement("div",{style:ne(ne({},y.root),this.state.alive?void 0:y.notAlive)},this.state.alive?this.props.schema.textAlive!==void 0?this.props.schema.textAlive?l.I18n.t(this.props.schema.textAlive,n):"":l.I18n.t("ra_Instance %s is alive",n):this.props.schema.textNotAlive!==void 0?this.props.schema.textNotAlive?l.I18n.t(this.props.schema.textNotAlive,n):"":l.I18n.t("ra_Instance %s is not alive",n))}}const A=g;class x extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr),e=this.props.schema.options.map(t=>typeof t=="string"?{label:t,value:t}:JSON.parse(JSON.stringify(t)));Array.isArray(n)?(e.unshift({label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE}),this.setState({value:m.DIFFERENT_VALUE,selectOptions:e})):this.setState({value:n,selectOptions:e})}renderItem(n,e){if(!this.state.selectOptions)return null;let t;const s=JSON.parse(JSON.stringify(this.state.selectOptions));return Array.isArray(this.state.value)||this.state.value===m.DIFFERENT_VALUE?([...this.state.value].filter(a=>!s.find(u=>typeof u=="object"?u.value===a:u===a)).forEach(a=>s.push({label:a.toString(),value:a})),t={label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE},s.unshift(t)):(t=this.state.value!==null&&this.state.value!==void 0&&s.find(a=>typeof a=="object"?a.value==this.state.value:a==this.state.value),this.state.value!==null&&this.state.value!==void 0&&!t&&this.props.schema.freeSolo&&(t={value:this.state.value,label:this.state.value},s.push(t))),r().createElement(o.Autocomplete,{fullWidth:!0,freeSolo:!!this.props.schema.freeSolo,value:t,options:s,onInputChange:a=>{if(!a||!this.props.schema.freeSolo)return;const u=a.target.value;u!==this.state.value&&this.setState({value:u},()=>this.onChange(this.props.attr,u))},onChange:(a,u)=>{const p=typeof u=="object"?u?u.value:"":u;p!==this.state.value&&this.setState({value:p},()=>this.onChange(this.props.attr,p))},getOptionLabel:a=>{var u;return typeof a=="object"&&(u=a==null?void 0:a.label)!=null?u:""},renderInput:a=>r().createElement(o.TextField,Ne(ne({variant:"standard"},a),{error:!!n,placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:e}))})}}const P=x;class M extends m{constructor(){super(...arguments);te(this,"initialized",!1);te(this,"_context")}askInstance(){const e=m.getValue(this.props.data,this.props.attr),t=this.props.schema.options?this.props.schema.options.map(s=>typeof s=="string"?{label:s,value:s}:JSON.parse(JSON.stringify(s))):[];if(this.props.alive){let s=this.props.schema.data;if(s===void 0&&this.props.schema.jsonData){s=this.getPattern(this.props.schema.jsonData);try{typeof s=="string"&&(s=JSON.parse(s))}catch(i){console.error(`Cannot parse json data: ${s}`)}}s===void 0&&(s=null),this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,this.props.schema.command||"send",s).then(i=>{i&&Array.isArray(i)&&i.forEach(a=>t.push(typeof a=="string"?{label:a,value:a}:JSON.parse(JSON.stringify(a)))),Array.isArray(e)?(t.unshift({label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE}),this.setState({value:m.DIFFERENT_VALUE,selectOptions:t})):this.setState({value:e,selectOptions:t})})}else Array.isArray(e)?(t.unshift({label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE}),this.setState({value:m.DIFFERENT_VALUE,selectOptions:t})):this.setState({value:e,selectOptions:t})}getContext(){const e={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(t=>e[t]=m.getValue(this.props.data,t)),JSON.stringify(e)}renderItem(e,t){if(this.props.alive){const u=this.getContext();(u!==this._context||!this.initialized)&&(this._context=u,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}if(!this.state.selectOptions)return null;let s;const i=JSON.parse(JSON.stringify(this.state.selectOptions));return Array.isArray(this.state.value)||this.state.value===m.DIFFERENT_LABEL?([...this.state.value].filter(u=>!i.find(p=>p.value===u)).forEach(u=>i.push({label:u.toString(),value:u})),s={label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE},i.unshift(s)):(s=this.state.value!==null&&this.state.value!==void 0&&i.find(u=>u.value==this.state.value),this.state.value!==null&&this.state.value!==void 0&&!s&&this.props.schema.freeSolo&&(s={value:this.state.value,label:this.state.value},i.push(s)),s=s||null),i.length?r().createElement(o.Autocomplete,{value:s,fullWidth:!0,freeSolo:!!this.props.schema.freeSolo,options:i,getOptionLabel:u=>{var p;return(p=u==null?void 0:u.label)!=null?p:""},onInputChange:u=>{if(!u||!this.props.schema.freeSolo)return;const p=u.target.value;p!==this.state.value&&this.setState({value:p},()=>this.onChange(this.props.attr,p))},onChange:(u,p)=>{const V=typeof p=="object"?p?p.value:"":p;V!==this.state.value&&this.setState({value:V},()=>this.onChange(this.props.attr,V))},renderInput:u=>r().createElement(o.TextField,Ne(ne({variant:"standard"},u),{error:!!e,placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:t}))}):r().createElement(o.TextField,{variant:"standard",fullWidth:!0,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!e,disabled:t,inputProps:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0},onChange:u=>{const p=u.target.value;this.setState({value:p},()=>this.onChange(this.props.attr,(p||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const N=M,_={fullWidth:{width:"100%"},flex:{display:"flex"},button:{height:48,marginLeft:4,minWidth:48}};class I extends m{componentDidMount(){return fe(this,null,function*(){Ue(I.prototype,this,"componentDidMount").call(this);const{data:n,attr:e}=this.props,t=m.getValue(n,e)||"";this.setState({value:t,showDialog:!1})})}renderItem(n,e){const{schema:t,attr:s}=this.props,{value:i,showDialog:a}=this.state;return r().createElement(o.FormControl,{style:_.fullWidth,variant:"standard"},t.label?r().createElement(o.InputLabel,{shrink:!0},this.getText(t.label)):null,r().createElement("div",{style:_.flex},r().createElement(o.TextField,{variant:"standard",fullWidth:!0,value:i!=null?i:"",error:!!n,disabled:e,placeholder:this.getText(t.placeholder),label:this.getText(t.label),helperText:this.renderHelp(t.help,t.helpLink,t.noTranslation),onChange:u=>{const p=u.target.value;this.setState({value:p},()=>this.onChange(s,p))}}),r().createElement(o.Button,{color:"grey",style:_.button,size:"small",variant:"outlined",onClick:()=>this.setState({showDialog:!0})},"...")),a?r().createElement(l.Cron,{title:l.I18n.t("ra_Define schedule"),simple:t.simple,complex:t.complex,cron:i,onClose:()=>this.setState({showDialog:!1}),cancel:l.I18n.t("ra_Cancel"),ok:l.I18n.t("ra_Ok"),theme:this.props.theme,onOk:u=>this.setState({showDialog:!1,value:u},()=>this.onChange(s,u))}):null)}}const W=I;class oe extends m{componentDidMount(){return fe(this,null,function*(){Ue(oe.prototype,this,"componentDidMount").call(this);const n=m.getValue(this.props.data,this.props.attr),t=(yield this.props.socket.getCertificates()).filter(s=>{const i=this.props.attr.toLowerCase();return i.includes(s.type)||s.type==="public"&&i.includes("cert")||s.type==="private"&&(i.includes("priv")||i.includes("key"))?!0:!!(s.type==="chained"&&(i.includes("chain")||i.includes("ca")))}).map(s=>({label:s.name,value:s.name}));t.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),this.setState({value:n,selectOptions:t})})}renderItem(n,e){var s,i;if(!this.state.selectOptions)return null;const t=(s=this.state.selectOptions)==null?void 0:s.find(a=>a.value===this.state.value);return r().createElement(o.FormControl,{style:{width:"100%"},variant:"standard"},this.props.schema.label?r().createElement(o.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!n,displayEmpty:!0,disabled:!!e,value:this.state.value,renderValue:()=>this.getText(t==null?void 0:t.label,this.props.schema.noTranslation!==!1),onChange:a=>this.setState({value:a.target.value},()=>this.onChange(this.props.attr,this.state.value))},(i=this.state.selectOptions)==null?void 0:i.map(a=>r().createElement(o.MenuItem,{key:a.value,value:a.value,style:a.value===m.NONE_VALUE?{opacity:.5}:{}},this.getText(a.label,this.props.schema.noTranslation!==!1)))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Z=oe,ae={fullWidth:{width:"100%"},leWidth:{width:620,marginBottom:10},certWidth:{width:200,marginRight:10}};class ue extends m{componentDidMount(){return fe(this,null,function*(){var u;Ue(ue.prototype,this,"componentDidMount").call(this);const n=yield this.props.socket.getCertificates(),e=[],t=[],s=[];let i=[];const a=yield this.props.socket.getObject("system.certificates");(u=a==null?void 0:a.native)!=null&&u.collections?i=Object.keys(a.native.collections):i=null,n.forEach(p=>{p.type==="public"?e.push({label:p.name,value:p.name}):p.type==="private"?t.push({label:p.name,value:p.name}):p.type==="chained"?s.push({label:p.name,value:p.name}):(e.push({label:p.name,value:p.name}),t.push({label:p.name,value:p.name}),s.push({label:p.name,value:p.name}))}),e.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),t.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),s.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),this.setState({certsPublicOptions:e,certsChainOptions:s,certsPrivateOptions:t,collectionsOptions:i})})}renderItem(n,e){var K,G,q,ce,Ee,re,ye;if(!this.state.certsPublicOptions||!this.state.certsPrivateOptions||!this.state.certsChainOptions)return null;const t=(m.getValue(this.props.data,this.props.schema.leCollectionName||"leCollection")||"false").toString(),s=m.getValue(this.props.data,this.props.schema.certPublicName||"certPublic"),i=m.getValue(this.props.data,this.props.schema.certPrivateName||"certPrivate"),a=m.getValue(this.props.data,this.props.schema.certChainedName||"certChained"),u=(K=this.state.certsPublicOptions)==null?void 0:K.find(de=>de.value===s),p=(G=this.state.certsPrivateOptions)==null?void 0:G.find(de=>de.value===i),V=(q=this.state.certsChainOptions)==null?void 0:q.find(de=>de.value===a);return r().createElement("div",{style:ae.fullWidth},this.state.collectionsOptions?r().createElement(o.FormControl,{style:ae.leWidth,variant:"standard"},r().createElement(o.InputLabel,{shrink:!0},"Let's encrypt"),r().createElement(o.Select,{variant:"standard",error:!!n,displayEmpty:!0,disabled:!!e,value:t,onChange:de=>this.onChange(this.props.schema.leCollectionName||"leCollection",de.target.value==="false"?!1:de.target.value==="true"?!0:de.target.value)},r().createElement(o.MenuItem,{key:"_false",value:"false",style:{fontWeight:"bold"}},l.I18n.t("ra_Do not use let's encrypt")),r().createElement(o.MenuItem,{key:"_true",value:"true",style:{fontWeight:"bold"}},l.I18n.t("ra_Use all available let's encrypt certificates")),(ce=this.state.collectionsOptions)==null?void 0:ce.map(de=>r().createElement(o.MenuItem,{key:de,value:de},de)))):null,this.state.collectionsOptions?r().createElement("br",null):null,this.state.collectionsOptions&&t!=="false"?r().createElement("div",null,l.I18n.t("ra_Fallback custom certificates")):null,r().createElement(o.FormControl,{style:ae.certWidth,variant:"standard"},r().createElement(o.InputLabel,{shrink:!0},l.I18n.t("ra_Public certificate")),r().createElement(o.Select,{variant:"standard",error:!!n,displayEmpty:!0,disabled:!!e,value:s||"",renderValue:()=>this.getText(u==null?void 0:u.label),onChange:de=>this.onChange(this.props.schema.certPublicName||"certPublic",de.target.value)},(Ee=this.state.certsPublicOptions)==null?void 0:Ee.map((de,Qe)=>r().createElement(o.MenuItem,{key:`${de.value}_${Qe}`,value:de.value,style:de.value===m.NONE_VALUE?{opacity:.5}:{}},this.getText(de.label))))),r().createElement(o.FormControl,{style:ae.certWidth,variant:"standard"},r().createElement(o.InputLabel,{shrink:!0},l.I18n.t("ra_Private certificate")),r().createElement(o.Select,{variant:"standard",error:!!n,displayEmpty:!0,disabled:!!e,value:i||"",renderValue:()=>this.getText(p==null?void 0:p.label),onChange:de=>this.onChange(this.props.schema.certPrivateName||"certPrivate",de.target.value)},(re=this.state.certsPrivateOptions)==null?void 0:re.map((de,Qe)=>r().createElement(o.MenuItem,{key:`${de.value}_${Qe}`,value:de.value,style:de.value===m.NONE_VALUE?{opacity:.5}:{}},this.getText(de.label))))),r().createElement(o.FormControl,{style:ae.certWidth,variant:"standard"},r().createElement(o.InputLabel,{shrink:!0},l.I18n.t("ra_Chained certificate")),r().createElement(o.Select,{variant:"standard",error:!!n,displayEmpty:!0,disabled:!!e,value:a||"",renderValue:()=>this.getText(V==null?void 0:V.label),onChange:de=>this.onChange(this.props.schema.certChainedName||"certChained",de.target.value)},(ye=this.state.certsChainOptions)==null?void 0:ye.map((de,Qe)=>r().createElement(o.MenuItem,{key:`${de.value}_${Qe}`,value:de.value,style:de.value===m.NONE_VALUE?{opacity:.5}:{}},this.getText(de.label))))))}}const J=ue;class Q extends m{componentDidMount(){return fe(this,null,function*(){var t;Ue(Q.prototype,this,"componentDidMount").call(this);let n;const e=yield this.props.socket.getObject("system.certificates");(t=e==null?void 0:e.native)!=null&&t.collections?n=Object.keys(e.native.collections):n=[],this.setState({collectionsOptions:n})})}renderItem(n,e){var s;if(!this.state.collectionsOptions)return null;const t=(m.getValue(this.props.data,this.props.schema.leCollectionName||"leCollection")||"false").toString();return r().createElement(o.FormControl,{style:{width:"100%"},variant:"standard"},this.props.schema.label?r().createElement(o.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!n,displayEmpty:!0,disabled:!!e,value:t,onChange:i=>this.onChange(this.props.schema.leCollectionName||"leCollection",i.target.value==="false"?!1:i.target.value==="true"?!0:i.target.value)},r().createElement(o.MenuItem,{key:"_false",value:"false",style:{fontWeight:"bold"}},l.I18n.t("ra_Do not use let's encrypt")),r().createElement(o.MenuItem,{key:"_true",value:"true",style:{fontWeight:"bold"}},l.I18n.t("ra_Use all available let's encrypt certificates")),(s=this.state.collectionsOptions)==null?void 0:s.map(i=>r().createElement(o.MenuItem,{key:i,value:i},i))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const j=Q,z={fullWidth:{width:"100%"},icon:{width:24,height:24,marginRight:4},licLabel:{fontWeight:"bold",minWidth:100,marginRight:10,textTransform:"capitalize",display:"inline-block"},licValue:{fontWeight:"normal"},errorTitle:L=>({color:L.palette.mode==="dark"?"#e39191":"#b62020"}),okTitle:L=>({color:L.palette.mode==="dark"?"#6fd56f":"#007c00"}),errorText:L=>({color:L.palette.mode==="dark"?"#e39191":"#b62020",mb:"30px"})};class ke extends m{componentDidMount(){return fe(this,null,function*(){Ue(ke.prototype,this,"componentDidMount").call(this),this.setState({_error:"",running:!1,showLicenseData:null,foundSuitableLicense:!1,licenseOfflineCheck:!1,result:null,allLicenses:null,askForUpdate:!1,showLinkToProfile:!1})})}renderErrorDialog(){if(this.state._error&&!this.state.showLicenseData){let n=this.state._error;return this.state.allLicenses&&(n=[r().createElement("div",{key:"error"},n)],n.push(r().createElement(o.Button,{key:"button",variant:"contained",onClick:()=>window.open("https://iobroker.net/www/account/licenses","_blank")},l.I18n.t("iobroker.net"))),this.state.allLicenses.length?n.push(r().createElement(o.TableContainer,{key:"table"},r().createElement(o.Table,{size:"small"},r().createElement(o.TableHead,null,r().createElement(o.TableRow,null,r().createElement(o.TableCell,null,l.I18n.t("ra_Product")),r().createElement(o.TableCell,null,l.I18n.t("ra_Version")),r().createElement(o.TableCell,null,"UUID"),r().createElement(o.TableCell,null,l.I18n.t("ra_ValidTill")),r().createElement(o.TableCell,null,l.I18n.t("ra_Commercial")),r().createElement(o.TableCell,null,"ID"))),r().createElement(o.TableBody,null,this.state.allLicenses.map(e=>r().createElement(o.TableRow,{key:e.id},r().createElement(o.TableCell,{sx:e.validName?null:z.errorText},e.license.product),r().createElement(o.TableCell,{sx:e.validVersion?null:z.errorText},e.license.version),r().createElement(o.TableCell,{sx:e.validUuid?null:z.errorText},e.license.uuid||"--"),r().createElement(o.TableCell,{sx:e.validTill?null:z.errorText},e.license.validTill&&e.license.validTill!=="0000-00-00 00:00:00"?new Date(e.license.validTill).toLocaleDateString():"--"),r().createElement(o.TableCell,null,e.license.invoice!=="free"?e.license.invoice==="MANUALLY_CREATED"?"\u2713":e.license.invoice:"-"),r().createElement(o.TableCell,null,e.id))))))):(n.push(r().createElement("div",{key:"text1"},l.I18n.t("ra_No one license found in license manager"))),n.push(r().createElement("div",{key:"text2"},l.I18n.t("ra_Please create license"))))),r().createElement(o.Dialog,{open:!0,maxWidth:"xl",fullWidth:this.props.fullWidth!==void 0?this.props.fullWidth:!0,onClick:()=>this.setState({_error:"",allLicenses:null})},r().createElement(o.DialogTitle,null,l.I18n.t("ra_Error")),r().createElement(o.DialogContent,null,r().createElement(o.DialogContentText,null,n)),r().createElement(o.DialogActions,null,r().createElement(o.Button,{variant:"contained",onClick:()=>this.setState({_error:"",allLicenses:null}),color:"primary",autoFocus:!0,startIcon:r().createElement(c.Check,null)},l.I18n.t("ra_Ok"))))}return null}renderMessageDialog(){if(this.state.showLicenseData){const n=[],e=this.state.showLicenseData;return Object.keys(e).forEach(t=>{if(!(e[t]===null||e[t]===void 0))if(typeof e[t]=="object"){const s=e[t];Object.keys(s).forEach(i=>{s[i]!==null&&s[i]!==void 0&&(typeof s[i]=="object"?n.push(r().createElement("div",{key:i},r().createElement("div",{style:z.licLabel},i,":"),JSON.stringify(s[i],null,2))):n.push(r().createElement("div",{key:i},r().createElement("div",{style:z.licLabel},t," ","-",i,":"),s[i].toString())))})}else n.push(r().createElement("div",{key:t},r().createElement("div",{style:z.licLabel},t.replace(/_/g," "),":"),e[t].toString()))}),n.push(r().createElement("div",{key:"checked"},r().createElement("div",{style:z.licLabel},l.I18n.t("ra_Checked"),":"),this.state.licenseOfflineCheck?l.I18n.t("ra_locally"):l.I18n.t("ra_via internet"))),r().createElement(o.Dialog,{open:!0,onClose:()=>this.setState({showLicenseData:null})},r().createElement(o.DialogTitle,null,r().createElement(o.Box,{component:"span",sx:this.state.result?z.okTitle:z.errorTitle},l.I18n.t("ra_License %s",this.state.result?"OK":"INVALID"))),r().createElement(o.DialogContent,null,this.state.showLinkToProfile?r().createElement(o.Button,{variant:"contained",onClick:()=>window.open("https://iobroker.net/www/account/licenses","_blank")},"https://iobroker.net"):null,this.state._error?r().createElement(o.Box,{component:"div",sx:z.errorText},this.state._error):null,n),r().createElement(o.DialogActions,null,r().createElement(o.Button,{onClick:()=>this.setState({showLicenseData:null,_error:""}),color:"primary",variant:"contained"},l.I18n.t("ra_Close"))))}return null}static parseJwt(n){const t=n.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(i=>`%${`00${i.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{return JSON.parse(s)}catch(i){return null}}static isVersionValid(n,e,t,s){if(!e||!n)return!0;let i=!0;const[a]=n.split(".");return e.startsWith(">=")?i=parseInt(a,10)>=parseInt(e.substring(2,10)):e.startsWith("<=")?i=parseInt(a,10)<=parseInt(e.substring(2,10)):e.startsWith(">")?i=parseInt(a,10)>parseInt(e.substring(1,10)):e.startsWith("<")?i=parseInt(a,10)<parseInt(e.substring(1,10)):e.startsWith("=")?i=parseInt(a,10)===parseInt(e.substring(1,10)):e.startsWith("==")?i=parseInt(a,10)===parseInt(e.substring(2,10)):e.startsWith("===")&&(i=parseInt(a,10)===parseInt(e.substring(3,10))),!0}findInLicenseManager(n){return fe(this,null,function*(){var s,i,a,u;const e=yield this.props.socket.getObject("system.licenses"),t=[];if((i=(s=e==null?void 0:e.native)==null?void 0:s.licenses)!=null&&i.length){let p=null;const V=Date.now();let K;if(this.props.schema.uuid){const q=yield this.props.socket.getObject("system.meta.uuid");K=(a=q==null?void 0:q.native)==null?void 0:a.uuid}let G;if(this.props.schema.version){const q=yield this.props.socket.getObject(`system.adapter.${n}`);G=(u=q==null?void 0:q.common)==null?void 0:u.version}e.native.licenses.forEach(q=>{const ce=!q.validTill||q.validTill==="0000-00-00 00:00:00"||new Date(q.validTill).getTime()>V,Ee=(q.product||"").split("."),re=Ee[1]===n||n==="vis-2"&&Ee[1]==="vis",ye=!K||!q.uuid||q.uuid===K,de=ke.isVersionValid(G,q.version,q.invoice,n);(!p||q.invoice!=="free")&&ce&&re&&ye&&de&&(p=q),t.push({id:q.id,validName:re,validUuid:ye,validVersion:de,validTill:ce,license:q})}),p&&(t.find(q=>q.id===p.id).used=!0)}return t})}checkLicense(n,e){return fe(this,null,function*(){var u,p,V;let t;if(this.props.schema.uuid){const K=yield this.props.socket.getObject("system.meta.uuid");t=(u=K==null?void 0:K.native)==null?void 0:u.uuid}let s;if(this.props.schema.version){const K=yield this.props.socket.getObject(`system.adapter.${e}`);s=(p=K==null?void 0:K.common)==null?void 0:p.version}const i=new AbortController;let a=setTimeout(()=>{a=null,i.abort()},5e3);try{const K=yield window.fetch("https://iobroker.net/api/v1/public/cert/",{method:"POST",body:JSON.stringify({json:n,uuid:t}),headers:{"Content-Type":"text/plain"},signal:i.signal});a&&clearTimeout(a);const G=yield K.text();let q;try{q=JSON.parse(G)}catch(ce){}if(q!=null&&q.error)try{const ce=ke.parseJwt(n),Ee=l.I18n.t(`ra_${ce.error||q.error||"Unknown error"}`).replace(/^ra_/,"");return this.setState({_error:Ee,licenseOfflineCheck:!1,showLicenseData:ce,result:!1,running:!1})}catch(ce){return console.log("Cannot parse license"),this.setState({_error:q.error,result:!1,running:!1})}else{let ce=null;try{ce=ke.parseJwt(n)}catch(Ee){}if(q){const Ee=q.validTill||q.valid_till;if(Ee&&Ee!=="0000-00-00 00:00:00"&&new Date(Ee).getTime()<Date.now())return this.setState({_error:l.I18n.t("ra_License expired on %s",new Date(Ee).toLocaleString()),licenseOfflineCheck:!1,showLicenseData:ce,result:!1,running:!1});const re=(q.name||"").split(".");return re[1]===e||re[1]==="vis"&&e==="vis-2"?t&&!q.uuid&&e==="vis-2"?this.setState({_error:l.I18n.t("ra_License must be converted",q.uuid),showLinkToProfile:!0,licenseOfflineCheck:!1,showLicenseData:ce,result:!1,running:!1}):t&&q.uuid&&q.uuid!==t?this.setState({_error:l.I18n.t('ra_Serial number (UUID) "%s" in license is for other device.',q.uuid),licenseOfflineCheck:!1,showLicenseData:ce,result:!1,running:!1}):ke.isVersionValid(s,q.version,q.invoice,e)?this.setState({licenseOfflineCheck:!1,showLicenseData:ce,result:!0,running:!1}):this.setState({_error:l.I18n.t("ra_License is for version %s, but required version is %s",q.version,this.props.schema.version),licenseOfflineCheck:!1,showLicenseData:ce,result:!1,running:!1}):this.setState({_error:l.I18n.t('ra_License for other product "%s"',q.name),licenseOfflineCheck:!1,showLicenseData:ce,result:!1,running:!1})}throw new Error("ra_Invalid answer from server")}}catch(K){if(((V=K==null?void 0:K.response)==null?void 0:V.status)===404)return this.setState({_error:l.I18n.t("ra_License does not exist"),result:!1,running:!1});try{const G=ke.parseJwt(n),q=(G.name||"").split(".");return G.valid_till&&G.valid_till!=="0000-00-00 00:00:00"&&new Date(G.valid_till).getTime()<Date.now()?this.setState({_error:l.I18n.t("ra_License expired on %s",new Date(G.valid_till).toLocaleString()),showLicenseData:G,licenseOfflineCheck:!0,running:!1,result:!1}):q[1]===e?t&&G.uuid&&G.uuid!==t?this.setState({_error:l.I18n.t('ra_Serial number (UUID) "%s" in license is for other device.',G.uuid),showLicenseData:G,licenseOfflineCheck:!0,result:!1,running:!1}):ke.isVersionValid(s,G.version,G.invoice,e)?this.setState({running:!1,result:!0,licenseOfflineCheck:!0,showLicenseData:G}):this.setState({_error:l.I18n.t("ra_License is for version %s, but required version is %s",G.version,this.props.schema.version),licenseOfflineCheck:!0,showLicenseData:G,result:!1,running:!1}):this.setState({_error:l.I18n.t('ra_License for other product "%s"',G.name),licenseOfflineCheck:!0,showLicenseData:G,result:!1,running:!1})}catch(G){return this.setState({_error:l.I18n.t("ra_Cannot decode license"),result:!1,licenseOfflineCheck:!0,running:!1})}}})}renderAskForUpdate(){return this.state.askForUpdate?r().createElement(l.Confirm,{text:l.I18n.t("ra_License not found in license manager. Do you want to read licenses from iobroker.net?"),ok:l.I18n.t("ra_Yes"),onClose:n=>fe(this,null,function*(){if(n){this.setState({askForUpdate:!1});try{yield this.props.socket.updateLicenses(null,null)}catch(e){window.alert(l.I18n.t("ra_Cannot read licenses: %s",e));return}yield this._onClick(!0)}else this.setState({askForUpdate:!1,running:!1})})}):null}_onClick(n){return fe(this,null,function*(){const e=this.props.adapterName==="vis-2"?"vis":this.props.adapterName;this.setState({running:!0});let t,s;if(this.props.data.useLicenseManager){if(s=yield this.findInLicenseManager(e),t=s.find(i=>i.used),t&&(t=t.license.json),!t&&!n){this.setState({askForUpdate:!0});return}}else t=this.props.data.license;t?yield this.checkLicense(t,e):this.props.data.useLicenseManager?this.setState({_error:l.I18n.t("ra_Suitable license not found in license manager"),result:!1,running:!1,allLicenses:s}):this.setState({_error:l.I18n.t("ra_Please enter the license"),result:!1,running:!1})})}renderItem(){return r().createElement("div",{style:z.fullWidth},r().createElement(o.Button,{variant:this.props.schema.variant||"outlined",color:this.props.schema.color||"primary",style:z.fullWidth,disabled:!this.props.data.license&&!this.props.data.useLicenseManager||this.state.running,startIcon:r().createElement(c.Send,null),onClick:()=>this._onClick()},this.state.running?r().createElement(o.CircularProgress,{size:20,style:{marginRight:8}}):null,this.getText(this.props.schema.label||"ra_Check license",this.props.schema.noTranslation)),this.renderMessageDialog(),this.renderErrorDialog(),this.renderAskForUpdate())}}const ge=ke;class Be extends m{renderItem(n,e){const t=m.getValue(this.props.data,this.props.attr),s=Array.isArray(t);return r().createElement(o.FormControl,{style:{width:"100%"},variant:"standard"},r().createElement(o.FormControlLabel,{onClick:i=>{i.preventDefault(),i.stopPropagation(),e||this.onChange(this.props.attr,!t)},control:r().createElement(o.Checkbox,{indeterminate:s,checked:!!t,onChange:i=>{s?this.onChange(this.props.attr,!0):this.onChange(this.props.attr,i.target.checked)},disabled:e}),label:this.getText(this.props.schema.label)}),r().createElement(o.FormHelperText,{style:{color:"red"}},n?this.props.schema.validatorErrorText?l.I18n.t(this.props.schema.validatorErrorText):l.I18n.t("ra_Error"):null),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const ze=Be;var Te=$(23479),ut=$.n(Te),ct=$(98625),gt=$(34603);const _e={standard:o.Input,filled:ct.A,outlined:o.OutlinedInput},kt=L=>{const n=L.palette.mode==="light",e=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&.mui-variant-outlined,&.mui-variant-filled":{boxSizing:"border-box"},"&.mui-variant-outlined":{paddingTop:"14px"},"&.mui-variant-filled":{paddingTop:"28px"}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",alignItems:"center",cursor:"text",marginBottom:"-2px",minHeight:40},outlined:{"& input":{height:16,paddingTop:"4px",paddingBottom:"12px",marginTop:"4px",marginBottom:"4px"}},standard:{marginTop:"18px"},filled:{"& input":{height:22,marginBottom:"4px",marginTop:"4px",paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:`2px solid ${L.palette.primary[n?"dark":"light"]}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:L.transitions.create("transform",{duration:L.transitions.duration.shorter,easing:L.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:L.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:L.transitions.create("border-bottom-color",{duration:L.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:`2px solid ${L.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${e}`}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:L.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}},Oe={BACKSPACE:8,DELETE:46,LEFT_ARROW:37,RIGHT_ARROW:39},qe=({value:L,isFocused:n,isDisabled:e,isReadOnly:t,handleClick:s,handleDelete:i,style:a},u)=>r().createElement(o.Chip,{key:u,style:Ne(ne({},a),{pointerEvents:e||t?"none":void 0,backgroundColor:n?gt.A[300]:void 0}),onClick:s,onDelete:i,label:L});class bt extends r().Component{constructor(e){super(e);te(this,"labelRef");te(this,"labelNode",null);te(this,"input");te(this,"newChipKeyCodes");te(this,"newChipKeys");te(this,"actualInput",null);te(this,"inputBlurTimeout",null);te(this,"_keyPressed");te(this,"_preventChipCreation");te(this,"styles",{});te(this,"styleTheme",null);te(this,"focus",()=>{var e;(e=this.actualInput)==null||e.focus(),this.state.focusedChip&&this.setState({focusedChip:null})});te(this,"handleInputBlur",e=>{this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1}),this.state.focusedChip&&this.setState({focusedChip:null});const t=e.target.value;let s;switch(this.props.blurBehavior||"clear"){case"add-or-clear":s={clearInputOnFail:!0};case"add":if(this.props.delayBeforeAdd){const i=(this.props.value||this.state.chips).length;this.inputBlurTimeout=setTimeout(()=>{const a=(this.props.value||this.state.chips).length;i===a?this.handleAddChip(t,s):this.clearInput()},150)}else this.handleAddChip(t,s);break;case"clear":this.clearInput();break;default:break}});te(this,"handleInputFocus",e=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)});te(this,"handleKeyDown",e=>{const{focusedChip:t}=this.state;if(this._keyPressed=!1,this._preventChipCreation=!1,this.props.onKeyDown&&(this.props.onKeyDown(e),e.isDefaultPrevented()))return;const s=this.props.value||this.state.chips;if(this.newChipKeyCodes.includes(e.keyCode)||this.newChipKeys.includes(e.key)){this.handleAddChip(e.target.value)!==!1&&e.preventDefault();return}switch(e.keyCode){case Oe.BACKSPACE:e.target.value===""&&(t?(this.handleDeleteChip(s[t],t),t&&this.setState({focusedChip:t-1})):this.setState({focusedChip:s.length-1}));break;case Oe.DELETE:e.target.value===""&&t&&(this.handleDeleteChip(s[t],t),t<=s.length-1&&this.setState({focusedChip:t}));break;case Oe.LEFT_ARROW:t===null&&e.target.value===""&&s.length?this.setState({focusedChip:s.length-1}):t!==null&&t>0&&this.setState({focusedChip:t-1});break;case Oe.RIGHT_ARROW:t!==null&&t<s.length-1?this.setState({focusedChip:t+1}):this.setState({focusedChip:null});break;default:this.setState({focusedChip:null});break}});te(this,"handleKeyUp",e=>{!this._preventChipCreation&&(this.newChipKeyCodes.includes(e.keyCode)||this.newChipKeys.includes(e.key))&&this._keyPressed?this.clearInput():this.updateInput(e.target.value),this.props.onKeyUp&&this.props.onKeyUp(e)});te(this,"handleKeyPress",e=>{this._keyPressed=!0,this.props.onKeyPress&&this.props.onKeyPress(e)});te(this,"handleUpdateInput",e=>{(this.props.inputValue===null||this.props.inputValue===void 0)&&this.updateInput(e.target.value),this.props.onUpdateInput&&this.props.onUpdateInput(e)});te(this,"setActualInputRef",e=>{this.actualInput=e,this.props.inputRef&&this.props.inputRef(e)});this.state={chips:e.defaultValue||[],focusedChip:null,inputValue:"",isFocused:!1,chipsUpdated:!1,prevPropsValue:[],variant:this.props.variant||"standard"},this.newChipKeyCodes=e.newChipKeyCodes||[13],this.newChipKeys=e.newChipKeys||["Enter"],this.labelRef=r().createRef(),this.input=r().createRef()}componentDidMount(){this.state.variant==="outlined"&&(this.labelNode=ut().findDOMNode(this.labelRef.current),this.forceUpdate())}componentWillUnmount(){this.inputBlurTimeout&&clearTimeout(this.inputBlurTimeout)}static getDerivedStateFromProps(e,t){let s=null;return e.value&&e.value.length!==t.prevPropsValue.length&&(s={prevPropsValue:e.value},e.clearInputValueOnChange&&(s.inputValue="")),e.clearInputValueOnChange&&e.value&&e.value.length!==t.prevPropsValue.length&&(s={prevPropsValue:e.value,inputValue:""}),e.disabled&&(s=Ne(ne({},s),{focusedChip:null})),!t.chipsUpdated&&e.defaultValue&&(s=Ne(ne({},s),{chips:e.defaultValue})),s}handleAddChip(e,t){if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this._preventChipCreation=!0,t&&t.clearInputOnFail&&this.clearInput(),!1;this.clearInput();const s=this.props.value||this.state.chips;return e.trim().length?((this.props.allowDuplicates||!s.includes(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):this.updateChips([...this.state.chips,e])),!0):!1}handleDeleteChip(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{const s=this.state.chips.slice();if(s.splice(t,1)){let a=this.state.focusedChip;this.state.focusedChip===t?a=null:this.state.focusedChip>t&&(a=this.state.focusedChip-1),this.updateChips(s,{focusedChip:a})}}}updateChips(e,t={}){this.setState(ne({chips:e,chipsUpdated:!0},t)),this.props.onChange&&this.props.onChange(e)}clearInput(){this.updateInput("")}updateInput(e){this.setState({inputValue:e})}render(){const{alwaysShowPlaceholder:e,chipRenderer:t=qe,className:s,disabled:i,disableUnderline:a,error:u,FormHelperTextProps:p,fullWidth:V,fullWidthInput:K,helperText:G,id:q,InputProps:ce={},InputLabelProps:Ee={},inputValue:re,label:ye,placeholder:de,readOnly:Qe,required:Rt,rootRef:zt,value:mn,margin:_n}=this.props,st=this.state.variant;this.styleTheme!==this.props.theme.palette.mode&&(this.styleTheme=this.props.theme.palette.mode,this.styles=X.getStyle(this.props.theme,kt));let It=mn||this.state.chips||[];Array.isArray(It)||(It=(It||"").toString().split(/[,\s]+/).map(Gt=>Gt.trim()));const fn=re!=null?re:this.state.inputValue,In=(this.props.value||fn).length||fn.length,jt=typeof Ee.shrink=="boolean"?Ee.shrink:ye!==null&&(In||this.state.isFocused||It.length),kn=It.map((Gt,Yt)=>t({value:Gt,isDisabled:!!i,isReadOnly:Qe,isFocused:this.state.focusedChip===Yt,handleClick:()=>this.setState({focusedChip:Yt}),handleDelete:()=>this.handleDeleteChip(Gt,Yt),style:this.styles.chip},Yt.toString())),Kt={};st==="outlined"&&(Kt.notched=!!jt,Kt.labelWidth=jt&&this.labelNode&&this.labelNode.offsetWidth||0),st!=="standard"?Kt.startAdornment=kn:ce.disableUnderline=!0;const Ws=_e[st];return r().createElement(o.FormControl,{ref:zt,fullWidth:V,className:s,sx:ne(ne({},this.styles.root),_n==="dense"?this.styles.marginDense:{}),error:u,required:It.length>0?void 0:Rt,onClick:this.focus,disabled:i,variant:st,component:"div",margin:_n},ye&&r().createElement(o.InputLabel,ne({htmlFor:q,sx:{"&.MuiInputLabel-root":this.styles.label,"&.MuiInputLabel-shrink":this.styles.labelShrink},shrink:!!jt,focused:this.state.isFocused,variant:st,ref:this.labelRef,required:Rt,component:"label"},Ee),ye),r().createElement(o.Box,{component:"div",id:"input-chip-container",sx:ne(ne(ne(ne(ne(ne(ne({},this.styles[st]),this.styles.chipContainer),this.state.isFocused?this.styles.focused:void 0),!a&&st==="standard"?this.styles.underline:void 0),i?this.styles.disabled:void 0),ye?this.styles.labeled:void 0),u?this.styles.error:void 0)},st==="standard"&&kn,r().createElement(Ws,ne(ne({ref:this.input,className:`mui-variant-${this.styles[st]} ${ye?"mui-chip-with-label":"mui-chip-no-label"}`,sx:{"&.MuiInputBase-input":ne(ne({},this.styles.input),this.styles[st]),"&.MuiInputBase-root":ne({},this.styles.inputRoot)},id:q,value:fn,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:i,fullWidth:K,placeholder:!In&&(jt||ye===null||ye===void 0)||e?de:null,readOnly:Qe},ce),Kt))),G&&r().createElement(o.FormHelperText,Ne(ne({},p),{className:p==null?void 0:p.className,style:this.styles.helperText}),G))}}const et=bt,je={fullWidth:{width:"100%"}};class Le extends m{componentDidMount(){super.componentDidMount();const{data:n,attr:e}=this.props,t=m.getValue(n,e);if(this.props.schema.delimiter&&typeof t=="string"){const s=t.split(this.props.schema.delimiter).map(i=>i.trim()).filter(i=>i);this.setState({value:s})}else this.setState({value:t||[]})}renderItem(n,e){const{attr:t,schema:s}=this.props,{value:i}=this.state;return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},r().createElement(et,{value:i,disabled:!!e,label:this.getText(s.label),error:!!n,onAdd:a=>{const u=JSON.parse(JSON.stringify(i));u.push(a),this.setState({value:u},()=>{this.props.schema.delimiter?this.onChange(t,u.join(`${this.props.schema.delimiter} `)):this.onChange(t,u)})},theme:this.props.theme,onDelete:(a,u)=>{const p=JSON.parse(JSON.stringify(i));p.splice(u,1),this.setState({value:p},()=>{this.props.schema.delimiter?this.onChange(t,p.join(`${this.props.schema.delimiter} `)):this.onChange(t,p)})}}),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const wt=Le;var Dt=$(55385);class Xt extends m{renderColorDialog(){return!!this.state.showColorDialog&&r().createElement(o.Dialog,{onClose:()=>this.setState({showColorDialog:!1}),open:this.state.showColorDialog},r().createElement(Dt.ChromePicker,{color:this.state.colorDialogValue,onChange:n=>this.setState({colorDialogValue:n.hex},()=>this.onChange(this.props.attr,this.state.colorDialogValue))}))}renderItem(n,e){const t=m.getValue(this.props.data,this.props.attr);let s=l.Utils.isUseBright(t,null);return s===null&&(s=void 0),r().createElement(r().Fragment,null,this.renderColorDialog(),r().createElement(o.TextField,{variant:"standard",disabled:!!e,style:{minWidth:100,width:"calc(100% - 8px)"},label:this.getText(this.props.schema.label),value:t||"",onClick:()=>!this.props.schema.readOnly&&this.setState({showColorDialog:!0,colorDialogValue:t||""}),onChange:i=>{const a=i.target.value;this.onChange(this.props.attr,a)},inputProps:{style:{backgroundColor:t,color:s?"#FFF":"#000"},readOnly:this.props.schema.readOnly||!1},InputProps:{endAdornment:t&&!this.props.schema.noClearButton?r().createElement(o.IconButton,{size:"small",onClick:i=>{i.stopPropagation(),this.onChange(this.props.attr,"")}},r().createElement(c.Close,null)):void 0},InputLabelProps:{shrink:!0}}))}}const Bt=Xt,pe={width:{width:"calc(100% - 85px)"},width50:{width:120,marginRight:5}};class he extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.setState({value:n});const e={};this.props.schema.useSystemName&&(e.useSystem=!!m.getValue(this.props.data,this.props.schema.useSystemName)),this.props.schema.longitudeName&&this.props.schema.latitudeName?(e.longitude=m.getValue(this.props.data,this.props.schema.longitudeName),e.latitude=m.getValue(this.props.data,this.props.schema.latitudeName),!e.longitude&&!e.latitude&&this.props.schema.autoInit&&setTimeout(()=>this.getCoordinates(),300)):!m.getValue(this.props.data,this.props.attr)&&this.props.schema.autoInit&&setTimeout(()=>this.getCoordinates(),300),Object.keys(e).length&&setTimeout(()=>this.setState(e),50)}getSystemCoordinates(){return fe(this,null,function*(){const n=yield this.props.socket.getCompactSystemConfig();if(n!=null&&n.common&&(n.common.longitude||n.common.latitude))if(window.alert(l.I18n.t("ra_Used system settings")),this.props.schema.longitudeName&&this.props.schema.latitudeName)this.setState({longitude:n.common.longitude,latitude:n.common.latitude},()=>fe(this,null,function*(){yield this.onChange(this.props.schema.longitudeName,n.common.longitude),yield this.onChange(this.props.schema.latitudeName,n.common.latitude)}));else{const e=n.common.latitude+(this.props.schema.divider||",")+n.common.longitude;this.setState({value:e},()=>{this.onChange(this.props.attr,e)})}else window.alert(l.I18n.t("ra_Cannot determine position: System settings are empty and GPS detection is disabled in browser"))})}getCoordinates(){navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{if(n!=null&&n.coords)if(this.props.schema.longitudeName&&this.props.schema.latitudeName)this.setState({longitude:n.coords.longitude,latitude:n.coords.latitude},()=>fe(this,null,function*(){yield this.onChange(this.props.schema.longitudeName,n.coords.longitude||""),yield this.onChange(this.props.schema.latitudeName,n.coords.latitude||"")}));else{const e=n.coords.latitude+(this.props.schema.divider||",")+n.coords.longitude;this.setState({value:e},()=>{this.onChange(this.props.attr,e)})}else this.getSystemCoordinates()},n=>{console.error(`Cannot determine coordinates from browser: ${n}`),this.getSystemCoordinates()}):this.getSystemCoordinates()}renderItem(n,e){var t,s;return r().createElement(r().Fragment,null,this.props.schema.useSystemName?r().createElement(o.FormControlLabel,{control:r().createElement(o.Checkbox,{checked:!!this.state.useSystem,onChange:i=>{const a=i.target.checked;a&&this.getSystemCoordinates(),this.setState({useSystem:a},()=>this.onChange(this.props.schema.useSystemName,a))}}),label:l.I18n.t("ra_Use system settings for position")}):null,this.props.schema.longitudeName&&this.props.schema.latitudeName?r().createElement(o.TextField,{variant:"standard",style:pe.width50,value:(t=this.state.longitude)!=null?t:"",error:!!n,disabled:this.state.useSystem||!!e,onChange:i=>{const a=i.target.value;this.setState({longitude:a},()=>{this.onChange(this.props.schema.longitudeName,(a||"").trim())})},label:l.I18n.t("ra_Longitude")}):null,this.props.schema.longitudeName&&this.props.schema.latitudeName?r().createElement(o.TextField,{variant:"standard",style:pe.width50,value:(s=this.state.latitude)!=null?s:"",error:!!n,disabled:this.state.useSystem||!!e,onChange:i=>{const a=i.target.value;this.setState({latitude:a},()=>this.onChange(this.props.schema.latitudeName,(a||"").trim()))},label:l.I18n.t("ra_Latitude")}):null,!this.props.schema.longitudeName||!this.props.schema.latitudeName?r().createElement(o.TextField,{variant:"standard",style:pe.width,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!n,disabled:!!e,inputProps:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.state.useSystem},onChange:i=>{const a=i.target.value;this.setState({value:a},()=>this.onChange(this.props.attr,(a||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}):null,this.state.useSystem?null:r().createElement(o.Fab,{size:"small",onClick:()=>this.getCoordinates(),title:l.I18n.t("ra_Take browser position"),style:{marginRight:4}},r().createElement(c.LocationOn,null)),this.state.useSystem?null:r().createElement(o.Fab,{size:"small",onClick:()=>this.getSystemCoordinates(),title:l.I18n.t("ra_Take position from system settings")},r().createElement(c.GpsFixed,null)))}}const vt=he,Ze=(L,n,e)=>new Promise((t,s)=>{if(window[L])t(window[L]);else{const i=document.querySelector(`script[data-webpack="${L}"]`),a=()=>fe(this,null,function*(){if(window[L])window[L].__initialized||(yield window[L].init($.S[n]),window[L].__initialized=!0);else{console.error(`Cannot load ${L}`),s(new Error(`Cannot load ${L}`));return}t(window[L])});if(i)i.onload=a,i.onerror=s;else if(e){const u=document,p=u.createElement("script");p.type="text/javascript",p.setAttribute("data-webpack",`${L}`),p.async=!0,p.onerror=s,p.onload=a,p.src=e,u.getElementsByTagName("head")[0].appendChild(p)}else s(new Error(`Cannot Find Remote ${L} to inject`))}});function ve(L,n,e,t){return()=>fe(this,null,function*(){return(yield(yield Ze(L,n,t)).get(e))()})}const Pt=class Pt extends m{constructor(n){super(n),Object.assign(this.state,{Component:null,error:""})}componentDidMount(){return fe(this,null,function*(){if(!this.props.schema.url){console.error("URL is empty. Cannot load custom component!"),this.setState({error:"URL is empty. Cannot load custom component!"});return}let n;this.props.schema.url.startsWith("./")?n=`${window.location.protocol}//${window.location.host}${this.props.schema.url.replace(/^\./,"")}`:n=`${window.location.protocol}//${window.location.host}/adapter/${this.props.adapterName}/${this.props.schema.url}`;const[e,t,...s]=this.props.schema.name.split("/"),i=s.join("/");if(!n){console.error('Cannot find URL for custom component! Please define "url" as "custom/customComponents.js" in the schema');return}if(!e||!t||!i){console.error('Invalid format of "name"! Please define "name" as "ConfigCustomBackItUpSet/Components/AdapterExist" in the schema');return}let a=Pt.runningLoads[`${n}!${t}`];if(!a){let u;if(this.props.schema.i18n===!0){const p=n.lastIndexOf("/");let V;p!==-1?V=n.substring(0,p):V=n;const K=l.I18n.getLanguage(),G=`${V}/i18n/${K}.json`;u=fetch(G).then(q=>q.json()).then(q=>l.I18n.extendTranslations(q,K)).catch(q=>{if(K!=="en"){fetch(`${V}/i18n/en.json`).then(ce=>ce.json()).then(ce=>l.I18n.extendTranslations(ce,K)).catch(ce=>console.log(`Cannot load i18n "${G}": ${ce}`));return}console.log(`Cannot load i18n "${G}": ${q}`)})}else if(this.props.schema.i18n&&typeof this.props.schema.i18n=="object")try{l.I18n.extendTranslations(this.props.schema.i18n)}catch(p){console.error(`Cannot import i18n: ${p}`)}try{console.log(e,t,i),a=ve(e,"default",`./${t}`,n)(),u&&(a=Promise.all([a,u]).then(p=>p[0])),Pt.runningLoads[`${n}!${t}`]=a}catch(p){this.setState({error:`Cannot import from ${this.props.schema.url}: ${p}`})}}try{const u=(yield a).default;if(u!=null&&u[i])this.setState({Component:u[i]});else{const p=Object.keys(u||{});console.error("URL is empty. Cannot load custom component!"),this.setState({error:`Component ${this.props.schema.name} not found in ${this.props.schema.url}. Found: ${p.join(", ")}`})}}catch(u){this.setState({error:`Cannot import from ${this.props.schema.url}: ${u}`})}})}render(){const n=this.state.Component;if(!n){const e=this.props.schema||{},t=r().createElement(o.Grid,{item:!0,xs:e.xs||void 0,lg:e.lg||void 0,md:e.md||void 0,sm:e.sm||void 0,style:ne(ne({marginBottom:0,textAlign:"left"},e.style),this.props.themeType==="dark"?e.darkStyle:{})},this.state.error?r().createElement("div",null,this.state.error):r().createElement(o.LinearProgress,null));return e.newLine?r().createElement(r().Fragment,null,r().createElement("div",{style:{flexBasis:"100%",height:0}}),t):t}return r().createElement(n,ne({},this.props))}};te(Pt,"runningLoads",{});let xt=Pt;var Ke=$(28497);class H extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.setState({value:n})}renderItem(n,e){return r().createElement(Ke.DatePicker,{sx:t=>({width:"100%",borderBottom:`1px solid ${t.palette.text.primary}`,"& fieldset":{display:"none"},"& input":{padding:`${t.spacing(1.5)} 0 4px 0`},"& .MuiInputAdornment-root":{marginLeft:0,marginTop:1},"& label":{transform:"translate(0px, -9px) scale(0.75)"}}),format:this.props.systemConfig.dateFormat.toLowerCase().replace("mm","MM"),disabled:!!e,value:this.state.value,onChange:t=>{this.setState({value:t},()=>this.onChange(this.props.attr,this.state.value))},label:this.getText(this.props.schema.label)})}}class Mt extends m{renderItem(){if(!this.props.schema)return null;if(this.props.DeviceManager){const e=this.props.DeviceManager;return r().createElement(e,{uploadImagesToInstance:`${this.props.adapterName}.${this.props.instance}`,title:this.getText(this.props.schema.label),socket:this.props.socket,selectedInstance:`${this.props.adapterName}.${this.props.instance}`,themeName:this.props.themeName,themeType:this.props.themeType,isFloatComma:this.props.isFloatComma,dateFormat:this.props.dateFormat})}return r().createElement("div",null,"DeviceManager not found")}}const we=Mt;var rt=$(53683),Vt=$.n(rt),Qt=$(86215);const We={fullWidth:{width:"100%"},fullWidthOneButton:{width:"calc(100% - 42px)"},fullWidthTwoButtons:{width:"calc(100% - 84px)"},fullWidthThreeButtons:{width:"calc(100% - 126x)"},dropZone:{width:"100%",height:"100%",position:"absolute"},dropZoneEmpty:{},image:{objectFit:"contain",margin:"auto",display:"flex",width:"100%",height:"100%"},uploadDiv:{position:"relative",width:"100%"},uploadDivDragging:{opacity:1,background:"rgba(128,255,128,0.1)"},uploadCenterDiv:{margin:5,border:"3px dashed grey",borderRadius:5,width:"100%",height:"100%",position:"absolute",display:"flex"},uploadCenterIcon:{paddingTop:10,width:48,height:48},uploadCenterText:{fontSize:16},uploadCenterTextAndIcon:{textAlign:"center",position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},disabledOpacity:{opacity:.3,cursor:"default"},error:{border:"2px solid red"},deleteButton:{},selectedImage:{height:40,width:40,display:"inline-block",marginRight:8}},qt=["jpg","jpeg","svg","png","webp","gif","apng","avif","webp"],Ot=["mp3","ogg","wav","aac"],At=["avi","mp4","mov"],xe=["txt","log","html","htm"],it=["json","js","ts"];class Ft extends m{constructor(e){super(e);te(this,"dropzoneRef");te(this,"imagePrefix");te(this,"objectID");te(this,"path");this.dropzoneRef=r().createRef(),this.imagePrefix=this.props.imagePrefix===void 0?"./files":this.props.imagePrefix}componentDidMount(){super.componentDidMount(),this.objectID=(this.props.schema.objectID||"0_userdata.0").replace("%INSTANCE%",(this.props.instance||0).toString()),this.path=this.props.schema.upload,this.path&&(this.path==="/"?this.path="":this.path.endsWith("/")||(this.path=`${this.path}/`)),this.updateFiles().then(()=>{const e=m.getValue(this.props.data,this.props.attr);this.setState({value:e})})}updateFiles(){return this.readFiles(this.props.schema.pattern).then(e=>this.setState({files:e}))}readFolder(e,t,s){return fe(this,null,function*(){try{const i=yield this.props.socket.readDir(this.objectID,e.replace(/^\//,"")||null);for(let a=0;a<i.length;a++){const u=i[a];if(u.isDir)yield this.readFolder(`${e+u.file}/`,t,s);else{let p=!1;s==="*.*"&&u.file.includes(".")||!s||s==="*"||s===".*"&&u.file.startsWith(".")?p=!0:p=new RegExp(`^${s.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(u.file),p&&t.push({name:e+u.file,size:u.stats?l.Utils.formatBytes(u.stats.size):"--"})}}}catch(i){console.error(`Cannot read "${e}": ${i}`)}return t})}readFiles(e){return fe(this,null,function*(){const t=[];e=e||this.props.schema.pattern,e||(e="**/*.*");let s;const i=e.lastIndexOf("/");if(i===-1?s=e:s=e.substring(i+1),e.startsWith("**"))yield this.readFolder("/",t,s);else{const a=e.lastIndexOf("/");if(a===-1)yield this.readFolder("/",t,s);else{const u=e.substring(0,a+1);yield this.readFolder(u,t,s)}}return t})}onDrop(e){const t=e[0],s=new FileReader,i=this.props.schema.maxSize||2*1024*1024;s.onabort=()=>console.log("file reading was aborted"),s.onerror=()=>console.log("file reading has failed"),s.onload=()=>{let a=`image/${t.name.split(".").pop().toLowerCase()}`;if(a==="image/jpg"?a="image/jpeg":a.includes("svg")&&(a="image/svg+xml"),t.size>i){window.alert(l.I18n.t("File is too big. Max %sk allowed. Try use SVG.",Math.round(i/1024)));return}const u=`data:${a};base64,${btoa(new Uint8Array(s.result).reduce((p,V)=>p+String.fromCharCode(V),""))}`;this.props.socket.writeFile64(this.objectID,this.path+t.name,u).then(()=>this.updateFiles()).catch(p=>window.alert(`Cannot upload file: ${p}`))},s.readAsArrayBuffer(t)}renderDeleteDialog(){return this.state.deleteFile?r().createElement(l.Confirm,{title:l.I18n.t("ra_Are you sure?"),text:l.I18n.t("ra_File will be deleted"),ok:l.I18n.t("ra_Delete"),cancel:l.I18n.t("ra_Cancel"),onClose:e=>{const t=this.state.deleteFile;this.setState({deleteFile:""},()=>{e&&this.props.socket.deleteFile(this.objectID,t).then(()=>this.updateFiles()).catch(s=>window.alert(`Cannot delete file: ${s}`))})}}):null}static base64ToArrayBuffer(e){const t=window.atob(e),s=t.length,i=new Uint8Array(s);for(let a=0;a<s;a++)i[a]=t.charCodeAt(a);return i.buffer}loadFile(){return this.props.socket.readFile(this.objectID,this.state.value,!0)}play(){this.loadFile().then(e=>{if(typeof AudioContext!="undefined"){const t=new AudioContext,s=Ft.base64ToArrayBuffer(e.file);t.decodeAudioData(s,i=>{const a=t.createBufferSource();a.buffer=i,a.connect(t.destination),a.start(0)},i=>window.alert(`Cannot play: ${i}`))}})}getFileIcon(e){return e!=null&&e.extension?qt.includes(e.extension)?r().createElement("div",{style:Ne(ne({},We.selectedImage),{backgroundImage:`url(${this.imagePrefix}/${this.objectID}/${e.value})`,backgroundSize:"contain",backgroundRepeat:"no-repeat"})}):Ot.includes(e.extension)?r().createElement(c.MusicNote,null):xe.includes(e.extension)?r().createElement(c.Article,null):At.includes(e.extension)?r().createElement(c.Videocam,null):it.includes(e.extension)?r().createElement(c.Code,null):null:null}renderItem(e,t){if(!this.state.files)return null;const s=[];this.props.schema.withFolder||this.state.files.forEach(G=>{const q=G.name.lastIndexOf("/");if(q===-1)s.includes("/")||s.push("/");else{const ce=G.name.substring(0,q+1);s.includes(ce)||s.push(ce)}});const i=this.state.files.map(G=>({value:G.name,label:!this.props.schema.withFolder&&s.length===1?`${G.name.substring(s[0].length)}`:`${G.name}${this.props.schema.noSize?"":`(${G.size})`}`,extension:G.name.toLowerCase().split(".").pop()}));this.props.schema.noNone||i.unshift({label:l.I18n.t("ra_none"),value:""});const a=i.find(G=>G.value===this.state.value);let u=0;this.props.schema.upload&&u++,this.props.schema.refresh&&u++;const p=this.state.value&&(this.state.value.endsWith(".mp3")||this.state.value.endsWith(".ogg")||this.state.value.endsWith(".wav"));p&&u++;const V=r().createElement("div",{style:We.fullWidth},r().createElement(o.FormControl,{variant:"standard",style:{width:`calc(100% - ${u*42}px)`}},this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!e,disabled:!!t,value:this.state.value||"_",renderValue:()=>r().createElement(r().Fragment,null,this.getFileIcon(a),r().createElement("span",null,(a==null?void 0:a.label)||"")),onChange:G=>{this.setState({value:G.target.value==="_"?"":G.target.value},()=>this.onChange(this.props.attr,this.state.value))}},i.map(G=>r().createElement(o.MenuItem,{key:G.value,value:G.value},r().createElement(o.ListItemIcon,null,this.getFileIcon(G)),r().createElement(o.ListItemText,null,G.label),this.props.schema.delete&&a.value?r().createElement(o.IconButton,{style:We.deleteButton,size:"small",onClick:()=>this.setState({deleteFile:a.value})},r().createElement(c.Delete,null)):null))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null),this.props.schema.refresh&&r().createElement(o.IconButton,{onClick:()=>this.updateFiles()},r().createElement(c.Refresh,null)),this.props.schema.upload&&r().createElement(o.IconButton,{onClick:()=>{var G;return(G=this.dropzoneRef.current)==null?void 0:G.open()}},r().createElement(c.UploadFile,null)),p&&r().createElement(o.IconButton,{style:{color:"#00FF00"},onClick:()=>this.play()},r().createElement(c.PlayArrow,null)));if(!this.props.schema.upload)return r().createElement(r().Fragment,null,V,this.renderDeleteDialog());let K={"*/*":[]};if(this.props.schema.fileTypes==="image"?K={"image/*":[".png",".jpg",".svg",".gif",".apng",".avif",".webp"]}:this.props.schema.fileTypes==="audio"?K={"audio/*":[".mp3",".ogg",".wav",".mp4"]}:this.props.schema.fileTypes==="text"&&(K={"text/plain":[".txt"]}),this.props.schema.pattern){const G=this.props.schema.pattern.split("/").pop().toLowerCase().replace(/.*\./,"");G==="png"||G==="jpg"||G==="svg"||G==="gif"||G==="apng"||G==="avif"||G==="webp"?K={"image/*":[".png",".jpg",".svg",".gif",".apng",".avif",".webp"]}:G==="mp3"||G==="ogg"||G==="wav"?K={"audio/*":[".mp3",".ogg",".wav",".mp4"]}:G==="ics"?K={"text/calendar":[".ics"]}:G==="txt"?K={"text/plain":[".txt"]}:G==="pem"?K={"text/plain":[".pem"]}:K={"*/*":[`.${G}`]}}return r().createElement(Vt(),{ref:this.dropzoneRef,multiple:!1,accept:K,noKeyboard:!0,noClick:!0,maxSize:this.props.schema.maxSize||2*1024*1024,onDragEnter:()=>{this.setState({uploadFile:"dragging"})},onDragLeave:()=>this.setState({uploadFile:!0}),onDrop:(G,q)=>{this.setState({uploadFile:!1}),G.length?this.onDrop(G):window.alert(q&&q[0]&&q[0].errors&&q[0].errors[0]&&q[0].errors[0].message||l.I18n.t("Cannot upload"))}},({getRootProps:G,getInputProps:q})=>r().createElement("div",ne({style:ne(ne(ne({},We.uploadDiv),this.state.uploadFile==="dragging"?We.uploadDivDragging:void 0),t?We.disabledOpacity:void 0)},G()),r().createElement("input",ne({},q())),this.state.uploadFile==="dragging"?r().createElement("div",{style:ne(ne({},We.uploadCenterDiv),this.state.uploadError?We.error:void 0)},r().createElement("div",{style:We.uploadCenterTextAndIcon},r().createElement(Qt.l1U,{style:We.uploadCenterIcon}),r().createElement("div",{style:We.uploadCenterText},this.state.uploadFile==="dragging"?l.I18n.t("ra_Drop file here"):l.I18n.t("ra_Place your files here or click here to open the browse dialog")))):null,V,this.renderDeleteDialog()))}}const Ut=Ft,Ct={fullWidth:{width:"100%"},fullWidthOneButton:{width:"calc(100% - 69px)",marginRight:4},fullWidthIcon:{width:"calc(100% - 119px)",marginRight:4},selectedImage:{height:40,width:40,display:"inline-block",marginRight:8}},St=["jpg","jpeg","svg","png","webp","gif","apng","avif","webp"],Zt=["mp3","ogg","wav","aac"],en=["avi","mp4","mov"],tn=["txt","log","html","htm"],nn=["json","js","ts"];class T extends m{constructor(){super(...arguments);te(this,"imagePrefix","../..")}componentDidMount(){super.componentDidMount();const e=m.getValue(this.props.data,this.props.attr);this.imagePrefix=this.props.imagePrefix===void 0?"./files":this.props.imagePrefix,this.setState({value:e!=null?e:""})}static getDerivedStateFromProps(e,t){const s=m.getValue(e.data,e.attr);return s==null||s.toString().trim()!==(t.value||"").toString().trim()?{value:s!=null?s:""}:null}loadFile(){const e=this.state.value.indexOf("/");if(e!==-1){const t=this.state.value.substring(0,e),s=this.state.value.substring(e+1);return this.props.socket.readFile(t,s,!0)}return Promise.resolve(null)}play(){this.loadFile().then(e=>{if(typeof AudioContext!="undefined"&&(e!=null&&e.file)){const t=new AudioContext,s=Ut.base64ToArrayBuffer(e.file);t.decodeAudioData(s,i=>{const a=t.createBufferSource();a.buffer=i,a.connect(t.destination),a.start(0)},i=>window.alert(`Cannot play: ${i}`))}})}getIcon(){const e=this.state.value.split(".").pop().toLowerCase();return St.includes(e)?r().createElement("div",{style:Ne(ne({},Ct.selectedImage),{backgroundImage:`url(${this.imagePrefix}/${this.state.value})`,backgroundSize:"contain",backgroundRepeat:"no-repeat"})}):Zt.includes(e)?r().createElement(o.IconButton,{style:{color:"#00FF00"},onClick:()=>this.play()},r().createElement(c.PlayArrow,null)):tn.includes(e)?r().createElement(c.Article,null):en.includes(e)?r().createElement(c.Videocam,null):nn.includes(e)?r().createElement(c.Code,null):null}renderFileBrowser(){return this.state.showFileBrowser?r().createElement(l.SelectFile,{imagePrefix:this.props.imagePrefix,socket:this.props.socket,selected:this.state.value,onClose:()=>this.setState({showFileBrowser:!1}),onOk:e=>{const t=Array.isArray(e)?e[0]:e;this.setState({value:t},()=>this.onChange(this.props.attr,this.props.schema.trim===!1?t:(t||"").trim()))},selectOnlyFolders:this.props.schema.selectOnlyFolders,allowUpload:this.props.schema.allowUpload,allowDownload:this.props.schema.allowDownload,allowCreateFolder:this.props.schema.allowCreateFolder,allowView:this.props.schema.allowView,showToolbar:this.props.schema.showToolbar,limitPath:this.props.schema.limitPath,theme:this.props.theme}):null}renderItem(e,t){const s=this.getIcon();return r().createElement("div",{style:Ct.fullWidth},s,r().createElement(o.TextField,{variant:"standard",style:s?Ct.fullWidthIcon:Ct.fullWidthOneButton,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!e,disabled:!!t,inputProps:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:!!this.props.schema.disableEdit},onChange:i=>{const a=i.target.value;this.setState({value:a},()=>this.onChange(this.props.attr,this.props.schema.trim===!1?a:(a||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}),r().createElement(o.Button,{variant:"outlined",onClick:()=>this.setState({showFileBrowser:!0})},"..."),this.renderFileBrowser())}}const U=T;class ie extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.props.socket.getEnums("functions").then(e=>{const t=Object.keys(e).map(s=>({value:this.props.schema.short?s.replace("enum.functions.",""):s,label:this.getText(e[s].common.name),obj:e[s]}));this.props.schema.allowDeactivate!==!1&&t.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),this.setState({value:n,selectOptions:t})})}renderItem(n,e){if(!this.state.selectOptions)return null;const t=this.state.selectOptions.find(s=>s.value===this.state.value);return r().createElement(o.FormControl,{variant:"standard",fullWidth:!0},this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!n,disabled:!!e,value:this.state.value||"_",renderValue:()=>t?t.obj?r().createElement(l.TextWithIcon,{value:t.obj,themeType:this.props.themeType,lang:l.I18n.getLanguage()}):t.label:"",onChange:s=>{this.setState({value:s.target.value==="_"?"":s.target.value},()=>this.onChange(this.props.attr,this.state.value))}},this.state.selectOptions.map(s=>r().createElement(o.MenuItem,{key:s.value,value:s.value,style:s.value===m.DIFFERENT_VALUE?{opacity:.5}:{}},s.obj?r().createElement(l.TextWithIcon,{value:s.obj,themeType:this.props.themeType,lang:l.I18n.getLanguage()}):s.label))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const se=ie;class le extends m{componentDidMount(){super.componentDidMount(),this.props.socket.getHostByIp(this.props.common.host).then(n=>{this.props.schema.listenOnAllPorts||(n=n.filter(e=>e.address!=="0.0.0.0"&&e.address!=="::")),this.props.schema.onlyIp4?n=n.filter(e=>e.family==="ipv4"):this.props.schema.onlyIp6&&(n=n.filter(e=>e.family==="ipv6")),this.props.schema.noInternal&&(n=n.filter(e=>!e.internal)),n.forEach(e=>{e.address==="0.0.0.0"?e.name=`[IPv4] 0.0.0.0 - ${l.I18n.t("ra_Listen on all IPs")}`:e.address==="::"&&(e.name=`[IPv6] :: - ${l.I18n.t("ra_Listen on all IPs")}`)}),this.setState({ips:n})})}renderItem(n,e){var i,a;const t=m.getValue(this.props.data,this.props.attr),s=(i=this.state.ips)==null?void 0:i.find(u=>u.address===t);return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},this.state.ips&&this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,this.state.ips?r().createElement(o.Select,{variant:"standard",error:!!n,disabled:!!e,value:t,renderValue:u=>(s==null?void 0:s.name)||u,onChange:u=>this.onChange(this.props.attr,u.target.value)},(a=this.state.ips)==null?void 0:a.map((u,p)=>r().createElement(o.MenuItem,{key:p,value:u.address},u.name))):r().createElement(o.TextField,{fullWidth:!0,variant:"standard",error:!!n,disabled:!!e,value:t,onChange:u=>this.onChange(this.props.attr,u.target.value),label:this.getText(this.props.schema.label)}),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const De=le;class Ce extends m{constructor(){super(...arguments);te(this,"initialized",!1);te(this,"_context")}componentDidMount(){super.componentDidMount(),this.askInstance()}askInstance(){if(this.props.alive){let e=this.props.schema.data;if(e===void 0&&this.props.schema.jsonData){const t=this.getPattern(this.props.schema.jsonData);if(t)try{e=JSON.parse(t)}catch(s){console.error(`Cannot parse json data: ${e}`)}}e===void 0&&(e=null),this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,this.props.schema.command||"send",e).then(t=>this.setState({image:t||""}))}}getContext(){const e={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(t=>e[t]=m.getValue(this.props.data,t)),JSON.stringify(e)}renderItem(){if(this.props.alive){const e=this.getContext();(e!==this._context||!this.initialized)&&(this._context=e,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}return this.state.image===void 0?null:r().createElement("img",{alt:"dynamic content",src:this.state.image,style:{width:this.props.schema.width||"100%",height:this.props.schema.height}})}}const Me=Ce;class Ie extends m{constructor(e){super(e);te(this,"index");this.index=Date.now()}componentDidMount(){return fe(this,null,function*(){if(Ue(Ie.prototype,this,"componentDidMount").call(this),this.props.schema.base64){const e=m.getValue(this.props.data,this.props.attr);this.setState({value:e})}else this.props.socket.fileExists(`${this.props.adapterName}.${this.props.instance}`,this.props.attr).then(e=>e&&this.loadImage())})}_getUrl(e){e&&(this.index=Date.now());let t=`files/${this.props.adapterName}.${this.props.instance}/${this.props.attr}?t=${this.index}`;return window.location.port==="3000"&&(t=`${window.location.protocol}//${window.location.hostname}:8081/${t}`),t}loadImage(){fetch(this._getUrl()).then(e=>e.blob()).then(e=>{const t=new FileReader;t.onload=()=>{this.setState({value:t.result})},t.readAsDataURL(e)}).catch(e=>console.error(e))}renderItem(e,t){return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},this.props.schema.label?r().createElement(o.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,r().createElement(l.UploadImage,{error:!!e,disabled:t,accept:this.props.schema.accept,crop:this.props.schema.crop,maxSize:this.props.schema.maxSize||256*1024,icon:this.state.value||void 0,removeIconFunc:()=>this.setState({value:null},()=>{this.props.schema.base64?this.onChange(this.props.attr,this.state.value):this.props.socket.deleteFile(`${this.props.adapterName}.${this.props.instance}`,this.props.attr)}),onChange:s=>this.setState({value:s},()=>{this.props.schema.base64?this.onChange(this.props.attr,this.state.value):s.startsWith("data")&&(s=s.split(",")[1]),this.props.socket.writeFile64(`${this.props.adapterName}.${this.props.instance}`,this.props.attr,s)})}),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const ot=Ie,at={icon:{width:20,height:20,marginRight:4}};class Je extends m{constructor(){super(...arguments);te(this,"onInstancesUpdate",(e,t)=>{if(!e.match(/^system\.adapter\.[-_a-z\d]+\.\d+$/))return;const s=this.props.schema.long?e:this.props.schema.short?e.split(".").pop():e.replace(/^system\.adapter\./,""),i=this.state.selectOptions.findIndex(a=>a.value===s);if(t){if(this.props.schema.adapter==="_dataSources"&&(!t.common||!t.common.getHistory))return;if(i===-1){const a=JSON.parse(JSON.stringify(this.state.selectOptions));a.push({value:this.props.schema.long?t._id:this.props.schema.short?t._id.split(".").pop():t._id.replace(/^system\.adapter\./,""),label:`${t.common.name} [${t._id.replace(/^system\.adapter\./,"")}]`,icon:`adapter/${t.common.name}/${t.common.icon}`}),a.sort((u,p)=>u.label>p.label?1:u.label<p.label?-1:0),this.setState({selectOptions:a})}}else if(i!==-1){const a=JSON.parse(JSON.stringify(this.state.selectOptions)),u={};this.state.value===a[i].value&&(u.value=m.NONE_VALUE),a.splice(i,1),u.selectOptions=a,this.setState(u)}})}componentDidMount(){return fe(this,null,function*(){Ue(Je.prototype,this,"componentDidMount").call(this);const e=m.getValue(this.props.data,this.props.attr);let t=this.props.schema.adapter;t==="_dataSources"&&(t=void 0),this.props.socket.getAdapterInstances(t,!0).then(s=>fe(this,null,function*(){this.props.schema.adapter==="_dataSources"?s=s.filter(a=>{var u;return(u=a==null?void 0:a.common)==null?void 0:u.getHistory}):this.props.schema.adapter?s=s.filter(a=>a==null?void 0:a._id.startsWith(`system.adapter.${this.props.schema.adapter}.`)):this.props.schema.adapters&&Array.isArray(this.props.schema.adapters)&&(s=s.filter(a=>{var u;return this.props.schema.adapters.includes((u=a==null?void 0:a.common)==null?void 0:u.name)})),this.props.schema.onlyEnabled&&(s=s.filter(a=>{var u;return(u=a==null?void 0:a.common)==null?void 0:u.enabled}));const i=s.map(a=>({value:this.props.schema.long?a._id:this.props.schema.short?a._id.split(".").pop():a._id.replace(/^system\.adapter\./,""),label:`${a.common.name} [${a._id.replace(/^system\.adapter\./,"")}]`,icon:`adapter/${a.common.name}/${a.common.icon}`}));i.sort((a,u)=>a.value>u.value?1:a.value<u.value?-1:0),this.props.schema.allowDeactivate!==!1&&i.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),this.props.schema.all&&i.unshift({label:l.I18n.t("sch_all"),value:"*"}),this.setState({value:e||"",selectOptions:i}),yield this.props.socket.subscribeObject(`system.adapter.${t?`${t}.`:""}*`,this.onInstancesUpdate)}))})}componentWillUnmount(){this.props.socket.unsubscribeObject("system.adapter.*",this.onInstancesUpdate).then(()=>{}),super.componentWillUnmount()}renderItem(e,t){var i;if(!this.state.selectOptions)return null;const s=(i=this.state.selectOptions)==null?void 0:i.find(a=>a.value===this.state.value);return r().createElement(o.FormControl,{fullWidth:!0,key:this.props.attr,variant:"standard"},this.props.schema.label?r().createElement(o.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!e,displayEmpty:!0,disabled:!!t,value:this.state.value,renderValue:()=>r().createElement("span",{style:{display:"flex"}},s!=null&&s.icon?r().createElement("img",{src:`./${s.icon}`,alt:s.value,style:at.icon}):null,this.getText(s==null?void 0:s.label,!0)),onChange:a=>this.setState({value:a.target.value},()=>this.onChange(this.props.attr,this.state.value))},this.state.selectOptions.map(a=>r().createElement(o.MenuItem,{key:a.value,value:a.value,style:a.value===m.NONE_VALUE?{opacity:.5}:{}},a.icon?r().createElement("img",{src:`./${a.icon}`,alt:a.value,style:at.icon}):null,this.getText(a.label,!0)))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Ge=Je,$e={address:{fontSize:"smaller",opacity:.5,marginLeft:8}};class ht extends m{componentDidMount(){super.componentDidMount(),this.props.socket.getObject(`system.host.${this.props.common.host}`).then(n=>{var t,s;const e=[];if((s=(t=n==null?void 0:n.native)==null?void 0:t.hardware)!=null&&s.networkInterfaces){const i=n.native.hardware.networkInterfaces;Object.keys(i).forEach(a=>{if(this.props.schema.ignoreInternal&&!i[a].find(p=>!p.internal)||this.props.schema.ignoreLoopback&&i[a].find(p=>p.address==="127.0.0.1"||p.address==="::1"))return;let u=i[a].find(p=>p.family==="IPv4");u=u||i[a].find(p=>p.family==="IPv6"),e.push({value:a,address:u.address})})}this.setState({interfaces:e})}).catch(n=>window.alert(`Cannot read interfaces: ${n}`))}renderItem(n,e){var i,a,u;const t=m.getValue(this.props.data,this.props.attr),s=(i=this.state.interfaces)==null?void 0:i.find(p=>p.value===t);return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},(a=this.state.interfaces)!=null&&a.length&&this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,(u=this.state.interfaces)!=null&&u.length?r().createElement(o.Select,{variant:"standard",error:!!n,disabled:!!e,value:t,renderValue:p=>s?r().createElement("span",null,s.value,r().createElement("span",{style:$e.address},s.address)):p,onChange:p=>this.onChange(this.props.attr,p.target.value)},this.state.interfaces.map((p,V)=>r().createElement(o.MenuItem,{key:V,value:p.value},r().createElement("span",null,p.value,r().createElement("span",{style:$e.address},p.address))))):r().createElement(o.TextField,{fullWidth:!0,variant:"standard",error:!!n,disabled:!!e,value:t,onChange:p=>this.onChange(this.props.attr,p.target.value),label:this.getText(this.props.schema.label)}),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Tt=ht,pt={modalDialog:{minWidth:400,maxWidth:800},overflowHidden:{display:"flex",overflow:"hidden"},titleIcon:{marginRight:5},content:{fontSize:16},languageButton:{position:"absolute",right:8,top:8},languageButtonActive:{color:"primary.main"}},sn=({toggleTranslation:L,noTranslation:n,title:e,fullWidth:t,help:s,maxWidth:i,progress:a,icon:u,applyDisabled:p,applyButton:V,onClose:K,children:G,titleButtonApply:q,titleButtonClose:ce,onApply:Ee,textInput:re,defaultValue:ye,overflowHidden:de})=>{const[Qe,Rt]=(0,b.useState)(ye);(0,b.useEffect)(()=>{Rt(ye)},[ye]);let zt=null;return u&&(zt=u),r().createElement(o.Dialog,{open:!0,maxWidth:i||"md",fullWidth:!!t,disableEscapeKeyDown:!1,onClose:K,sx:{"& .MuiPaper-root":pt.modalDialog}},e&&r().createElement(o.DialogTitle,null,u?r().createElement(zt,{style:pt.titleIcon}):null,e,l.I18n.getLanguage()!=="en"&&L?r().createElement(o.IconButton,{size:"large",style:ne(ne({},pt.languageButton),n?pt.languageButtonActive:{}),onClick:()=>L(),title:l.I18n.t("Disable/Enable translation")},r().createElement(c.Language,null)):null),r().createElement(o.DialogContent,{sx:ne(ne({},de?pt.overflowHidden:{}),pt.content),style:{paddingTop:8}},re&&r().createElement(o.TextField,{autoComplete:"off",fullWidth:!0,autoFocus:!0,variant:"outlined",size:"medium",multiline:!0,value:Qe,onChange:mn=>Rt(mn.target.value)}),G,s?r().createElement("div",null,s):null),r().createElement(o.DialogActions,null,V!==!1&&r().createElement(o.Button,{startIcon:r().createElement(c.Check,null),disabled:a||p&&ye===Qe,onClick:()=>Ee&&Ee(re?Qe:""),variant:"contained",color:"primary"},l.I18n.t(q||"Ok")),r().createElement(o.Button,{color:"grey",onClick:()=>K&&K(),disabled:a,variant:"contained",startIcon:r().createElement(c.Close,null)},l.I18n.t(ce||"Cancel"))))};var be=$(58093),Pe=$.n(be),me=$(97726),Re=$(51197),Ye=$(9285),Ve=$(44210),dt=$(82292);const Xe={jsonError:{border:"1px solid red",minHeight:200},jsonNoError:{border:"1px solid #00000000",minHeight:200}};function tt(L){return r().createElement(Pe(),{style:L.error===!0?Xe.jsonError:L.error===!1?Xe.jsonNoError:void 0,mode:L.mode||"json",width:"100%",height:"100%",showPrintMargin:L.editValueMode,showGutter:L.editValueMode,highlightActiveLine:L.editValueMode,defaultValue:L.defaultValue,theme:L.themeType==="dark"?"clouds_midnight":"chrome",value:L.value,readOnly:!L.onChange,onChange:n=>L.onChange(n),name:L.name||"UNIQUE_ID_OF_DIV1",fontSize:L.fontSize||14,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:L.editValueMode,tabSize:L.editValueMode?2:void 0},editorProps:{$blockScrolling:!0}})}const lt=tt,mt={fullWidth:{width:"100%"},flex:{display:"flex"},button:{height:48,minWidth:48},wrapper:{width:"calc(100vw - 40px)",height:"calc(100vh - 188px)"}};class Lt extends m{componentDidMount(){return fe(this,null,function*(){Ue(Lt.prototype,this,"componentDidMount").call(this);const{data:n,attr:e}=this.props,t=m.getValue(n,e)||{};this.setState({value:t,initialized:!0})})}renderItem(){if(!this.state.initialized)return null;const{schema:n,data:e,attr:t}=this.props,{value:s,showSelectId:i}=this.state;return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},r().createElement("div",{style:mt.flex},r().createElement(o.Button,{color:"grey",style:mt.button,size:"small",variant:"outlined",onClick:()=>this.setState({showSelectId:!0})},l.I18n.t("ra_JSON editor"))),i?r().createElement(sn,{title:this.getText(n.label),overflowHidden:!0,onClose:()=>this.setState({showSelectId:!1,value:m.getValue(e,t)||{}}),onApply:()=>this.setState({showSelectId:!1},()=>this.onChange(t,s))},r().createElement("div",{style:mt.wrapper},r().createElement(lt,{value:typeof s=="object"?JSON.stringify(s):s,onChange:a=>this.setState({value:a}),name:"ConfigJsonEditor",themeType:this.props.themeType}))):null,n.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const On=Lt,Ln=[{value:"en",label:"English"},{value:"de",label:"Deutsch"},{value:"ru",label:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439"},{value:"pt",label:"Portugues"},{value:"nl",label:"Nederlands"},{value:"fr",label:"fran\xE7ais"},{value:"it",label:"Italiano"},{value:"es",label:"Espanol"},{value:"pl",label:"Polski"},{value:"uk",label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0438\u0439"},{value:"zh-ch",label:"\u7B80\u4F53\u4E2D\u6587"}];class Nn extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr),e=[...Ln];this.props.schema.system?e.unshift({value:"",label:l.I18n.t("ra_System language")}):e.unshift({value:"",label:l.I18n.t("ra_none")}),this.setState({value:this.props.schema.system?n||"":n||l.I18n.getLanguage(),selectOptions:e})}renderItem(n,e){var s,i;if(!this.state.selectOptions)return null;const t=(s=this.state.selectOptions)==null?void 0:s.find(a=>a.value===this.state.value||!a.value&&!this.state.value);return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!n,disabled:e,value:this.state.value||"_",renderValue:()=>this.getText(t==null?void 0:t.label,this.props.schema.noTranslation),onChange:a=>{let{value:u}=a.target;u==="_"&&(u=""),this.setState({value:u},()=>{if(this.onChange(this.props.attr,u),this.props.schema.changeGuiLanguage)if(u){if(u===l.I18n.getLanguage())return;l.I18n.setLanguage(u),this.props.changeLanguage&&this.props.changeLanguage()}else this.props.socket.getSystemConfig().then(p=>{p.common.language!==l.I18n.getLanguage()&&p.common.language&&(l.I18n.setLanguage(p.common.language),this.props.changeLanguage&&this.props.changeLanguage())})})}},(i=this.state.selectOptions)==null?void 0:i.map(a=>r().createElement(o.MenuItem,{key:a.value,value:a.value},a.label))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const $n=Nn;class Pn extends m{constructor(e){super(e);te(this,"scrollRef");this.scrollRef=r().createRef()}scrolledDown(){return this.scrollRef.current?this.scrollRef.current.offsetHeight+this.scrollRef.current.scrollTop>=this.scrollRef.current.scrollHeight:!1}componentDidMount(){super.componentDidMount(),m.getValue(this.props.data,this.props.attr)||(this.props.schema.licenseUrl?(this.setState({showLicenseDialog:!0,loading:!0,scrolledDown:!1}),fetch(this.props.schema.licenseUrl).then(e=>e.text()).then(e=>this.setState({license:e,loading:!1})).catch(e=>this.setState({license:e.toString(),loading:!1,error:!0,scrolledDown:!1}))):this.setState({showLicenseDialog:!0,scrolledDown:!1}),setTimeout(()=>{this.scrollRef.current&&(this.scrolledDown()?this.setState({scrolledDown:!0}):this.scrollRef.current.addEventListener("scroll",()=>{!this.state.scrolledDown&&this.scrolledDown()&&this.setState({scrolledDown:!0})}))},1e3))}renderItem(){return this.state.showLicenseDialog?r().createElement(o.Dialog,{maxWidth:"lg",open:!0,onClose:(e,t)=>{t!=="escapeKeyDown"&&t!=="backdropClick"&&this.setState({showLicenseDialog:!1})}},r().createElement(o.DialogTitle,null,this.props.schema.title?l.I18n.t(this.props.schema.title):l.I18n.t("ra_License agreement")),r().createElement(o.DialogContent,null,this.props.schema.licenseUrl?r().createElement(r().Fragment,null,this.state.loading?r().createElement(o.LinearProgress,null):null,r().createElement("pre",{ref:this.scrollRef,style:{width:"100%",height:"100%",overflowY:"auto",fontSize:14}},this.state.license)):null,!this.props.schema.licenseUrl&&this.props.schema.texts?r().createElement("div",{ref:this.scrollRef,style:{width:"100%",height:"100%",overflowY:"auto",fontSize:14}},this.props.schema.texts.map(e=>this.props.schema.noTranslation?r().createElement("p",null,e):r().createElement("p",null,l.I18n.t(e)))):null),r().createElement(o.DialogActions,null,this.props.schema.checkBox?r().createElement(o.FormControlLabel,{control:r().createElement(o.Checkbox,{checked:!!this.state.licenseChecked,onClick:()=>this.setState({licenseChecked:!this.state.licenseChecked})}),label:l.I18n.t(this.props.schema.checkBox)}):null,r().createElement(o.Button,{disabled:this.state.loading||this.state.error||this.props.schema.checkBox&&!this.state.licenseChecked||!this.state.scrolledDown,onClick:()=>{this.setState({showLicenseDialog:!1}),this.onChange(this.props.attr,!0)},color:"primary",variant:"contained",startIcon:r().createElement(c.Check,null)},this.props.schema.agreeText?l.I18n.t(this.props.schema.agreeText):l.I18n.t("ra_Accept license")),r().createElement(o.Button,{onClick:()=>{this.setState({showLicenseDialog:!1}),setTimeout(()=>this.setState({showLicenseDialog:!0}),2e3)},color:"grey",variant:"contained",startIcon:r().createElement(c.Close,null)},l.I18n.t("ra_Close")))):null}}const Rn=Pn,vn={indeterminate:{opacity:.5},control:{flexDirection:"row",width:"100%"}};class Mn extends m{constructor(){super(...arguments);te(this,"updateTimeout")}componentDidMount(){super.componentDidMount();let e=m.getValue(this.props.data,this.props.attr);if(e==null&&(e=""),Array.isArray(e)&&this.props.multiEdit){e=m.DIFFERENT_VALUE,this.setState({_value:e,oldValue:e});return}this.setState({_value:e.toString(),oldValue:e.toString()})}static getDerivedStateFromProps(e,t){if(e.schema.min!==void 0&&e.schema.min<0||e.schema.max!==void 0&&e.schema.max<0)return null;const s=m.getValue(e.data,e.attr);return e.multiEdit&&t._value===m.DIFFERENT_VALUE?m.DIFFERENT_VALUE:s==null||t.oldValue===null||t.oldValue===void 0||s.toString()!==parseFloat(t._value).toString()&&s.toString()!==t.oldValue.toString()?{_value:s}:null}checkValue(e){if(e==null)return null;e=e.toString().trim();const t=e===""?0:parseFloat(e);return e!==""&&Number.isNaN(t)?"ra_Not a number":e!==""&&window.isFinite(t)?this.props.schema.min!==void 0&&t<this.props.schema.min?"ra_Too small":this.props.schema.max!==void 0&&t>this.props.schema.max?"ra_Too big":e===""||e==="-"||Number.isNaN(t)?"ra_Not a number":null:"ra_Not a number"}renderItem(e,t){const s=Array.isArray(this.state._value)||this.state._value===m.DIFFERENT_VALUE;if(this.state.oldValue!==null&&this.state.oldValue!==void 0?(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.updateTimeout=void 0,this.setState({oldValue:null})},30)):this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=void 0),s){const i=m.getValue(this.props.data,this.props.attr),a=(i==null?void 0:i.filter(u=>u||u===0).map(u=>({label:u.toString(),value:u})))||[];return a.unshift({label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE}),r().createElement(o.Autocomplete,{style:vn.indeterminate,fullWidth:!0,freeSolo:!0,value:a[0],getOptionSelected:(u,p)=>u.label===p.label,onChange:(u,p)=>{this.onChange(this.props.attr,p==null?void 0:p.value,()=>{this.setState({_value:p==null?void 0:p.value,oldValue:this.state._value})})},options:a,getOptionLabel:u=>u.label,renderInput:u=>r().createElement(o.TextField,Ne(ne({},u),{label:this.getText(this.props.schema.label),variant:"standard",inputProps:Ne(ne({},u.inputProps),{readOnly:this.props.schema.readOnly||!1}),error:!!e,placeholder:this.getText(this.props.schema.placeholder),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:!!t}))})}return!e&&this.state._value!==null&&this.state._value!==void 0&&this.state._value&&(e=this.checkValue(this.state._value),e&&(e=l.I18n.t(e))),r().createElement(o.FormControl,{variant:"standard",style:vn.control},r().createElement(o.TextField,{variant:"standard",type:"number",fullWidth:!0,inputProps:{min:this.props.schema.min,max:this.props.schema.max,step:this.props.schema.step,readOnly:this.props.schema.readOnly||!1},value:this.state._value===null||this.state._value===void 0?"":this.state._value,error:!!e,disabled:!!t,onChange:i=>{const a=i.target.value,u=this.checkValue(a);u?this.onError(this.props.attr,l.I18n.t(u)):this.onError(this.props.attr),this.setState({_value:a,oldValue:this.state._value},()=>this.onChange(this.props.attr,parseFloat(a)))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:e&&typeof e=="string"?e:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}))}}const Vn=Mn,Cn={flex:{display:"flex"},button:{height:48,marginLeft:4,minWidth:48}};class rn extends m{componentDidMount(){return fe(this,null,function*(){Ue(rn.prototype,this,"componentDidMount").call(this);const{data:n,attr:e}=this.props,t=m.getValue(n,e)||"";this.setState({value:t,initialized:!0})})}renderItem(n,e){if(!this.state.initialized)return null;const{schema:t,socket:s,attr:i}=this.props,{value:a,showSelectId:u}=this.state;return r().createElement(o.FormControl,{fullWidth:!0,variant:"standard"},t.label?r().createElement(o.InputLabel,{shrink:!0},this.getText(t.label)):null,r().createElement("div",{style:Cn.flex},r().createElement(o.TextField,{variant:"standard",fullWidth:!0,value:a,error:!!n,disabled:e,placeholder:this.getText(t.placeholder),label:this.getText(t.label),helperText:this.renderHelp(t.help,t.helpLink,t.noTranslation),onChange:p=>{const V=p.target.value;this.setState({value:V},()=>this.onChange(i,V))}}),r().createElement(o.Button,{color:"grey",style:Cn.button,size:"small",variant:"outlined",onClick:()=>this.setState({showSelectId:!0})},"...")),u?r().createElement(l.SelectID,{imagePrefix:this.props.imagePrefix===void 0?"../..":this.props.imagePrefix,dialogName:`admin.${this.props.adapterName}`,filterFunc:t.filterFunc,themeType:this.props.themeType,theme:this.props.theme,types:t.types?Array.isArray(t.types)?t.types:[t.types]:void 0,customFilter:t.customFilter,filters:t.filters,socket:s,selected:a,root:t.root,onClose:()=>this.setState({showSelectId:!1}),onOk:p=>this.setState({showSelectId:!1,value:p},()=>this.onChange(i,p))}):null)}}const Un=rn,on={fullWidth:{width:"100%",display:"inline-block"},halfWidth1:{width:"calc(50% - 4px)",display:"inline-block",marginRight:8},halfWidth2:{width:"calc(50% - 4px)",display:"inline-block"}},_t="____ppp____";class Wn extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.setState({_repeat:n?_t:"",_visible:!1,value:n?_t:"",_notEqual:!1})}onChangePassword(n,e){n===void 0&&(n=this.state.value),e===void 0&&(e=this.state._repeat);const t=!!this.props.schema.repeat&&e!==n;this.setState({value:n,_repeat:e,_notEqual:t},()=>{t?this.onError(this.props.attr,l.I18n.t("ra_Passwords are not equal!")):(this.onError(this.props.attr),this.onChange(this.props.attr,n))})}renderItem(n,e){if(this.state._notEqual===void 0)return null;const t=r().createElement(o.TextField,{variant:"standard",fullWidth:!0,type:this.state._visible&&this.state.value!==_t?"text":"password",value:this.state.value,error:!!n||this.state._notEqual,disabled:!!e,onChange:s=>this.onChangePassword(s.target.value),label:this.getText(this.props.schema.label),inputProps:{autoComplete:"new-password",form:{autoComplete:"off"},maxLength:this.props.schema.maxLength||this.props.schema.max||void 0},helperText:this.state._notEqual?l.I18n.t("ra_Passwords are not equal!"):this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),InputProps:{endAdornment:this.state.value&&this.state.value!==_t&&this.props.schema.visible?r().createElement(o.InputAdornment,{position:"end"},r().createElement(o.IconButton,{size:"large",tabIndex:-1,onClick:s=>{s.preventDefault(),s.stopPropagation(),this.setState({_visible:!this.state._visible})},edge:"end"},this.state._visible?r().createElement(c.VisibilityOff,null):r().createElement(c.Visibility,null))):void 0}});if(this.props.schema.repeat){const s=r().createElement(o.TextField,{variant:"standard",fullWidth:!0,type:this.state._visible&&this.state._repeat!==_t?"text":"password",value:this.state._repeat,error:!!n||this.state._notEqual,disabled:!!e,onChange:i=>this.onChangePassword(void 0,i.target.value),label:`${this.getText(this.props.schema.label)} (${l.I18n.t("ra_repeat")})`,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"},maxLength:this.props.schema.maxLength||this.props.schema.max||void 0},helperText:this.state._notEqual?l.I18n.t("ra_Passwords are not equal!"):this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),InputProps:{endAdornment:this.state._repeat&&this.state._repeat!==_t?r().createElement(o.InputAdornment,{position:"end"},r().createElement(o.IconButton,{size:"large",tabIndex:-1,onClick:i=>{i.preventDefault(),i.stopPropagation(),this.setState({_visible:!this.state._visible})},edge:"end"},this.state._visible?r().createElement(c.VisibilityOff,null):r().createElement(c.Visibility,null))):void 0}});return r().createElement("div",{style:on.fullWidth},r().createElement("div",{style:on.halfWidth1},t),r().createElement("div",{style:on.halfWidth2},s))}return t}}const Jn=Wn;class Hn extends m{renderItem(n,e){return r().createElement(o.TextField,{variant:"standard",fullWidth:!0,disabled:!!e,InputProps:{endAdornment:this.props.schema.copyToClipboard?r().createElement(o.IconButton,{size:"small",onClick:()=>{l.Utils.copyToClipboard(this.getPattern(this.props.schema.pattern)),window.alert("Copied")}},r().createElement(l.IconCopy,null)):void 0},value:this.getPattern(this.props.schema.pattern),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const zn=Hn,jn={warning:{"& .Mui-error":{color:"orange"}}};class an extends m{constructor(){super(...arguments);te(this,"updateTimeout")}componentDidMount(){return fe(this,null,function*(){Ue(an.prototype,this,"componentDidMount").call(this);let e=m.getValue(this.props.data,this.props.attr);e==null&&(e=""),this.setState({_value:e.toString(),oldValue:e.toString()});const t=yield this.props.socket.getAdapterInstances(),s=`system.adapter.${this.props.adapterName}.${this.props.instance}`,i=yield this.props.socket.getObject(s),a=i==null?void 0:i.common.host,u=[];t.forEach(p=>{var K,G,q,ce;if(!p||p._id===s||p.common.host!==a||!((K=p.native)!=null&&K.bind))return;if(p!=null&&p.native&&p.native.secure&&p.native.leEnabled&&p.native.leUpdate){const Ee=parseInt(p.native.leCheckPort||p.native.lePort,10);Ee&&u.push({name:`${p._id.replace("system.adapter.","")} (LE)`,port:Ee,v6bind:p.native.bind.includes(":")?p.native.bind:p.native.v6bind,bind:p.native.bind,enabled:!!((G=p.common)!=null&&G.enabled)})}const V=parseInt((q=p==null?void 0:p.native)==null?void 0:q.port,10);V&&u.push({name:p._id.replace("system.adapter.",""),bind:p.native.bind,v6bind:p.native.bind.includes(":")?p.native.bind:p.native.v6bind,port:V,enabled:!!((ce=p.common)!=null&&ce.enabled)})}),this.setState({ports:u})})}static getDerivedStateFromProps(e,t){const s=m.getValue(e.data,e.attr);return s==null||t.oldValue===null||t.oldValue===void 0||s.toString()!==parseInt(t._value,10).toString()&&s.toString()!==t.oldValue.toString()?{_value:s}:null}checkValue(e){if(e==null)return null;const t=this.props.schema.min===void 0?20:this.props.schema.min,s=this.props.schema.max||65535;e=e.toString().trim();const i=e===""?0:parseInt(e,10);return e!==""&&Number.isNaN(i)?"ra_Not a number":e!==""&&window.isFinite(Number(e))?i<t?"ra_Too small":i>s?"ra_Too big":e===""||e==="-"||Number.isNaN(i)?"ra_Not a number":null:"ra_Not a number"}renderItem(e,t){this.state.oldValue!==null&&this.state.oldValue!==void 0?(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.updateTimeout=void 0,this.setState({oldValue:null})},30)):this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=void 0);const s=this.props.schema.min===void 0?20:this.props.schema.min,i=this.props.schema.max||65535;let a;if(this.state.ports){const u=parseInt(this.state._value,10);if(u){const p=this.state.ports.filter(K=>!this.props.data.bind||this.props.data.bind===K.bind||this.props.data.bind==="0.0.0.0"||K.bind==="0.0.0.0");let V=p.findIndex(K=>K.port===u&&K.enabled);V!==-1?e=l.I18n.t("ra_Port is already used by %s",this.state.ports[V].name):(V=p.findIndex(K=>K.port===u&&!K.enabled),V!==-1&&(a=!0,e=l.I18n.t("ra_Port could be used by %s",this.state.ports[V].name)))}}return!e&&this.state._value!==null&&this.state._value!==void 0&&(e=this.checkValue(this.state._value),typeof e=="string"&&(e=l.I18n.t(e))),r().createElement(o.TextField,{variant:"standard",type:"number",fullWidth:!0,inputProps:{min:s,max:i,readOnly:this.props.schema.readOnly||!1},value:this.state._value===null||this.state._value===void 0?"":this.state._value,error:!!e,disabled:!!t,sx:a?jn.warning:void 0,onChange:u=>{const p=Number(u.target.value.toString().replace(/[^0-9]/g,"")).toString(),V=this.checkValue(p);V?this.onError(this.props.attr,l.I18n.t(V)):this.onError(this.props.attr),this.setState({_value:p,oldValue:this.state._value},()=>{p.trim()===parseInt(p,10).toString()&&this.onChange(this.props.attr,parseInt(p,10)||0)})},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:e&&typeof e=="string"?e:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const Kn=an;class Gn extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.props.socket.getEnums("rooms").then(e=>{const t=Object.keys(e).map(s=>({value:this.props.schema.short?s.replace("enum.rooms.",""):s,label:this.getText(e[s].common.name),obj:e[s]}));this.props.schema.allowDeactivate!==!1&&t.unshift({label:l.I18n.t(m.NONE_LABEL),value:m.NONE_VALUE}),this.setState({value:n,selectOptions:t})})}renderItem(n,e){if(!this.state.selectOptions)return null;const t=this.state.selectOptions.find(s=>s.value===this.state.value);return r().createElement(o.FormControl,{variant:"standard",fullWidth:!0},this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!n,disabled:!!e,value:this.state.value||"_",renderValue:()=>t?t.obj?r().createElement(l.TextWithIcon,{value:t.obj,themeType:this.props.themeType,lang:l.I18n.getLanguage()}):t.label:"",onChange:s=>{this.setState({value:s.target.value==="_"?"":s.target.value},()=>this.onChange(this.props.attr,this.state.value))}},this.state.selectOptions.map(s=>r().createElement(o.MenuItem,{key:s.value,value:s.value,style:s.value===m.DIFFERENT_VALUE?{opacity:.5}:{}},s.obj?r().createElement(l.TextWithIcon,{value:s.obj,themeType:this.props.themeType,lang:l.I18n.getLanguage()}):s.label))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Yn=Gn,Xn={fullWidth:{width:"100%"},noMargin:{"&>div":{marginTop:0}}};class Qn extends m{constructor(){super(...arguments);te(this,"initialValue","")}componentDidMount(){super.componentDidMount();const e=m.getValue(this.props.data,this.props.attr),t=[];(this.props.schema.options||[]).forEach(s=>{const i=s;Array.isArray(i.items)?(t.push({label:this.getText(s.label),value:s.value,group:!0}),i.items.forEach(a=>t.push({label:this.getText(a.label),value:a.value,hidden:a.hidden}))):t.push({label:this.getText(s.label),value:s.value,hidden:s.hidden})}),Array.isArray(e)?(this.initialValue=[...e],t.unshift({label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE}),this.setState({value:m.DIFFERENT_VALUE,selectOptions:t})):this.setState({value:e,selectOptions:t})}renderItem(e,t){if(!this.state.selectOptions)return null;const s=(this.state.selectOptions||[]).filter(a=>a.hidden?this.props.custom?!this.executeCustom(a.hidden,this.props.data,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):!this.execute(a.hidden,this.props.schema.default,this.props.data,this.props.arrayIndex,this.props.globalData):!0),i=s.find(a=>a.value==this.state.value);return r().createElement(o.FormControl,{variant:"standard",fullWidth:!0,sx:this.props.table!==void 0&&Xn.noMargin,id:`jsonSelect_${this.props.attr}_${this.props.index||this.props.index===0?this.props.index:""}`},this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!e,disabled:!!t,value:this.state.value||"_",renderValue:()=>this.getText(i==null?void 0:i.label,this.props.schema.noTranslation),onChange:a=>{this.setState({value:a.target.value==="_"?"":a.target.value},()=>{this.state.value===m.DIFFERENT_VALUE?this.onChange(this.props.attr,this.initialValue):this.onChange(this.props.attr,this.state.value)})}},s.map((a,u)=>a.group?r().createElement(o.ListSubheader,{key:u},this.getText(a.label,this.props.schema.noTranslation)):r().createElement(o.MenuItem,{key:u,value:a.value,style:a.value===m.DIFFERENT_VALUE?{opacity:.5}:{}},this.getText(a.label,this.props.schema.noTranslation)))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const qn=Qn,Zn={menuPaper:{maxHeight:800}};class es extends m{constructor(){super(...arguments);te(this,"initialized",!1);te(this,"_context")}askInstance(){if(this.props.alive){let e=this.props.schema.data;if(e===void 0&&this.props.schema.jsonData){const t=this.getPattern(this.props.schema.jsonData);try{e=JSON.parse(t)}catch(s){console.error(`Cannot parse json data: ${t}`)}}e===void 0&&(e=null),this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,this.props.schema.command||"send",e).then(t=>this.setState({list:t}))}else{const e=m.getValue(this.props.data,this.props.attr);this.setState({value:e})}}getContext(){const e={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(t=>e[t]=m.getValue(this.props.data,t)),JSON.stringify(e)}_getValue(){let e=this.state.value===null||this.state.value===void 0?m.getValue(this.props.data,this.props.attr):this.state.value;return this.props.schema.multiple&&(typeof e=="string"?e=[e]:e==null&&(e=[])),e}renderItem(e,t){if(this.props.alive){const u=this.getContext();(u!==this._context||!this.initialized)&&(this._context=u,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}const s=this._getValue();if(!this.props.alive)return this.props.schema.multiple||this.props.schema.manual===!1?l.I18n.t("ra_Cannot retrieve options, as instance is offline"):r().createElement(o.TextField,{variant:"standard",fullWidth:!0,value:s,error:!!e,disabled:!!t,onChange:u=>{const p=u.target.value;this.setState({value:p},()=>this.onChange(this.props.attr,(p||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),InputProps:{endAdornment:this.state.value&&!this.props.schema.noClearButton?r().createElement(o.InputAdornment,{position:"end"},r().createElement(o.IconButton,{size:"small",onClick:()=>this.setState({value:""},()=>this.onChange(this.props.attr,""))},r().createElement(c.Close,null))):null}});if(!this.state.list)return r().createElement(o.CircularProgress,{size:"small"});const i=this.state.list.filter(u=>u.hidden?this.props.custom?!this.executeCustom(u.hidden,this.props.data,this.props.customObj,this.props.instanceObj,this.props.arrayIndex,this.props.globalData):!this.execute(u.hidden,this.props.schema.default,this.props.data,this.props.arrayIndex,this.props.globalData):!0),a=i.find(u=>u.value===s);return r().createElement(o.FormControl,{variant:"standard",fullWidth:!0},this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,r().createElement(o.Select,{variant:"standard",error:!!e,multiple:this.props.schema.multiple,disabled:!!t,sx:{"&.MuiSelect-paper":this.props.schema.multiple?Zn.menuPaper:void 0},value:s,renderValue:u=>this.props.schema.multiple?r().createElement(o.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},u.map(p=>{const V=i.find(K=>K.value===p);if(V||this.props.schema.showAllValues!==!1){const K=(V==null?void 0:V.label)||p;return r().createElement(o.Chip,{key:p,label:K})}return null})):(a==null?void 0:a.label)||u,onChange:u=>{this.onChange(this.props.attr,u.target.value)}},i.map((u,p)=>r().createElement(o.MenuItem,{key:p,value:u.value},this.props.schema.multiple?r().createElement(o.Checkbox,{checked:s.includes(u.value),onClick:()=>{const V=JSON.parse(JSON.stringify(this._getValue())),K=s.indexOf(u.value);K!==-1?V.splice(K,1):(V.push(u.value),V.sort()),this.setState({value:V},()=>this.onChange(this.props.attr,V))}}):null,r().createElement(o.ListItemText,{primary:u.label})))),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const ts=es,yn={fullWidth:{width:"100%"}};function ft(L){return L.split(".").reduce((n,e)=>(n<<8)+parseInt(e,10),0)>>>0}function ns(L,n){var s,i;const e=(i=(s=L==null?void 0:L.native)==null?void 0:s.hardware)==null?void 0:i.networkInterfaces;if(!e)return null;let t;return Object.keys(e).forEach(a=>e[a].forEach(u=>{u.internal||n.includes(":")&&u.family!=="IPv6"||n.includes(".")&&!n.match(/[^.\d]/)&&u.family!=="IPv4"||(u.family==="IPv4"&&!u.address.startsWith("172")&&(n==="127.0.0.0"||n==="localhost"||n.match(/[^.\d]/))?t=u.address:t||(u.family==="IPv4"&&n.includes(".")&&(ft(n)&ft(u.netmask),ft(u.address)&ft(u.netmask)),t=u.address))})),t||Object.keys(e).forEach(a=>e[a].forEach(u=>{u.internal||n.includes(":")&&u.family!=="IPv6"||n.includes(".")&&!n.match(/[^.\d]/)&&u.family!=="IPv4"||(u.family==="IPv6"&&(n==="127.0.0.0"||n==="localhost"||n.match(/[^.\d]/))?t=u.address:t||(u.family==="IPv4"&&n.includes(".")&&(ft(n)&ft(u.netmask),ft(u.address)&ft(u.netmask)),t=u.address))})),t||Object.keys(e).forEach(a=>{e[a].forEach(u=>{u.internal||n.includes(":")&&u.family!=="IPv6"||n.includes(".")&&!n.match(/[^.\d]/)&&u.family!=="IPv4"||(n==="127.0.0.0"||n==="localhost"||n.match(/[^.\d]/),t=u.address)})}),t||Object.keys(e).forEach(a=>{e[a].forEach(u=>{u.internal||(t=u.address)})}),t}class ln extends m{componentDidMount(){return fe(this,null,function*(){var e;Ue(ln.prototype,this,"componentDidMount").call(this);let n=window.location.hostname;if(this.props.schema.openUrl){const t=yield this.props.socket.getCurrentInstance(),s=yield this.props.socket.getObject(`system.adapter.${t}`);if(s){const i=yield this.props.socket.getObject(`system.host.${(e=s==null?void 0:s.common)==null?void 0:e.host}`);if(i){const a=ns(i,window.location.hostname);if(a)n=`${a}:${window.location.port}`;else{console.warn(`Cannot find suitable IP in host ${s.common.host} for ${s._id}`);return}}}}yield new Promise(t=>{this.setState({_error:"",_message:"",hostname:n},t)}),this.props.schema.onLoaded&&this._onClick()})}renderErrorDialog(){return this.state._error?r().createElement(l.Error,{text:this.state._error,onClose:()=>this.setState({_error:""})}):null}renderMessageDialog(){return this.state._message?r().createElement(l.Message,{text:this.state._message,onClose:()=>this.setState({_message:""})}):null}_onClick(){this.props.onCommandRunning(!0),this.setState({running:!0});const n=`${window.location.protocol}//${window.location.host}${window.location.pathname.replace(/\/index\.html$/,"")}`,e=`${window.location.protocol}//${this.state.hostname.split(":").length>3?`[${this.state.hostname}]`:this.state.hostname}${window.location.pathname.replace(/\/index\.html$/,"")}`;let t=this.props.schema.data;if(t===void 0&&this.props.schema.jsonData){const i=this.getPattern(this.props.schema.jsonData,ne({_origin:n,_originIp:e},this.props.data));try{t=JSON.parse(i)}catch(a){console.error(`Cannot parse json data: ${i}`)}}t===void 0&&(t=null),this.props.schema.openUrl&&!t&&(t={_origin:n,_originIp:e});let s;this.props.schema.timeout&&(s=setTimeout(()=>{this.props.onCommandRunning(!1),this.setState({_error:l.I18n.t("ra_Request timed out"),running:!1})},parseInt(this.props.schema.timeout,10)||1e4)),this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,this.props.schema.command||"send",t).then(i=>fe(this,null,function*(){if(s&&(clearTimeout(s),s=void 0),i!=null&&i.error)if(this.props.schema.error&&this.props.schema.error[i.error]){let a=this.getText(this.props.schema.error[i.error]);i.args&&i.args.forEach(u=>a=a.replace("%s",u)),this.setState({_error:a})}else this.setState({_error:i.error?l.I18n.t(i.error):l.I18n.t("ra_Error")});else{if(i!=null&&i.reloadBrowser&&this.props.schema.reloadBrowser)window.location.reload();else if(i!=null&&i.openUrl&&this.props.schema.openUrl)window.open(i.openUrl,i.window||this.props.schema.window||"_blank");else if(i!=null&&i.result&&this.props.schema.result&&this.props.schema.result[i.result]){let a=this.getText(this.props.schema.result[i.result]);i.args&&i.args.forEach(u=>a=a.replace("%s",u)),window.alert(a)}if(i!=null&&i.native&&this.props.schema.useNative){for(const[a,u]of Object.entries(i.native))yield this.onChangeAsync(a,u);setTimeout(()=>this.props.forceUpdate(Object.keys(i.native),this.props.data),300)}else i!=null&&i.result?window.alert(typeof i.result=="object"?JSON.stringify(i.result):i.result):window.alert(l.I18n.t("ra_Ok"));i!=null&&i.saveConfig&&this.props.onChange(null,null,null,!0)}})).catch(i=>{this.props.schema.error&&this.props.schema.error[i.toString()]?this.setState({_error:this.getText(this.props.schema.error[i.toString()])}):this.setState({_error:l.I18n.t(i.toString())||l.I18n.t("ra_Error")})}).then(()=>{this.props.onCommandRunning(!1),this.setState({running:!1})})}renderConfirmDialog(){if(!this.state.confirmDialog)return null;const n=this.state.confirmData||this.props.schema.confirm;let e=null;return n.type==="warning"?e=r().createElement(c.Warning,null):n.type==="error"?e=r().createElement(c.Error,null):n.type==="info"&&(e=r().createElement(c.Info,null)),r().createElement(l.Confirm,{title:this.getText(n.title)||l.I18n.t("ra_Please confirm"),text:this.getText(n.text),ok:this.getText(n.ok)||l.I18n.t("ra_Ok"),cancel:this.getText(n.cancel)||l.I18n.t("ra_Cancel"),icon:e||void 0,onClose:t=>this.setState({confirmDialog:!1},()=>t&&this._onClick())})}renderItem(n,e){const t=this.getIcon();return r().createElement("div",{style:yn.fullWidth},r().createElement(o.Button,{variant:this.props.schema.variant||void 0,color:this.props.schema.color||"grey",style:yn.fullWidth,disabled:e||!this.props.alive,startIcon:t,title:this.props.alive?this.getText(this.props.schema.title)||"":l.I18n.t("ra_Instance is not alive"),onClick:()=>{this.props.schema.confirm?this.setState({confirmDialog:!0}):this._onClick()}},this.props.schema.showProcess&&this.state.running?r().createElement(o.CircularProgress,{size:20,style:{marginRight:8}}):null,this.getText(this.props.schema.label,this.props.schema.noTranslation)),this.renderErrorDialog(),this.renderMessageDialog())}}const En=ln,bn={fullWidth:{width:"100%"},icon:{width:24,height:24,marginRight:4}};class ss extends m{_onClick(){return fe(this,null,function*(){var t,s;let n=this.props.schema.val;if(typeof n=="string"&&n.includes("${")){n=this.getPattern(n);const i=yield this.props.socket.getObject(this.props.schema.id);((t=i==null?void 0:i.common)==null?void 0:t.type)==="number"?n=parseFloat(n):((s=i==null?void 0:i.common)==null?void 0:s.type)==="boolean"&&(n=n==="true"||n===!0||n==="1"||n===1)}const e=(this.props.schema.id||"").replace(/%INSTANCE%/g,(this.props.instance||0).toString());try{yield this.props.socket.setState(e,{val:n,ack:!!this.props.schema.ack}),this.props.schema.okText&&window.alert(this.getText(this.props.schema.okText))}catch(i){this.props.schema.error&&this.props.schema.error[i.toString()]?window.alert(this.getText(this.props.schema.error[i.toString()])):window.alert(l.I18n.t(i.toString())||l.I18n.t("ra_Error"))}})}renderConfirmDialog(){if(!this.state.confirmDialog)return null;const n=this.state.confirmData||this.props.schema.confirm;let e=null;return n.type==="warning"?e=r().createElement(c.Warning,null):n.type==="error"?e=r().createElement(c.Error,null):n.type==="info"&&(e=r().createElement(c.Info,null)),r().createElement(l.Confirm,{title:this.getText(n.title)||l.I18n.t("ra_Please confirm"),text:this.getText(n.text),ok:this.getText(n.ok)||l.I18n.t("ra_Ok"),cancel:this.getText(n.cancel)||l.I18n.t("ra_Cancel"),icon:e,onClose:t=>this.setState({confirmDialog:!1},()=>t&&this._onClick())})}renderItem(n,e){return r().createElement(o.Button,{variant:this.props.schema.variant||void 0,color:this.props.schema.color||"grey",style:bn.fullWidth,disabled:e,onClick:()=>fe(this,null,function*(){this.props.schema.confirm?this.setState({confirmDialog:!0}):yield this._onClick()})},this.props.schema.icon?r().createElement(l.Icon,{src:this.props.schema.icon,style:bn.icon}):null,this.getText(this.props.schema.label,this.props.schema.noTranslation))}}const rs=ss,wn={fullWidth:{width:"100%"},slider:{marginLeft:10,marginRight:10,width:"calc(100% - 20px)"}};class is extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.setState({_value:n})}static getDerivedStateFromProps(n,e){if(n.schema.min!==void 0&&n.schema.min<0||n.schema.max!==void 0&&n.schema.max<0)return null;const t=m.getValue(n.data,n.attr);return t==null||t.toString()!==parseFloat(e._value).toString()?{_value:t}:null}renderItem(n,e){const t=this.props.schema.min||0,s=this.props.schema.max||100,i=this.props.schema.unit||"",a=[{value:t,label:t+i},{value:s,label:s+i}];return r().createElement(o.Box,{style:wn.fullWidth},this.props.schema.label?r().createElement(o.Typography,{gutterBottom:!0},this.getText(this.props.schema.label)):null,r().createElement(o.Slider,{style:wn.slider,value:this.state._value,getAriaValueText:u=>u+i,step:this.props.schema.step||(s-t)/100,valueLabelDisplay:"auto",marks:a,min:t,max:s,disabled:!!e,onChange:u=>{const p=u.target.value;this.setState({_value:p},()=>this.onChange(this.props.attr,p))}}),this.props.schema.help?r().createElement(o.Typography,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const os=is,un={fullWidth:L=>({width:"100%",backgroundColor:L.palette.mode==="dark"?"#FFF":"#000",borderStyle:"hidden"}),primary:L=>({backgroundColor:L.palette.primary.main}),secondary:L=>({backgroundColor:L.palette.secondary.main})};class as extends m{renderItem(){return r().createElement(o.Box,{component:"hr",sx:X.getStyle(this.props.theme,un.fullWidth,this.props.schema.color==="primary"?un.primary:this.props.schema.color==="secondary"?un.secondary:{backgroundColor:this.props.schema.color||(this.props.themeType==="dark"?"#333":"#ddd")},{height:this.props.schema.color?this.props.schema.height||2:this.props.schema.height||1})})}}const ls=as,Nt={header:L=>({width:"100%",background:L.palette.primary.main,color:L.palette.primary.contrastText,padding:"4px !important",borderRadius:"3px",marginBlockEnd:0,marginBlockStart:0})};class us extends m{renderItem(){switch((this.props.schema.size||5).toString()){case"1":return r().createElement(o.Box,{component:"h1",sx:Nt.header},this.getText(this.props.schema.text,this.props.schema.noTranslation));case"2":return r().createElement(o.Box,{component:"h2",sx:Nt.header},this.getText(this.props.schema.text,this.props.schema.noTranslation));case"3":return r().createElement(o.Box,{component:"h3",sx:Nt.header},this.getText(this.props.schema.text,this.props.schema.noTranslation));case"4":return r().createElement(o.Box,{component:"h4",sx:Nt.header},this.getText(this.props.schema.text,this.props.schema.noTranslation));case"5":default:return r().createElement(o.Box,{component:"h5",sx:Nt.header},this.getText(this.props.schema.text,this.props.schema.noTranslation))}}}const cs=us;class hs extends m{renderItem(){let n=this.props.schema.src;return n&&!n.startsWith(".")&&!n.startsWith("http")&&!n.startsWith(`adapter/${this.props.adapterName}/`)&&!n.startsWith(`./adapter/${this.props.adapterName}/`)&&(n=`adapter/${this.props.adapterName}/${n}`),r().createElement("img",{src:n,style:{cursor:this.props.schema.href?"pointer":void 0,width:"100%",height:"100%"},onClick:this.props.schema.href?()=>this.props.schema.href&&window.open(this.props.schema.href,"_blank"):null,alt:""})}}const ps=hs,xn={fullWidth:{height:"100%",width:"100%"},link:L=>({textDecoration:"underline",color:L.palette.mode==="dark"?"#4dabf5":"#254e72",cursor:"pointer"})};class ds extends m{renderItem(n,e){if(this.props.schema.button){const s=this.getIcon();return r().createElement(o.Button,{variant:this.props.schema.variant||void 0,color:this.props.schema.color||"grey",style:xn.fullWidth,disabled:e,startIcon:s,onClick:this.props.schema.href?()=>{const i=this.props.schema.href?this.getText(this.props.schema.href,!0):null;i&&window.open(i,"_blank")}:null},this.getText(this.props.schema.text||this.props.schema.label,this.props.schema.noTranslation))}let t=this.getText(this.props.schema.text||this.props.schema.label,this.props.schema.noTranslation);return t&&(t.includes("<a ")||t.includes("<br")||t.includes("<b>")||t.includes("<i>"))&&(t=l.Utils.renderTextWithA(t)),r().createElement(o.Box,{component:"span",sx:this.props.schema.href?xn.link:void 0,onClick:this.props.schema.href?()=>{const s=this.props.schema.href?this.getText(this.props.schema.href,!0):null;s&&window.open(s,"_blank")}:null},t)}}const An=ds,cn=1024*1024,Ae={fullWidth:{width:"100%"},root:{width:"100%"},paper:{width:"100%",marginBottom:16,backgroundColor:"rgba(255, 255, 255, 0.1)"},headerText:{width:"100%"},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},label:{display:"flex",justifyContent:"space-between"},title:{flex:"1 1 100%"},rootTool:{paddingLeft:16,paddingRight:8},silver:{opacity:.2},flex:{display:"flex",alignItems:"baseline"},filteredOut:{padding:10,display:"flex",textAlign:"center"},buttonEmpty:{width:34,display:"inline-block"},buttonCell:{whiteSpace:"nowrap"},dropZone:{width:"100%",height:100,position:"relative"},dropZoneEmpty:{},uploadDiv:{position:"relative",width:"100%",minHeight:300,opacity:.9,marginTop:30,cursor:"pointer",outline:"none"},uploadDivDragging:{opacity:1,background:"rgba(128,255,128,0.1)"},image:{objectFit:"contain",margin:"auto",display:"flex",width:"100%",height:"100%"},uploadCenterDiv:{margin:5,border:"3px dashed grey",borderRadius:5,width:"calc(100% - 10px)",height:"calc(100% - 10px)",minHeight:300,position:"relative",display:"flex"},uploadCenterIcon:{paddingTop:10,width:48,height:48},uploadCenterText:{fontSize:16},uploadCenterTextAndIcon:{textAlign:"center",position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},buttonRemoveWrapper:{position:"absolute",zIndex:222,right:0},error:{border:"2px solid red",boxSizing:"border-box"},tooltip:{pointerEvents:"none"}};function ms(L,n,e){n=n||"key";const t=[];return Object.keys(L).forEach(s=>{const i={};i[n]=s,e?(i[e]=L[s],t.push(i)):t.push(Object.assign(i,L[s]))}),t}function Fn(L,n,e){n=n||"key";const t={};return L.forEach(s=>{let i=s[n];i==null&&(i=""),delete s[n],e?t[i]=s[e]:t[i]=s}),t}function fs(L,n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(L[t%L.length].charCodeAt(0)^n.charCodeAt(t));return e}function gs(L,n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(L[t%L.length].charCodeAt(0)^n.charCodeAt(t));return e}class He extends m{constructor(e){super(e);te(this,"filterRefs");te(this,"typingTimer",null);te(this,"secret","Zgfr56gFe87jJOM");te(this,"handleRequestSort",(e,t=!1)=>{const{order:s,orderBy:i}=this.state;if(i){const u=t?s:i===e&&s==="asc"?"desc":"asc",p=this.stableSort(u,e);this.setState({order:u,orderBy:e,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,p))}});te(this,"stableSort",(e,t)=>{const{value:s}=this.state,i=He.getComparator(e,t),a=s.map((u,p)=>({el:u,index:p}));return a.sort((u,p)=>{const V=i(u.el,p.el);return V!==0?V:u.index-p.index}),a.map(u=>u.el)});te(this,"onDelete",e=>()=>{const t=JSON.parse(JSON.stringify(this.state.value));t.splice(e,1),this.setState({value:t,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(t)))});te(this,"onClone",e=>()=>{const t=JSON.parse(JSON.stringify(this.state.value)),s=JSON.parse(JSON.stringify(t[e]));if(typeof this.props.schema.clone=="string"&&typeof s[this.props.schema.clone]=="string"){let i=1,a=s[this.props.schema.clone];const u=a.match(/(\d+)$/);for(u?(a=a.replace(u[0],""),i=parseInt(u[0],10)+1):a+="_";t.find(p=>p[this.props.schema.clone]===a+i.toString());)i++;s[this.props.schema.clone]=`${s[this.props.schema.clone]}_${i}`}t.splice(e,0,s),this.setState({value:t,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(t)))});te(this,"onChangeWrapper",(e,t)=>{this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=setTimeout((s,i)=>{if(this.typingTimer=null,this.props.schema.encryptedAttributes){const a=JSON.parse(JSON.stringify(s));if(a.forEach(u=>{this.props.schema.encryptedAttributes.forEach(p=>{u[p]&&(u[p]=fs(this.secret,u[p]))})}),this.props.schema.objKeyName){const u=Fn(a,this.props.schema.objKeyName,this.props.schema.objValueName);this.onChange(this.props.attr,u)}else this.onChange(this.props.attr,a)}else if(this.props.schema.objKeyName){const a=Fn(JSON.parse(JSON.stringify(s)),this.props.schema.objKeyName,this.props.schema.objValueName);this.onChange(this.props.attr,a)}else this.onChange(this.props.attr,s);i&&(this.applyFilter(!1,s),this.handleRequestSort(this.state.orderBy,!0))},300,e,t)});te(this,"onAdd",()=>{var i;const{schema:e}=this.props,t=JSON.parse(JSON.stringify(this.state.value)),s=(i=e.items)==null?void 0:i.reduce((a,u)=>{let p;return u.defaultFunc?this.props.custom?p=u.defaultFunc?this.executeCustom(u.defaultFunc,this.props.data,this.props.customObj,this.props.instanceObj,t.length,this.props.data):this.props.schema.default:p=u.defaultFunc?this.execute(u.defaultFunc,this.props.schema.default,this.props.data,t.length,this.props.data):this.props.schema.default:p=u.default===void 0?null:u.default,a[u.attr]=p,a},{});t.push(s),this.setState({value:t},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(t)))});te(this,"applyFilter",(e,t,s)=>{t=t||this.state.value;let i=t.map((a,u)=>u);if(Object.keys(this.filterRefs).forEach(a=>{let u=He.getFilterValue(this.filterRefs[a]);!e&&u?(u=u.toLowerCase(),i=i.filter(p=>t[p]&&t[p][a]&&t[p][a].toLowerCase().includes(u))):this.filterRefs[a].current&&He.setFilterValue(this.filterRefs[a],"")}),i.length===t.length&&(i=null),i===null&&this.state.visibleValue===null){s&&s();return}JSON.stringify(i)!==JSON.stringify(this.state.visibleValue)?this.setState({visibleValue:i},()=>s&&s()):s&&s()});this.filterRefs={},this.props.schema.items=this.props.schema.items||[],this.props.schema.items.forEach(t=>{t.filter&&(this.filterRefs[t.attr]=(0,b.createRef)())})}componentDidMount(){return fe(this,null,function*(){Ue(He.prototype,this,"componentDidMount").call(this);const e=m.getValue(this.props.data,this.props.attr)||[];let t;if(this.props.schema.objKeyName?t=ms(e,this.props.schema.objKeyName,this.props.schema.objValueName):t=e,Array.isArray(t)||(t=[]),this.props.schema.encryptedAttributes){const s=yield this.props.socket.getCompactSystemConfig();this.secret=(s==null?void 0:s.native.secret)||this.secret,e.forEach(i=>{this.props.schema.encryptedAttributes.forEach(a=>{i[a]&&(i[a]=gs(this.secret,i[a]))})})}this.setState({value:t,visibleValue:null,orderBy:"",order:"asc",iteration:0,filterOn:[]},()=>this.validateUniqueProps())})}componentWillUnmount(){this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=null,super.componentWillUnmount()}itemTable(e,t,s){const{schema:i}=this.props,a=i.items&&i.items.find(p=>p.attr===e);if(!a)return null;const u={items:{[e]:a}};return r().createElement($t,{index:s+this.state.iteration,arrayIndex:s,changed:this.props.changed,globalData:this.props.data,socket:this.props.socket,adapterName:this.props.adapterName,instance:this.props.instance,common:this.props.common,alive:this.props.alive,themeType:this.props.themeType,themeName:this.props.themeName,data:t,table:!0,custom:!0,schema:u,systemConfig:this.props.systemConfig,dateFormat:this.props.dateFormat,isFloatComma:this.props.isFloatComma,imagePrefix:this.props.imagePrefix,onCommandRunning:this.props.onCommandRunning,forceUpdate:this.props.forceUpdate,originalData:this.props.originalData,customs:this.props.customs,theme:this.props.theme,DeviceManager:this.props.DeviceManager,onChange:(p,V)=>{const K=JSON.parse(JSON.stringify(this.state.value));K[s][p]=V,this.setState({value:K},()=>{this.validateUniqueProps(),this.onChangeWrapper(K,!0)})},onError:(p,V)=>this.onError(p,V)})}validateUniqueProps(){if(this.props.schema.uniqueColumns)for(const e of this.props.schema.uniqueColumns){const t=[];this.state.value.find(i=>{const a=i[e];return t.includes(a)?(this.onError(e,"is not unique"),this.setState({errorMessage:l.I18n.t('Non-allowed duplicate entry "%s" in column "%s"',a,e)}),!0):(t.push(a),!1)})||(this.onError(e,null),this.setState({errorMessage:""}))}}static descendingComparator(e,t,s){return t[s]<e[s]?-1:t[s]>e[s]?1:0}static getComparator(e,t){return e==="desc"?(s,i)=>He.descendingComparator(s,i,t):(s,i)=>-He.descendingComparator(s,i,t)}static getFilterValue(e){var t,s,i;return(i=(s=(t=e==null?void 0:e.current)==null?void 0:t.children[0])==null?void 0:s.children[0])==null?void 0:i.value}static setFilterValue(e,t){return e.current.children[0].children[0].value=t}enhancedTableHead(e,t){const{schema:s}=this.props,{order:i,orderBy:a}=this.state;return r().createElement(o.TableHead,null,r().createElement(o.TableRow,null,s.items&&s.items.map((u,p)=>r().createElement(o.TableCell,{style:{width:(typeof u.width=="string"&&u.width.endsWith("%"),u.width)},key:`${u.attr}_${p}`,align:"left",sortDirection:a===u.attr?i:!1},r().createElement("div",{style:ne(ne({},Ae.flex),s.showFirstAddOnTop?{flexDirection:"column"}:void 0)},!p&&!s.noDelete?r().createElement(o.Tooltip,{title:t?l.I18n.t("ra_Cannot add items with set filter"):l.I18n.t("ra_Add row"),componentsProps:{popper:{sx:Ae.tooltip}}},r().createElement("span",null,r().createElement(o.IconButton,{size:"small",color:"primary",disabled:!!t&&!this.props.schema.allowAddByFilter,onClick:this.onAdd},r().createElement(c.Add,null)))):null,u.sort&&r().createElement(o.TableSortLabel,{active:!0,style:a!==u.attr?Ae.silver:void 0,direction:a===u.attr?i:"asc",onClick:()=>this.handleRequestSort(u.attr)}),u.filter&&this.state.filterOn.includes(u.attr)?r().createElement(o.TextField,{variant:"standard",ref:this.filterRefs[u.attr],onChange:()=>this.applyFilter(),title:l.I18n.t("ra_You can filter entries by entering here some text"),InputProps:{endAdornment:He.getFilterValue(this.filterRefs[u.attr])&&r().createElement(o.InputAdornment,{position:"end"},r().createElement(o.IconButton,{size:"small",onClick:()=>{He.setFilterValue(this.filterRefs[u.attr],""),this.applyFilter()}},r().createElement(c.Close,null)))},fullWidth:!0,placeholder:this.getText(u.title)}):r().createElement("span",{style:Ae.headerText},this.getText(u.title)),u.filter?r().createElement(o.IconButton,{title:l.I18n.t("ra_Show/hide filter input"),size:"small",onClick:()=>{const V=[...this.state.filterOn],K=this.state.filterOn.indexOf(u.attr);K===-1?V.push(u.attr):V.splice(K,1),this.setState({filterOn:V},()=>{K&&He.getFilterValue(this.filterRefs[u.attr])&&(He.setFilterValue(this.filterRefs[u.attr],""),this.applyFilter())})}},this.state.filterOn.includes(u.attr)?r().createElement(c.FilterAltOff,null):r().createElement(c.FilterAlt,null)):null))),!s.noDelete&&r().createElement(o.TableCell,{style:{paddingLeft:20,paddingRight:20,width:e,textAlign:"right"},padding:"checkbox"},s.import?r().createElement(o.IconButton,{style:{marginRight:10},size:"small",onClick:()=>this.setState({showImportDialog:!0}),title:l.I18n.t("ra_import data from %s file","CSV")},r().createElement(c.UploadFile,null)):null,s.export?r().createElement(o.IconButton,{style:{marginRight:10},size:"small",onClick:()=>this.onExport(),title:l.I18n.t("ra_Export data to %s file","CSV")},r().createElement(c.Download,null)):null,r().createElement(o.IconButton,{disabled:!0,size:"small"},r().createElement(c.Delete,null)))))}onExport(){const{schema:e}=this.props,{value:t}=this.state,i=[e.items.map(p=>p.attr).join(";")];t.forEach(p=>{const V=[];e.items.forEach(K=>{var G;(G=p[K.attr])!=null&&G.includes(";")?V.push(`"${p[K.attr]}"`):V.push(p[K.attr]===void 0||p[K.attr]===null?"":p[K.attr])}),i.push(V.join(";"))});const a=document.createElement("a");a.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(i.join(`
`))}`);const u=new Date;a.setAttribute("download",`${u.getFullYear()}_${(u.getMonth()+1).toString().padStart(2,"0")}_${u.getDate().toString().padStart(2,"0")}_${this.props.adapterName}.${this.props.instance}_${this.props.attr}.csv`),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}onImport(e){var u;const t=e.split(`
`).map(p=>p.replace("\r","").trim()),{schema:s}=this.props,i=t.shift().split(";").filter(p=>p&&s.items.find(V=>V.attr===p)),a=[];t.forEach(p=>{const V=p.split(";"),K={};for(let G=0;G<V.length;G++){let q=V[G];if(q.startsWith('"')){for(q=q.substring(1);G<V.length&&!q.endsWith('"');)q+=`;${V[++G]}`;q=q.substring(0,q.length-1)}let ce=q;if(q==="true")ce=!0;else if(q==="false")ce=!1;else if(window.isFinite(q)){const Ee=this.props.schema.items.find(re=>re.attr===i[G]);Ee&&Ee.type==="number"?ce=parseFloat(q):ce=q}else ce=q;K[i[G]]=ce}a.push(K)}),a.length?(u=this.state.value)!=null&&u.length?this.setState({showTypeOfImportDialog:a,showImportDialog:!1}):this.setState({value:a,showImportDialog:!1}):window.alert("ra_No data found in file")}isAnyFilterSet(){return!!Object.keys(this.filterRefs).find(e=>He.getFilterValue(this.filterRefs[e]))}onMoveUp(e){const t=JSON.parse(JSON.stringify(this.state.value)),s=t[e];t.splice(e,1),t.splice(e-1,0,s),this.setState({value:t,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(t)))}onMoveDown(e){const t=JSON.parse(JSON.stringify(this.state.value)),s=t[e];t.splice(e,1),t.splice(e+1,0,s),this.setState({value:t,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(t)))}onDrop(e){const t=e[0],s=new FileReader;s.onabort=()=>console.log("file reading was aborted"),s.onerror=()=>console.log("file reading has failed"),s.onload=()=>{if(t.size>cn){window.alert(l.I18n.t("ra_File is too big. Max %sk allowed. Try use SVG.",Math.round(cn/1024)));return}const i=new Uint8Array(s.result).reduce((a,u)=>a+String.fromCharCode(u),"");this.onImport(i)},s.readAsArrayBuffer(t)}showTypeOfImportDialog(){return this.state.showTypeOfImportDialog?r().createElement(o.Dialog,{open:!0,onClose:()=>this.setState({showTypeOfImportDialog:!1}),maxWidth:"md"},r().createElement(o.DialogTitle,null,l.I18n.t("ra_Append or replace?")),r().createElement(o.DialogContent,null,l.I18n.t("ra_Append %s entries or replace existing?",this.state.showTypeOfImportDialog.length)),r().createElement(o.DialogActions,null,r().createElement(o.Button,{variant:"contained",color:"primary",autoFocus:!0,onClick:()=>{const e=JSON.parse(JSON.stringify(this.state.value));this.state.showTypeOfImportDialog.forEach(t=>e.push(t)),this.setState({value:e,iteration:this.state.iteration+1e4,showTypeOfImportDialog:!1},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(e)))}},l.I18n.t("ra_Append")),r().createElement(o.Button,{variant:"contained",color:"secondary",autoFocus:!0,onClick:()=>{const e=this.state.showTypeOfImportDialog;this.setState({value:e,iteration:this.state.iteration+1e4,showTypeOfImportDialog:!1},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(e)))}},l.I18n.t("ra_Replace")))):null}showImportDialog(){return this.state.showImportDialog?r().createElement(o.Dialog,{open:!0,onClose:()=>this.setState({showImportDialog:!1}),sx:{"& .MuiDialog-paper":{minHeight:500}},maxWidth:"md",fullWidth:!0},r().createElement(o.DialogTitle,null,l.I18n.t("ra_Import from %s","CSV")),r().createElement(o.DialogContent,null,r().createElement(Vt(),{multiple:!1,accept:{"text/csv":[".csv"]},maxSize:cn,onDragEnter:()=>this.setState({uploadFile:"dragging"}),onDragLeave:()=>this.setState({uploadFile:!0}),onDrop:(e,t)=>{this.setState({uploadFile:!1}),e.length?this.onDrop(e):window.alert(t&&t[0]&&t[0].errors&&t[0].errors[0]&&t[0].errors[0].message||l.I18n.t("ra_Cannot upload"))}},({getRootProps:e,getInputProps:t})=>r().createElement("div",ne({style:ne(ne(ne(ne({},Ae.uploadDiv),this.state.uploadFile==="dragging"?Ae.uploadDivDragging:void 0),Ae.dropZone),this.state.icon?void 0:Ae.dropZoneEmpty)},e()),r().createElement("input",ne({},t())),r().createElement("div",{style:Ae.uploadCenterDiv},r().createElement("div",{style:Ae.uploadCenterTextAndIcon},r().createElement(c.UploadFile,{style:Ae.uploadCenterIcon}),r().createElement("div",{style:Ae.uploadCenterText},this.state.uploadFile==="dragging"?l.I18n.t("ra_Drop file here"):l.I18n.t("ra_Place your files here or click here to open the browse dialog"))))))),r().createElement(o.DialogActions,null,r().createElement(o.Button,{variant:"contained",onClick:()=>this.setState({showImportDialog:!1}),color:"primary",startIcon:r().createElement(c.Close,null)},l.I18n.t("Cancel")))):null}renderItem(){const{schema:e}=this.props;let{visibleValue:t}=this.state;if(!this.state.value||!Array.isArray(this.state.value))return null;t=t||this.state.value.map((a,u)=>u);const s=this.isAnyFilterSet();let i;return this.props.schema.compact&&(i={paddingTop:1,paddingBottom:1}),r().createElement(o.Paper,{style:Ae.paper},this.showImportDialog(),this.showTypeOfImportDialog(),e.label?r().createElement("div",{style:Ae.label},r().createElement(o.Toolbar,{variant:"dense",style:Ae.rootTool},r().createElement(o.Typography,{style:Ae.title,variant:"h6",id:"tableTitle",component:"div"},this.getText(e.label)))):null,r().createElement(o.TableContainer,null,r().createElement(o.Table,{style:Ae.table,size:"small"},this.enhancedTableHead(!s&&!this.state.orderBy?120:64,s),r().createElement(o.TableBody,null,t.map((a,u)=>r().createElement(o.TableRow,{hover:!0,key:`${a}_${u}`},e.items&&e.items.map(p=>r().createElement(o.TableCell,{key:`${p.attr}_${a}`,align:"left",style:i},this.itemTable(p.attr,this.state.value[a],a))),!e.noDelete&&r().createElement(o.TableCell,{align:"left",style:ne(ne({},i),Ae.buttonCell)},!s&&!this.state.orderBy?u?r().createElement(o.Tooltip,{title:l.I18n.t("ra_Move up"),componentsProps:{popper:{sx:Ae.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:()=>this.onMoveUp(a)},r().createElement(c.ArrowUpward,null))):r().createElement("div",{style:Ae.buttonEmpty}):null,!s&&!this.state.orderBy?u<t.length-1?r().createElement(o.Tooltip,{title:l.I18n.t("ra_Move down"),componentsProps:{popper:{sx:Ae.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:()=>this.onMoveDown(a)},r().createElement(c.ArrowDownward,null))):r().createElement("div",{style:Ae.buttonEmpty}):null,r().createElement(o.Tooltip,{title:l.I18n.t("ra_Delete current row"),componentsProps:{popper:{sx:Ae.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:this.onDelete(a)},r().createElement(c.Delete,null))),this.props.schema.clone?r().createElement(o.Tooltip,{title:l.I18n.t("ra_Clone current row"),componentsProps:{popper:{sx:Ae.tooltip}}},r().createElement(o.IconButton,{size:"small",onClick:this.onClone(a)},r().createElement(c.ContentCopy,null))):null))),!e.noDelete&&t.length>=(e.showSecondAddAt||5)?r().createElement(o.TableRow,null,r().createElement(o.TableCell,{colSpan:e.items.length+1,style:ne({},i)},r().createElement(o.Tooltip,{title:s?l.I18n.t("ra_Cannot add items with set filter"):l.I18n.t("ra_Add row"),componentsProps:{popper:{sx:Ae.tooltip}}},r().createElement("span",null,r().createElement(o.IconButton,{size:"small",color:"primary",disabled:!!s&&!this.props.schema.allowAddByFilter,onClick:this.onAdd},r().createElement(c.Add,null)))))):null)),!t.length&&this.state.value.length?r().createElement("div",{style:Ae.filteredOut},r().createElement(o.Typography,{style:Ae.title,variant:"h6",id:"tableTitle",component:"div"},l.I18n.t("ra_All items are filtered out"),r().createElement(o.IconButton,{size:"small",onClick:()=>this.applyFilter(!0)},r().createElement(c.Close,null)))):null),e.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null,this.state.errorMessage?r().createElement("div",{style:{display:"flex",padding:"5px"}},r().createElement(c.Warning,{color:"error"}),r().createElement("span",{style:{color:"red",alignSelf:"center"}},this.state.errorMessage)):null)}}const Ds=He,Wt={indeterminate:{opacity:.5},label:{width:"100%",fontSize:16},helper:{width:"100%",fontSize:12},error:{width:"100%",fontSize:12,color:"#FF0000"}};class vs extends m{constructor(){super(...arguments);te(this,"updateTimeout",null)}componentDidMount(){super.componentDidMount();let e=m.getValue(this.props.data,this.props.attr);if(Array.isArray(e)&&this.props.multiEdit){e=m.DIFFERENT_VALUE,this.setState({value:e,oldValue:e});return}this.setState({value:e,oldValue:e})}static getDerivedStateFromProps(e,t){if(e.multiEdit&&t.value===m.DIFFERENT_VALUE)return m.DIFFERENT_VALUE;let s=m.getValue(e.data,e.attr);return s!=null&&(s=s.toString()),s==null||s!==t.value&&s!==t.oldValue?{value:s}:null}renderItem(e,t){const s=Array.isArray(this.state.value)||this.state.value===m.DIFFERENT_VALUE;if(this.state.oldValue!==null&&this.state.oldValue!==void 0?(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.updateTimeout=null,this.setState({oldValue:null})},30)):this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=null),s){const i=m.getValue(this.props.data,this.props.attr),a=(i==null?void 0:i.filter(u=>u||u===0).map(u=>({label:u.toString()||"",value:u})))||[];return a.unshift({label:l.I18n.t(m.DIFFERENT_LABEL),value:m.DIFFERENT_VALUE}),r().createElement(o.Autocomplete,{style:Wt.indeterminate,fullWidth:!0,value:a[0],onChange:(u,p)=>{const V=p?p.value:"";this.onChange(this.props.attr,V,()=>{this.setState({value:V,oldValue:V})})},options:a,getOptionLabel:u=>u.label,renderInput:u=>r().createElement(o.TextField,Ne(ne({variant:"standard"},u),{error:!!e,placeholder:this.getText(this.props.schema.placeholder),inputProps:Ne(ne({},u.inputProps),{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.props.schema.readOnly||!1}),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:!!t}))})}if(this.props.schema.minRows>1){const i=this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation);return r().createElement("div",{style:{width:"100%"}},this.props.schema.label?r().createElement("div",{style:Wt.label},this.getText(this.props.schema.label)):null,r().createElement(o.TextareaAutosize,{style:{width:"100%",resize:"vertical",backgroundColor:this.props.themeType==="dark"?"#363636":"#cccccc",color:this.props.themeType==="dark"?"#fff":"#111"},minRows:this.props.schema.minRows,maxRows:this.props.schema.maxRows,value:this.state.value===null||this.state.value===void 0?"":this.state.value,disabled:!!t,readOnly:this.props.schema.readOnly||!1,onChange:a=>{const u=a.target.value;this.setState({value:u,oldValue:this.state.value},()=>this.onChange(this.props.attr,u||""))},placeholder:this.getText(this.props.schema.placeholder)}),i||e?r().createElement("div",{style:e?Wt.error:Wt.helper},e||i):null)}return r().createElement(o.TextField,{variant:"standard",fullWidth:!0,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!e,disabled:!!t,inputProps:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.props.schema.readOnly||!1},InputProps:{endAdornment:this.state.value&&!this.props.schema.noClearButton?r().createElement(o.InputAdornment,{position:"end"},r().createElement(o.IconButton,{size:"small",onClick:()=>this.setState({value:"",oldValue:this.state.value},()=>this.onChange(this.props.attr,""))},r().createElement(c.Close,null))):null},onChange:i=>{const a=i.target.value;this.setState({value:a,oldValue:this.state.value},()=>this.onChange(this.props.attr,a))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const Cs=vs,ys={fullWidth:{width:"100%"}};class Es extends m{constructor(){super(...arguments);te(this,"initialized",!1);te(this,"_context")}askInstance(){if(this.props.alive){let e=this.props.schema.data;if(e===void 0&&this.props.schema.jsonData){const t=this.getPattern(this.props.schema.jsonData);try{e=JSON.parse(t)}catch(s){console.error(`Cannot parse json data: ${t}`)}}e===void 0&&(e=null),this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,this.props.schema.command||"send",e).then(t=>this.setState({text:t||""}))}}getContext(){const e={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(t=>e[t]=m.getValue(this.props.data,t)),JSON.stringify(e)}renderItem(){if(this.props.alive){const e=this.getContext();(e!==this._context||!this.initialized)&&(this._context=e,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}return this.state.text===void 0?null:this.props.schema.container==="text"?r().createElement(o.TextField,{variant:"standard",fullWidth:!0,InputProps:{endAdornment:this.props.schema.copyToClipboard?r().createElement(o.IconButton,{size:"small",onClick:()=>{l.Utils.copyToClipboard(this.state.text),window.alert("Copied")}},r().createElement(l.IconCopy,null)):void 0},value:this.state.text,label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}):r().createElement("div",{style:ys.fullWidth},this.state.text)}}const bs=Es;class ws extends m{componentDidMount(){super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);this.setState({value:n})}renderItem(n,e){const t=this.props.schema.returnFormat!=="HH:mm:ss",s=new Date(Date.parse(`Thu, 01 Jan 1970 ${this.state.value||"00:00:00"}`));return r().createElement(Ke.TimePicker,{sx:i=>({width:"100%",borderBottom:`1px solid ${i.palette.text.primary}`,"& fieldset":{display:"none"},"& input":{padding:`${i.spacing(1.5)} 0 4px 0`},"& .MuiInputAdornment-root":{marginLeft:0,marginTop:1},"& label":{transform:"translate(0px, -9px) scale(0.75)"}}),ampm:this.props.systemConfig.dateFormat.includes("/"),timeSteps:this.props.schema.timeSteps||this.props.schema.timesteps||{hours:1,minutes:5,seconds:5},format:this.props.schema.format||"HH:mm:ss",disabled:!!e,value:s,onChange:i=>{let a;a=i instanceof Date?i.toTimeString().split(" ")[0]:i.toTimeString(),t&&(a=a.split(":").slice(0,2).join(":")),this.setState({value:a},()=>this.onChange(this.props.attr,this.state.value))},views:this.props.schema.views||["hours","minutes","seconds"],label:this.getText(this.props.schema.label)})}}function xs(L,n){let e;return n&&L.substring(0,n.length)===n?e=L.substring(n.length+1):e=L,e=e.replace(/\./g,"/").replace(/_/g," "),e}class As extends m{componentDidMount(){var e;super.componentDidMount();const n=m.getValue(this.props.data,this.props.attr);if(!n&&((e=this.props.customObj)!=null&&e._id)){const t=xs(this.props.customObj._id,`${this.props.adapterName}.${this.props.instance}`);this.setState({value:t})}else this.setState({value:n||""})}renderItem(n,e){return r().createElement(o.TextField,{variant:"standard",fullWidth:!0,inputProps:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0},value:this.state.value,error:!!n,disabled:e,placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),onChange:t=>{const s=t.target.value;this.setState({value:s},()=>this.onChange(this.props.attr,s))}})}}const Fs=As;class hn extends m{componentDidMount(){return fe(this,null,function*(){var e;Ue(hn.prototype,this,"componentDidMount").call(this);const n=yield this.props.socket.getObject("system.meta.uuid");this.setState({uuid:((e=n==null?void 0:n.native)==null?void 0:e.uuid)||"unknown"})})}renderItem(n,e){return r().createElement(o.TextField,{variant:"standard",fullWidth:!0,error:!!n,disabled:!!e,inputProps:{readOnly:!0},InputProps:{endAdornment:r().createElement(o.IconButton,{onClick:()=>{l.Utils.copyToClipboard(this.state.uuid),window.alert(l.I18n.t("ra_Copied %s",this.state.uuid))}},r().createElement(c.ContentCopy,null))},value:this.state.uuid||"",label:this.getText(this.props.schema.label)||l.I18n.t("ra_Serial number (UUID)"),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const Ss=hn,Sn={icon:{width:16,height:16,marginRight:8}};class Ts extends m{componentDidMount(){super.componentDidMount(),this.props.socket.getUsers().then(n=>{const e={},t=l.I18n.getLanguage();this.props.schema.short?n.forEach(s=>{var i,a;return e[s._id]={color:(i=s.common)==null?void 0:i.color,icon:(a=s.common)==null?void 0:a.icon,name:l.Utils.getObjectNameFromObj(s,t)}}):n.forEach(s=>{var i,a;return e[s._id.replace(/^system\.user\./,"")]={color:(i=s.common)==null?void 0:i.color,icon:(a=s.common)==null?void 0:a.icon,name:l.Utils.getObjectNameFromObj(s,t)}}),this.setState({users:e})})}renderItem(n,e){var s,i;const t=m.getValue(this.props.data,this.props.attr);return r().createElement(o.FormControl,{variant:"standard",fullWidth:!0},this.state.users&&this.props.schema.label?r().createElement(o.InputLabel,null,this.getText(this.props.schema.label)):null,this.state.users?r().createElement(o.Select,{variant:"standard",error:!!n,disabled:!!e,value:t,renderValue:a=>{var u,p,V;return r().createElement("span",null,this.state.users&&((u=this.state.users[a])!=null&&u.icon)?r().createElement(l.Icon,{src:this.state.users&&((p=this.state.users[a])==null?void 0:p.icon),style:Sn.icon}):null,this.state.users&&((V=this.state.users[a])==null?void 0:V.name)||a||"")},style:{color:this.state.users&&((s=this.state.users[t])==null?void 0:s.color)||void 0,backgroundColor:l.Utils.getInvertedColor(this.state.users&&((i=this.state.users[t])==null?void 0:i.color),this.props.themeType)},onChange:a=>this.onChange(this.props.attr,a.target.value)},this.state.users&&Object.keys(this.state.users).map(a=>r().createElement(o.MenuItem,{style:{color:this.state.users[a].color||void 0,backgroundColor:l.Utils.getInvertedColor(this.state.users[a].color,this.props.themeType)},key:a,value:a},this.state.users[a].icon?r().createElement(l.Icon,{src:this.state.users[a].icon,style:Sn.icon}):null,this.state.users[a].name))):r().createElement(o.TextField,{variant:"standard",error:!!n,disabled:!!e,value:t,onChange:a=>this.onChange(this.props.attr,a.target.value),label:this.getText(this.props.schema.label)}),this.props.schema.help?r().createElement(o.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const _s=Ts;var Is=$(10732);class ks extends m{renderItem(){return r().createElement(Is.Ay,{value:this.props.schema.data,size:this.props.schema.size,fgColor:this.props.schema.fgColor,bgColor:this.props.schema.bgColor,level:this.props.schema.level})}}const Bs={accordion:h,alive:A,autocomplete:P,autocompleteSendTo:N,certCollection:j,certificate:Z,certificates:J,checkbox:ze,checkLicense:ge,chip:wt,chips:wt,color:Bt,coordinates:vt,cron:W,custom:xt,datePicker:H,deviceManager:we,divider:ls,file:U,fileSelector:Ut,func:se,header:cs,image:ot,imageSendTo:Me,instance:Ge,interface:Tt,ip:De,jsonEditor:On,language:$n,license:Rn,number:Vn,objectId:Un,password:Jn,pattern:zn,port:Kn,qrCode:ks,room:Yn,select:qn,selectSendTo:ts,sendto:En,sendTo:En,setState:rs,slider:os,staticImage:ps,staticLink:An,staticText:An,table:Ds,text:Cs,textSendTo:bs,timePicker:ws,topic:Fs,uuid:Ss,user:_s},nt={fullWidth:{width:"100%"},paper:{margin:1,width:"auto !important",overflowY:"auto",paddingBottom:1},paperWithIcons:{height:"calc(100vh - 259px) !important"},paperWithoutIcons:{height:"calc(100vh - 235px) !important"},padding:{padding:"10px"},heading:{},primary:L=>({backgroundColor:L.palette.primary.main,color:L.palette.mode==="dark"?"inherit":"#FFF"}),secondary:L=>({backgroundColor:L.palette.secondary.main})};class pn extends m{componentDidMount(){super.componentDidMount(),this.props.schema&&this.props.schema.collapsable&&this.setState({expanded:(window._localStorage||window.localStorage).getItem(`${this.props.adapterName}.${this.props.attr}`)==="true"})}renderItems(n,e){return n?Object.keys(n).map(t=>{if(this.props.multiEdit&&n[t].noMultiEdit)return null;const s=n[t].type||"panel";let i;return s==="custom"?n[t].url?i=xt:this.props.customs&&this.props.customs[n[t].component]?i=this.props.customs[n[t].component]:(console.error(`Cannot find custom component: ${n[t].component}`),i=m):s==="panel"?i=pn:i=Bs[s]||m,r().createElement(i,{key:`${t}_${this.props.index===void 0?"":this.props.index}`,index:this.props.index,changed:this.props.changed,arrayIndex:this.props.arrayIndex,globalData:this.props.globalData,onCommandRunning:this.props.onCommandRunning,commandRunning:this.props.commandRunning,style:nt.panel,socket:this.props.socket,adapterName:this.props.adapterName,instance:this.props.instance,common:this.props.common,customs:this.props.customs,alive:this.props.alive,themeType:this.props.themeType,themeName:this.props.themeName,theme:this.props.theme,data:this.props.data,originalData:this.props.originalData,systemConfig:this.props.systemConfig,onError:this.props.onError,onChange:this.props.onChange,multiEdit:this.props.multiEdit,dateFormat:this.props.dateFormat,isFloatComma:this.props.isFloatComma,disabled:e,imagePrefix:this.props.imagePrefix,changeLanguage:this.props.changeLanguage,forceUpdate:this.props.forceUpdate,registerOnForceUpdate:this.props.registerOnForceUpdate,customObj:this.props.customObj,instanceObj:this.props.instanceObj,custom:this.props.custom,schema:n[t],DeviceManager:this.props.DeviceManager,attr:t,table:this.props.table})}):null}render(){const n=this.props.schema;if(!n)return null;const{disabled:e,hidden:t}=this.calculate(n),s=this.props.schema.items,i=this.props.schema.style||{};if(t){if(n.hideOnlyControl){const u=r().createElement(o.Grid,{item:!0,xs:n.xs||void 0,lg:n.lg||void 0,md:n.md||void 0,sm:n.sm||void 0,sx:X.getStyle(this.props.theme,{marginBottom:0,textAlign:"left"},i,this.props.themeType==="dark"&&n.darkStyle)});return n.newLine?r().createElement(r().Fragment,null,r().createElement("div",{style:{flexBasis:"100%",height:0}}),u):u}return null}if(this.props.table)return this.renderItems(s,e);if(this.props.custom)return r().createElement(o.Grid,{key:`${this.props.attr}_${this.props.index}`,container:!0,style:nt.fullWidth,spacing:2,sx:i},this.renderItems(s,e));let a;if(n.collapsable?a=r().createElement(o.Accordion,{key:`${this.props.attr}_${this.props.index}`,style:nt.fullWidth,expanded:!!this.state.expanded,onChange:()=>{(window._localStorage||window.localStorage).setItem(`${this.props.adapterName}.${this.props.attr}`,this.state.expanded?"false":"true"),this.setState({expanded:!this.state.expanded})}},r().createElement(o.AccordionSummary,{expandIcon:r().createElement(c.ExpandMore,null),sx:X.getStyle(this.props.theme,i,this.props.themeType&&n.darkStyle,n.color==="primary"?nt.primary:n.color==="secondary"&&nt.secondary,{width:"100%"})},r().createElement(o.Typography,{style:nt.heading},this.getText(n.label))),r().createElement(o.AccordionDetails,null,r().createElement(o.Grid,{container:!0,spacing:2,sx:Ne(ne({},i),{width:"100%",padding:"10px"})},this.renderItems(s,e)))):a=r().createElement(o.Box,{component:"div",key:`${this.props.attr}_${this.props.index}`,className:this.props.className,sx:X.getStyle(this.props.theme,this.props.style,i,{width:"100%"},this.props.isParentTab&&nt.paper,this.props.isParentTab&&(this.props.withIcons?nt.paperWithIcons:nt.paperWithoutIcons))},r().createElement(o.Grid,{container:!0,spacing:2,sx:X.getStyle(this.props.theme,{width:"100%"},this.props.isParentTab&&nt.padding,this.props.schema.innerStyle)},this.renderItems(s,e))),!this.props.isParentTab){const u=r().createElement(o.Grid,{item:!0,title:this.getText(n.tooltip),xs:n.xs||void 0,lg:n.lg||void 0,md:n.md||void 0,sm:n.sm||void 0,sx:ne({marginBottom:0,textAlign:"left"},i)},a);return n.newLine?r().createElement(r().Fragment,null,r().createElement("div",{style:{flexBasis:"100%",height:0}}),u):u}return a}}const $t=pn,Jt={tabs:{height:"100%",width:"100%"},panel:{width:"100%",display:"block"},panelWithIcons:{height:"calc(100% - 72px)"},panelWithoutIcons:{height:"calc(100% - 48px)"}};class Os extends m{constructor(n){super(n);let e=(window._localStorage||window.localStorage).getItem(`${this.props.dialogName||"App"}.${this.props.adapterName}`)||Object.keys(this.props.schema.items)[0];Object.keys(this.props.schema.items).includes(e)||(e=Object.keys(this.props.schema.items)[0]),Object.assign(this.state,{tab:e})}render(){const n=this.props.schema.items;let e=!1;return r().createElement("div",{style:Jt.tabs},r().createElement(o.Tabs,{variant:"scrollable",scrollButtons:"auto",style:this.props.schema.tabsStyle,value:this.state.tab,onChange:(t,s)=>{(window._localStorage||window.localStorage).setItem(`${this.props.dialogName||"App"}.${this.props.adapterName}`,s),this.setState({tab:s})}},Object.keys(n).map(t=>{let s;if(this.props.custom){if(this.executeCustom(n[t].hidden,this.props.data,this.props.customObj,this.props.instanceObj,this.props.index,this.props.globalData))return null;s=this.executeCustom(n[t].disabled,this.props.data,this.props.customObj,this.props.instanceObj,this.props.index,this.props.globalData)}else{if(this.execute(n[t].hidden,!1,this.props.data,this.props.index,this.props.globalData))return null;s=this.execute(n[t].disabled,!1,this.props.data,this.props.index,this.props.globalData)}const i=this.getIcon(n[t].icon);return e=e||!!i,r().createElement(o.Tab,{wrapped:!0,disabled:s,key:t,value:t,iconPosition:this.props.schema.iconPosition||"start",icon:i,label:this.getText(n[t].label)})})),r().createElement($t,{isParentTab:!0,changed:this.props.changed,key:this.state.tab,index:1001,arrayIndex:this.props.arrayIndex,globalData:this.props.globalData,onCommandRunning:this.props.onCommandRunning,commandRunning:this.props.commandRunning,style:ne(ne({},Jt.panel),e?Jt.panelWithIcons:Jt.panelWithoutIcons),socket:this.props.socket,adapterName:this.props.adapterName,instance:this.props.instance,common:this.props.common,customs:this.props.customs,alive:this.props.alive,themeType:this.props.themeType,themeName:this.props.themeName,data:this.props.data,originalData:this.props.originalData,systemConfig:this.props.systemConfig,onError:this.props.onError,onChange:this.props.onChange,multiEdit:this.props.multiEdit,dateFormat:this.props.dateFormat,isFloatComma:this.props.isFloatComma,imagePrefix:this.props.imagePrefix,changeLanguage:this.props.changeLanguage,forceUpdate:this.props.forceUpdate,registerOnForceUpdate:this.props.registerOnForceUpdate,customObj:this.props.customObj,instanceObj:this.props.instanceObj,custom:this.props.custom,schema:n[this.state.tab],table:this.props.table,theme:this.props.theme,DeviceManager:this.props.DeviceManager,withIcons:e}))}}const Ls=Os,Ns={root:{width:"100%",height:"100%"}};class $s extends b.Component{constructor(e){super(e);te(this,"forceUpdateHandlers");te(this,"errorTimeout",null);te(this,"errorCached",null);te(this,"onCommandRunning",e=>this.setState({commandRunning:e}));te(this,"onAlive",(e,t)=>{!!(t!=null&&t.val)!==this.state.alive&&this.setState({alive:!!(t!=null&&t.val)})});te(this,"onChange",(e,t,s,i)=>{if(this.props.onValueChange)this.props.onValueChange(e,t,i),s&&s();else if(e&&this.props.onChange){const a={data:e};a.changed=JSON.stringify(e)!==this.state.originalData,this.setState(a,()=>{this.props.onChange(e,a.changed,i),s&&s()})}else i&&this.props.onChange(null,null,i)});te(this,"onError",(e,t)=>{this.errorCached=this.errorCached||JSON.parse(JSON.stringify(this.state.errors));const s=this.errorCached;t?s[e]=t:delete s[e],this.errorTimeout&&clearTimeout(this.errorTimeout),JSON.stringify(s)!==JSON.stringify(this.state.errors)?this.errorTimeout=setTimeout(()=>this.setState({errors:this.errorCached},()=>{this.errorTimeout=null,this.errorCached=null,this.props.onError(!!Object.keys(this.state.errors).length)}),50):this.errorCached=null});te(this,"changeLanguage",()=>{this.forceUpdate()});te(this,"forceAttrUpdate",(e,t)=>{Array.isArray(e)?e.forEach(s=>this.forceUpdateHandlers[s]&&this.forceUpdateHandlers[s](t)):this.forceUpdateHandlers[e]&&this.forceUpdateHandlers[e](t)});te(this,"registerOnForceUpdate",(e,t)=>{t?this.forceUpdateHandlers[e]=t:this.forceUpdateHandlers[e]&&delete this.forceUpdateHandlers[e]});this.state={originalData:JSON.stringify(this.props.data),changed:!1,errors:{},updateData:this.props.updateData||0,systemConfig:null,alive:!1,commandRunning:!1,schema:JSON.parse(JSON.stringify(this.props.schema)),data:null},this.forceUpdateHandlers={},this.buildDependencies(this.state.schema),this.readData()}static getDerivedStateFromProps(e,t){return e.updateData!==t.updateData?{updateData:e.updateData,originalData:JSON.stringify(e.data),schema:JSON.parse(JSON.stringify(e.schema))}:null}static loadI18n(e,t,s){return fe(this,null,function*(){if(t===!0||t&&typeof t=="string"){const i=l.I18n.getLanguage(),a=typeof t=="string"?t:"i18n";let u=yield e.fileExists(`${s}.admin`,`${a}/${i}.json`),p;if(u?p=`${a}/${i}.json`:(u=yield e.fileExists(`${s}.admin`,`${a}/${i}/translations.json`),u?p=`${a}/${i}/translations.json`:i!=="en"&&(u=yield e.fileExists(`${s}.admin`,`${a}/en.json`),u?p=`${a}/en.json`:(u=yield e.fileExists(`${s}.admin`,`${a}/en/translations.json`),u&&(p=`${a}/en/translations.json`)))),p){const V=yield e.readFile(`${s}.admin`,p);let K;V.file!==void 0?K=V.file:K=V;try{const G=JSON.parse(K);l.I18n.extendTranslations(G,i)}catch(G){return console.error(`Cannot parse language file "${s}.admin/${p}: ${G}`),""}return p}return console.warn(`Cannot find i18n for ${s} / ${p}`),""}return t&&typeof t=="object"&&l.I18n.extendTranslations(t),""})}readSettings(){return fe(this,null,function*(){if((this.props.custom||this.props.common)&&this.props.data)return;const e=yield this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`);this.setState({data:this.props.data||e.native})})}readData(){this.readSettings().then(()=>this.props.socket.getCompactSystemConfig()).then(e=>this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(t=>{this.props.custom?this.setState({systemConfig:e.common,alive:!!(t&&t.val)}):this.setState({systemConfig:e.common,alive:!!(t&&t.val)},()=>this.props.socket.subscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`,this.onAlive))}))}flatten(e,t){return t=t||{},e.items&&Object.keys(e.items).forEach(s=>{t[s]=e.items[s],this.flatten(e.items[s],t)}),t}buildDependencies(e){const t=this.flatten(e);Object.keys(t).forEach(s=>{var i,a,u,p,V,K,G,q,ce,Ee;(i=t[s].confirm)!=null&&i.alsoDependsOn&&((a=t[s].confirm)==null||a.alsoDependsOn.forEach(re=>{if(!t[re])console.error(`[JsonConfigComponent] Attribute ${re} does not exist!`),re.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${re.replace(/^data\./,"")}" instead of "${re}"`);else{t[re].confirmDependsOn=t[re].confirmDependsOn||[];const ye=Ne(ne({},t[s]),{attr:s});ye.confirm&&(ye.confirm.cancel="Undo"),t[re].confirmDependsOn.push(ye)}})),(u=t[s].onChange)!=null&&u.alsoDependsOn&&((p=t[s].onChange)==null||p.alsoDependsOn.forEach(re=>{if(!t[re])console.error(`[JsonConfigComponent] Attribute ${re} does not exist!`),re.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${re.replace(/^data\./,"")}" instead of "${re}"`);else{t[re].onChangeDependsOn=t[re].onChangeDependsOn||[];const ye=Ne(ne({},t[s]),{attr:s});t[re].onChangeDependsOn.push(ye)}})),(V=t[s].hidden)!=null&&V.alsoDependsOn&&((K=t[s].hidden)==null||K.alsoDependsOn.forEach(re=>{if(!t[re])console.error(`[JsonConfigComponent] Attribute ${re} does not exist!`),re.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${re.replace(/^data\./,"")}" instead of "${re}"`);else{t[re].hiddenDependsOn=t[re].hiddenDependsOn||[];const ye=Ne(ne({},t[s]),{attr:s});t[re].hiddenDependsOn.push(ye)}})),(G=t[s].label)!=null&&G.alsoDependsOn&&((q=t[s].label)==null||q.alsoDependsOn.forEach(re=>{if(!t[re])console.error(`[JsonConfigComponent] Attribute ${re} does not exist!`),re.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${re.replace(/^data\./,"")}" instead of "${re}"`);else{t[re].labelDependsOn=t[re].labelDependsOn||[];const ye=Ne(ne({},t[s]),{attr:s});t[re].labelDependsOn.push(ye)}})),(ce=t[s].help)!=null&&ce.alsoDependsOn&&((Ee=t[s].help)==null||Ee.alsoDependsOn.forEach(re=>{if(!t[re])console.error(`[JsonConfigComponent] Attribute ${re} does not exist!`),re.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${re.replace(/^data\./,"")}" instead of "${re}"`);else{t[re].helpDependsOn=t[re].helpDependsOn||[];const ye=Ne(ne({},t[s]),{attr:s});t[re].helpDependsOn.push(ye)}}))})}renderItem(e){return e.type==="tabs"?r().createElement(Ls,{onCommandRunning:this.onCommandRunning,commandRunning:this.state.commandRunning,socket:this.props.socket,adapterName:this.props.adapterName,instance:this.props.instance,common:this.props.common,alive:this.state.alive,themeType:this.props.themeType,themeName:this.props.themeName,data:this.props.data,originalData:JSON.parse(this.state.originalData),schema:e,systemConfig:this.state.systemConfig,customs:this.props.customs,dateFormat:this.props.dateFormat,isFloatComma:this.props.isFloatComma,multiEdit:this.props.multiEdit,imagePrefix:this.props.imagePrefix,custom:this.props.custom,customObj:this.props.customObj,instanceObj:this.props.instanceObj,changeLanguage:this.changeLanguage,forceUpdate:this.forceAttrUpdate,registerOnForceUpdate:this.registerOnForceUpdate,onChange:this.onChange,changed:this.state.changed,onError:(t,s)=>this.onError(t,s),DeviceManager:this.props.DeviceManager,theme:this.props.theme}):e.type==="panel"||!e.type?r().createElement($t,{index:1e3,isParentTab:!this.props.embedded,changed:this.state.changed,onCommandRunning:this.onCommandRunning,commandRunning:this.state.commandRunning,socket:this.props.socket,adapterName:this.props.adapterName,instance:this.props.instance,common:this.props.common,alive:this.state.alive,themeType:this.props.themeType,themeName:this.props.themeName,data:this.props.data,originalData:JSON.parse(this.state.originalData),schema:e,systemConfig:this.state.systemConfig,customs:this.props.customs,dateFormat:this.props.dateFormat,isFloatComma:this.props.isFloatComma,multiEdit:this.props.multiEdit,imagePrefix:this.props.imagePrefix,custom:this.props.custom,customObj:this.props.customObj,instanceObj:this.props.instanceObj,changeLanguage:this.changeLanguage,forceUpdate:this.forceAttrUpdate,registerOnForceUpdate:this.registerOnForceUpdate,onChange:this.onChange,onError:(t,s)=>this.onError(t,s),DeviceManager:this.props.DeviceManager,theme:this.props.theme}):null}render(){return this.state.systemConfig?r().createElement("div",{style:ne(ne(ne({},this.props.embedded?void 0:Ns.root),this.props.style),this.state.schema.style)},this.renderItem(this.state.schema)):r().createElement(o.LinearProgress,null)}}const Ht=$s,yt={root:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},scroll:{height:"calc(100% - 48px)",overflowY:"auto"},exportImportButtons:{position:"absolute",top:5,right:0,zIndex:3},button:{marginRight:"5px"},tooltip:{pointerEvents:"none"}};function Ps(L,n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(L[t%L.length].charCodeAt(0)^n.charCodeAt(t));return e}function Rs(L,n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(L[t%L.length].charCodeAt(0)^n.charCodeAt(t));return e}function Ms(L,n){if(typeof n!="string")return n;if(!n.startsWith("$/aes-192-cbc:")||!/^[0-9a-f]{48}$/.test(L))return Ps(L,n);const e=n.split(":",3),t=window.CryptoJS.enc.Hex.parse(L),s=window.CryptoJS.enc.Hex.parse(e[1]),i=window.CryptoJS.lib.CipherParams.create({ciphertext:window.CryptoJS.enc.Hex.parse(e[2])}),a=window.CryptoJS.AES.decrypt(i,t,{iv:s});return window.CryptoJS.enc.Utf8.stringify(a)}function Vs(L,n,e){if(typeof n!="string")return n;if(!/^[0-9a-f]{48}$/.test(L))return Rs(L,n);let t;e?t=window.CryptoJS.enc.Hex.parse(e):t=window.CryptoJS.lib.WordArray.random(128/8);const s=window.CryptoJS.enc.Hex.parse(L),i=window.CryptoJS.AES.encrypt(n,s,{iv:t}).ciphertext;return`$/aes-192-cbc:${window.CryptoJS.enc.Hex.stringify(t)}:${i}`}function Tn(L,n){var e;return!n||!document.getElementById(n)?new Promise(t=>{const s=document.createElement("script");s.setAttribute("id",n),s.onload=t,s.src=L,document.getElementsByTagName("head")[0].appendChild(s)}):(e=document.getElementById(n))==null?void 0:e.onload}class dn extends l.Router{constructor(e){super(e);te(this,"fileSubscribed",[]);te(this,"fileLangSubscribed","");te(this,"secret");te(this,"handleFileSelect",e=>{const t=e.target.files[0];if(t){const s=new FileReader;s.onload=i=>fe(this,null,function*(){if(!i.target)return;const a=i.target.result;try{const u=JSON.parse(a);this.setState({data:u,changed:JSON.stringify(u)!==JSON.stringify(this.state.originalData)})}catch(u){window.alert(l.I18n.t("[JsonConfig] Failed to parse JSON file"))}}),s.readAsText(t)}else window.alert(l.I18n.t("[JsonConfig] Failed to open JSON File"))});te(this,"onFileChange",(e,t,s)=>fe(this,null,function*(){var i;if(e===`${this.props.adapterName}.admin`&&s){if(t===this.fileLangSubscribed)try{yield Ht.loadI18n(this.props.socket,(i=this.state.schema)==null?void 0:i.i18n,this.props.adapterName),this.setState({hash:`${this.state.hash}1`})}catch(a){}else if(this.fileSubscribed.includes(t))try{const a=yield this.getConfigFile(this.fileSubscribed[0]);this.setState({schema:a,hash:f()(JSON.stringify(a))})}catch(a){}}}));this.state={updateData:0,changed:!1,confirmDialog:!1,theme:(0,l.Theme)(e.themeName),saveConfigDialog:!1,hash:"_"},this.secret=e.secret||"",this.getInstanceObject().then(t=>this.getConfigFile().then(s=>Ht.loadI18n(this.props.socket,s==null?void 0:s.i18n,this.props.adapterName).then(i=>{i&&(this.fileLangSubscribed||(this.fileLangSubscribed=i,this.props.socket.subscribeFiles(`${this.props.adapterName}.admin`,this.fileLangSubscribed,this.onFileChange))),t?this.setState({schema:s,data:t.native,common:t.common,hash:f()(JSON.stringify(s))}):window.alert(`Instance system.adapter.${this.props.adapterName}.${this.props.instance} not found!`)})))}componentWillUnmount(){return fe(this,null,function*(){Ue(dn.prototype,this,"componentWillUnmount").call(this),this.fileSubscribed.length&&(this.props.socket.unsubscribeFiles(`${this.props.adapterName}.admin`,this.fileSubscribed,this.onFileChange),this.fileSubscribed=[]),this.fileLangSubscribed&&(this.props.socket.unsubscribeFiles(`${this.props.adapterName}.admin`,this.fileLangSubscribed,this.onFileChange),this.fileLangSubscribed="")})}getExportImportButtons(){return r().createElement("div",{style:yt.exportImportButtons},r().createElement(o.Tooltip,{title:this.props.t("Import settings from JSON file"),componentsProps:{popper:{sx:yt.tooltip}}},r().createElement(o.Fab,{size:"small",sx:{"&.MuiFab-root":yt.button},onClick:()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","files"),e.setAttribute("opacity",0),e.addEventListener("change",t=>this.handleFileSelect(t),!1),e.click()}},r().createElement(c.Publish,null))),r().createElement(o.Tooltip,{title:this.props.t("Export setting to JSON file"),componentsProps:{popper:{sx:yt.tooltip}}},r().createElement(o.Fab,{size:"small",sx:{"&.MuiFab-root":yt.button},onClick:()=>{this.state.data&&X.generateFile(`${this.props.adapterName}.${this.props.instance}.json`,this.state.data)}},r().createElement(c.Publish,{style:{transform:"rotate(180deg)"}}))))}getInstanceObject(){return fe(this,null,function*(){var e;try{const t=yield this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`);if(Array.isArray(t.encryptedNative)){if(!this.secret){const s=yield this.props.socket.getSystemConfig();yield Tn("../../lib/js/crypto-js/crypto-js.js","crypto-js"),this.secret=s.native.secret}return(e=t.encryptedNative)==null||e.forEach(s=>{t.native[s]&&(t.native[s]=Ms(this.secret,t.native[s]))}),t}return t}catch(t){window.alert(`[JsonConfig] Cannot read instance object: ${t}`)}return null})}renderConfirmDialog(){return this.state.confirmDialog?r().createElement(l.Confirm,{title:l.I18n.t("ra_Please confirm"),text:l.I18n.t("ra_Some data are not stored. Discard?"),ok:l.I18n.t("ra_Discard"),cancel:l.I18n.t("ra_Cancel"),onClose:e=>this.setState({confirmDialog:!1},()=>e&&l.Router.doNavigate(null))}):null}scanForInclude(e,t){return fe(this,null,function*(){if(typeof e["#include"]=="string"){const i=yield this._getConfigFile(e["#include"],[...t]);return delete e["#include"],i&&(e=ne(ne({},e),i)),e}const s=Object.keys(e);for(let i=0;i<s.length;i++)e[s[i]]&&typeof e[s[i]]=="object"&&(e[s[i]]=yield this.scanForInclude(e[s[i]],t));return e})}getConfigFile(e){return fe(this,null,function*(){return this._getConfigFile(e)})}_getConfigFile(e,t){return fe(this,null,function*(){if(e=e||"jsonConfig.json5",t=t||[],t.includes(e))return window.alert(`[JsonConfig] Circular reference in file: ${e} => ${t.join(" => ")}`),null;t.push(e);try{(yield this.props.socket.fileExists(`${this.props.adapterName}.admin`,e))||(e="jsonConfig.json");const i=yield this.props.socket.readFile(`${this.props.adapterName}.admin`,e);let a="",u="";if(i.file!==void 0&&(u=i.file),typeof u=="string")a=u;else if(u.type==="Buffer"){let p="";const V=new Uint8Array(u.data),K=V.byteLength;for(let G=0;G<K;G++)p+=String.fromCharCode(V[G]);a=p}this.fileSubscribed.includes(e)||(this.fileSubscribed.push(e),yield this.props.socket.subscribeFiles(`${this.props.adapterName}.admin`,e,this.onFileChange));try{return yield this.scanForInclude(d().parse(a),t)}catch(p){window.alert("[JsonConfig] Cannot parse json5 config!"),console.log(p)}}catch(s){!this.state.schema&&window.alert(`[JsonConfig] Cannot read file "${e}: ${s}`)}return null})}renderSaveConfigDialog(){return this.state.saveConfigDialog?r().createElement(l.Confirm,{title:l.I18n.t("ra_Please confirm"),text:l.I18n.t("Save configuration?"),ok:l.I18n.t("ra_Save"),cancel:l.I18n.t("ra_Cancel"),onClose:e=>this.setState({saveConfigDialog:!1},()=>e&&this.onSave(!0))}):null}findAttr(e,t){if(t=t||this.state.schema,t!=null&&t.items){if(e in t.items)return t.items[e];for(const s of Object.values(t.items)){const i=this.findAttr(e,s);if(i)return i}}return null}postProcessing(e,t,s){if(s=s||this.state.schema,!e){console.error(`Data is empty in postProcessing: ${t}, ${JSON.stringify(s)}`);return}const i=e[t];if(s.items)if(s.type==="table"){const a=i;if(!Array.isArray(a))return;for(const u of a)for(const p of s.items)this.postProcessing(u,p.attr,p)}else for(const[a,u]of Object.entries(s.items)){if(u.type==="panel"||u.type==="tabs"||u.type==="accordion")return;this.postProcessing(e,a,u)}else if(t&&typeof i=="string")if(s.type==="text")s.trim!==!1&&(e[t]=i.trim());else if(s.type==="ip")e[t]=i.trim();else if(s.type==="number"){const a=parseFloat(i.toString().replace(",","."));s.min!==void 0&&a<s.min?e[t]=s.min:s.max!==void 0&&a>s.max?e[t]=s.max:e[t]=a}else if(s.type==="port"){const a=parseInt(i.toString(),10);s.min!==void 0&&a<s.min?e[t]=s.min:s.max!==void 0&&a>s.max&&(e[t]=s.max),e[t]!==0&&a<20?e[t]=20:a>65535?e[t]=65535:e[t]=a}else s.type==="checkbox"&&(e[t]=e[t]===!0||e[t]==="true"||e[t]==="on"||e[t]===1||e[t]==="1")}onSave(e,t){return fe(this,null,function*(){if(e){const s=yield this.getInstanceObject();if(!s){console.error("Something went wrong: may be no connection?"),window.alert("Something went wrong: may be no connection?");return}if(!this.state.data||!this.state.schema)return;const i={};for(const u of Object.keys(this.state.data)){const p=this.findAttr(u);(!p||!p.doNotSave)&&!u.startsWith("_")?m.setValue(s.native,u,this.state.data[u]):(m.setValue(s.native,u,null),i[u]=this.state.data[u])}try{const u=JSON.parse(JSON.stringify(s));if(Array.isArray(u.encryptedNative)){yield Tn("../../lib/js/crypto-js/crypto-js.js","crypto-js");for(const p of u.encryptedNative)u.native[p]&&(u.native[p]=Vs(this.secret,u.native[p]))}yield this.props.socket.setObject(u._id,u)}catch(u){window.alert(`[JsonConfig] Cannot set object: ${u}`)}const a=ne(ne({},s.native),i);console.log(a),this.setState({changed:!1,data:a,updateData:this.state.updateData+1,originalData:a},()=>t&&l.Router.doNavigate(null))}else this.state.changed?this.setState({confirmDialog:!0}):l.Router.doNavigate(null)})}componentDidUpdate(e,t){t.changed!==this.state.changed&&this.props.configStored(!this.state.changed)}componentDidMount(){return fe(this,null,function*(){const e=`${window.location.protocol}//${window.location.host}${window.location.pathname}validate_config/${this.props.adapterName}`;console.log(`fetch ${e}`),yield fetch(e)})}render(){return!this.state.data||!this.state.schema?r().createElement(o.LinearProgress,null):r().createElement("div",{style:yt.root},this.renderConfirmDialog(),this.getExportImportButtons(),this.renderSaveConfigDialog(),r().createElement(Ht,{key:this.state.hash,style:yt.scroll,socket:this.props.socket,themeName:this.props.themeName,themeType:this.props.themeType,adapterName:this.props.adapterName,instance:this.props.instance,isFloatComma:this.props.isFloatComma,dateFormat:this.props.dateFormat,schema:this.state.schema,common:this.state.common,data:this.state.data,updateData:this.state.updateData,onError:e=>this.setState({error:e}),onChange:(e,t,s)=>{s&&this.state.error&&(window.alert(l.I18n.t("Cannot save configuration because of error in configuration")),s=!1),s&&!this.state.changed&&!t&&(s=!1),e?this.setState({data:e,changed:t,saveConfigDialog:s}):s!==void 0&&this.setState({saveConfigDialog:s})},DeviceManager:this.props.DeviceManager,theme:this.state.theme}),r().createElement(l.SaveCloseButtons,{isIFrame:!1,dense:!0,paddingLeft:0,newReact:!0,theme:this.state.theme,noTextOnButtons:this.props.width==="xs"||this.props.width==="sm"||this.props.width==="md",changed:!!(this.state.error||this.state.changed),error:!!this.state.error,onSave:e=>this.onSave(!0,e),onClose:()=>this.onSave(!1)}))}}const Us=dn},82292:(R,Y,$)=>{R=$.nmd(R),ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(b,r,D){"use strict";function d(h){var y=new Date().toLocaleString("en-us",h);return y.length==1?"0"+y:y}var C=b("./lib/dom"),f=b("./lib/oop"),o=b("./lib/event_emitter").EventEmitter,c=b("./lib/lang"),l=b("./range").Range,v=b("./range_list").RangeList,F=b("./keyboard/hash_handler").HashHandler,S=b("./tokenizer").Tokenizer,O=b("./clipboard"),k={CURRENT_WORD:function(h){return h.session.getTextRange(h.session.getWordRange())},SELECTION:function(h,y,g){var A=h.session.getTextRange();return g?A.replace(/\n\r?([ \t]*\S)/g,`
`+g+"$1"):A},CURRENT_LINE:function(h){return h.session.getLine(h.getCursorPosition().row)},PREV_LINE:function(h){return h.session.getLine(h.getCursorPosition().row-1)},LINE_INDEX:function(h){return h.getCursorPosition().row},LINE_NUMBER:function(h){return h.getCursorPosition().row+1},SOFT_TABS:function(h){return h.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(h){return h.session.getTabSize()},CLIPBOARD:function(h){return O.getText&&O.getText()},FILENAME:function(h){return/[^/\\]*$/.exec(this.FILEPATH(h))[0]},FILENAME_BASE:function(h){return/[^/\\]*$/.exec(this.FILEPATH(h))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(h){return this.FILEPATH(h).replace(/[^/\\]*$/,"")},FILEPATH:function(h){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(h){var y=h.session.$mode||{};return y.blockComment&&y.blockComment.start||""},BLOCK_COMMENT_END:function(h){var y=h.session.$mode||{};return y.blockComment&&y.blockComment.end||""},LINE_COMMENT:function(h){var y=h.session.$mode||{};return y.lineCommentStart||""},CURRENT_YEAR:d.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:d.bind(null,{year:"2-digit"}),CURRENT_MONTH:d.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:d.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:d.bind(null,{month:"short"}),CURRENT_DATE:d.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:d.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:d.bind(null,{weekday:"short"}),CURRENT_HOUR:d.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:d.bind(null,{minute:"2-digit"}),CURRENT_SECOND:d.bind(null,{second:"2-digit"})};k.SELECTED_TEXT=k.SELECTION;var B=function(){function h(){this.snippetMap={},this.snippetNameMap={},this.variables=k}return h.prototype.getTokenizer=function(){return h.$tokenizer||this.createTokenizer()},h.prototype.createTokenizer=function(){function y(x){return x=x.substr(1),/^\d+$/.test(x)?[{tabstopId:parseInt(x,10)}]:[{text:x}]}function g(x){return"(?:[^\\\\"+x+"]|\\\\.)"}var A={regex:"/("+g("/")+"+)/",onMatch:function(x,P,M){var N=M[0];return N.fmtString=!0,N.guard=x.slice(1,-1),N.flag="",""},next:"formatString"};return h.$tokenizer=new S({start:[{regex:/\\./,onMatch:function(x,P,M){var N=x[1];return(N=="}"&&M.length||"`$\\".indexOf(N)!=-1)&&(x=N),[x]}},{regex:/}/,onMatch:function(x,P,M){return[M.length?M.shift():x]}},{regex:/\$(?:\d+|\w+)/,onMatch:y},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(x,P,M){var N=y(x.substr(1));return M.unshift(N[0]),N},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+g("\\|")+"*\\|",onMatch:function(x,P,M){var N=x.slice(1,-1).replace(/\\[,|\\]|,/g,function(_){return _.length==2?_[1]:"\0"}).split("\0").map(function(_){return{value:_}});return M[0].choices=N,[N[0]]},next:"start"},A,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(x,P,M){return M.length&&M[0].expectElse?(M[0].expectElse=!1,M[0].ifEnd={elseEnd:M[0]},[M[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(x,P,M){var N=x[1];return N=="}"&&M.length||"`$\\".indexOf(N)!=-1?x=N:N=="n"?x=`
`:N=="t"?x="	":"ulULE".indexOf(N)!=-1&&(x={changeCase:N,local:N>"a"}),[x]}},{regex:"/\\w*}",onMatch:function(x,P,M){var N=M.shift();return N&&(N.flag=x.slice(1,-1)),this.next=N&&N.tabstopId?"start":"",[N||x]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(x,P,M){return[{text:x.slice(1)}]}},{regex:/\${\w+/,onMatch:function(x,P,M){var N={text:x.slice(2)};return M.unshift(N),[N]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(x,P,M){var N=M.shift();return this.next=N&&N.tabstopId?"start":"",[N||x]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(x,P,M){var N=M[0];return N.formatFunction=x.slice(2,-1),[M.shift()]},next:"formatString"},A,{regex:/:[\?\-+]?/,onMatch:function(x,P,M){x[1]=="+"&&(M[0].ifEnd=M[0]),x[1]=="?"&&(M[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),h.$tokenizer},h.prototype.tokenizeTmSnippet=function(y,g){return this.getTokenizer().getLineTokens(y,g).tokens.map(function(A){return A.value||A})},h.prototype.getVariableValue=function(y,g,A){if(/^\d+$/.test(g))return(this.variables.__||{})[g]||"";if(/^[A-Z]\d+$/.test(g))return(this.variables[g[0]+"__"]||{})[g.substr(1)]||"";if(g=g.replace(/^TM_/,""),!this.variables.hasOwnProperty(g))return"";var x=this.variables[g];return typeof x=="function"&&(x=this.variables[g](y,g,A)),x==null?"":x},h.prototype.tmStrFormat=function(y,g,A){if(!g.fmt)return y;var x=g.flag||"",P=g.guard;P=new RegExp(P,x.replace(/[^gim]/g,""));var M=typeof g.fmt=="string"?this.tokenizeTmSnippet(g.fmt,"formatString"):g.fmt,N=this,_=y.replace(P,function(){var I=N.variables.__;N.variables.__=[].slice.call(arguments);for(var W=N.resolveVariables(M,A),oe="E",Z=0;Z<W.length;Z++){var ae=W[Z];if(typeof ae=="object")if(W[Z]="",ae.changeCase&&ae.local){var ue=W[Z+1];ue&&typeof ue=="string"&&(ae.changeCase=="u"?W[Z]=ue[0].toUpperCase():W[Z]=ue[0].toLowerCase(),W[Z+1]=ue.substr(1))}else ae.changeCase&&(oe=ae.changeCase);else oe=="U"?W[Z]=ae.toUpperCase():oe=="L"&&(W[Z]=ae.toLowerCase())}return N.variables.__=I,W.join("")});return _},h.prototype.tmFormatFunction=function(y,g,A){return g.formatFunction=="upcase"?y.toUpperCase():g.formatFunction=="downcase"?y.toLowerCase():y},h.prototype.resolveVariables=function(y,g){function A(oe){var Z=y.indexOf(oe,N+1);Z!=-1&&(N=Z)}for(var x=[],P="",M=!0,N=0;N<y.length;N++){var _=y[N];if(typeof _=="string"){x.push(_),_==`
`?(M=!0,P=""):M&&(P=/^\t*/.exec(_)[0],M=/\S/.test(_));continue}if(_){if(M=!1,_.fmtString){var I=y.indexOf(_,N+1);I==-1&&(I=y.length),_.fmt=y.slice(N+1,I),N=I}if(_.text){var W=this.getVariableValue(g,_.text,P)+"";_.fmtString&&(W=this.tmStrFormat(W,_,g)),_.formatFunction&&(W=this.tmFormatFunction(W,_,g)),W&&!_.ifEnd?(x.push(W),A(_)):!W&&_.ifEnd&&A(_.ifEnd)}else _.elseEnd?A(_.elseEnd):(_.tabstopId!=null||_.changeCase!=null)&&x.push(_)}}return x},h.prototype.getDisplayTextForSnippet=function(y,g){var A=X.call(this,y,g);return A.text},h.prototype.insertSnippetForSelection=function(y,g,A){A===void 0&&(A={});var x=X.call(this,y,g,A),P=y.getSelectionRange(),M=y.session.replace(P,x.text),N=new ee(y),_=y.inVirtualSelectionMode&&y.selection.index;N.addTabstops(x.tabstops,P.start,M,_)},h.prototype.insertSnippet=function(y,g,A){A===void 0&&(A={});var x=this;if(y.inVirtualSelectionMode)return x.insertSnippetForSelection(y,g,A);y.forEachSelection(function(){x.insertSnippetForSelection(y,g,A)},null,{keepOrder:!0}),y.tabstopManager&&y.tabstopManager.tabNext()},h.prototype.$getScope=function(y){var g=y.session.$mode.$id||"";if(g=g.split("/").pop(),g==="html"||g==="php"){g==="php"&&!y.session.$mode.inlinePhp&&(g="html");var A=y.getCursorPosition(),x=y.session.getState(A.row);typeof x=="object"&&(x=x[0]),x.substring&&(x.substring(0,3)=="js-"?g="javascript":x.substring(0,4)=="css-"?g="css":x.substring(0,4)=="php-"&&(g="php"))}return g},h.prototype.getActiveScopes=function(y){var g=this.$getScope(y),A=[g],x=this.snippetMap;return x[g]&&x[g].includeScopes&&A.push.apply(A,x[g].includeScopes),A.push("_"),A},h.prototype.expandWithTab=function(y,g){var A=this,x=y.forEachSelection(function(){return A.expandSnippetForSelection(y,g)},null,{keepOrder:!0});return x&&y.tabstopManager&&y.tabstopManager.tabNext(),x},h.prototype.expandSnippetForSelection=function(y,g){var A=y.getCursorPosition(),x=y.session.getLine(A.row),P=x.substring(0,A.column),M=x.substr(A.column),N=this.snippetMap,_;return this.getActiveScopes(y).some(function(I){var W=N[I];return W&&(_=this.findMatchingSnippet(W,P,M)),!!_},this),_?(g&&g.dryRun||(y.session.doc.removeInLine(A.row,A.column-_.replaceBefore.length,A.column+_.replaceAfter.length),this.variables.M__=_.matchBefore,this.variables.T__=_.matchAfter,this.insertSnippetForSelection(y,_.content),this.variables.M__=this.variables.T__=null),!0):!1},h.prototype.findMatchingSnippet=function(y,g,A){for(var x=y.length;x--;){var P=y[x];if(!(P.startRe&&!P.startRe.test(g))&&!(P.endRe&&!P.endRe.test(A))&&!(!P.startRe&&!P.endRe))return P.matchBefore=P.startRe?P.startRe.exec(g):[""],P.matchAfter=P.endRe?P.endRe.exec(A):[""],P.replaceBefore=P.triggerRe?P.triggerRe.exec(g)[0]:"",P.replaceAfter=P.endTriggerRe?P.endTriggerRe.exec(A)[0]:"",P}},h.prototype.register=function(y,g){function A(I){return I&&!/^\^?\(.*\)\$?$|^\\b$/.test(I)&&(I="(?:"+I+")"),I||""}function x(I,W,oe){return I=A(I),W=A(W),oe?(I=W+I,I&&I[I.length-1]!="$"&&(I+="$")):(I+=W,I&&I[0]!="^"&&(I="^"+I)),new RegExp(I)}function P(I){I.scope||(I.scope=g||"_"),g=I.scope,M[g]||(M[g]=[],N[g]={});var W=N[g];if(I.name){var oe=W[I.name];oe&&_.unregister(oe),W[I.name]=I}M[g].push(I),I.prefix&&(I.tabTrigger=I.prefix),!I.content&&I.body&&(I.content=Array.isArray(I.body)?I.body.join(`
`):I.body),I.tabTrigger&&!I.trigger&&(!I.guard&&/^\w/.test(I.tabTrigger)&&(I.guard="\\b"),I.trigger=c.escapeRegExp(I.tabTrigger)),!(!I.trigger&&!I.guard&&!I.endTrigger&&!I.endGuard)&&(I.startRe=x(I.trigger,I.guard,!0),I.triggerRe=new RegExp(I.trigger),I.endRe=x(I.endTrigger,I.endGuard,!0),I.endTriggerRe=new RegExp(I.endTrigger))}var M=this.snippetMap,N=this.snippetNameMap,_=this;y||(y=[]),Array.isArray(y)?y.forEach(P):Object.keys(y).forEach(function(I){P(y[I])}),this._signal("registerSnippets",{scope:g})},h.prototype.unregister=function(y,g){function A(M){var N=P[M.scope||g];if(N&&N[M.name]){delete N[M.name];var _=x[M.scope||g],I=_&&_.indexOf(M);I>=0&&_.splice(I,1)}}var x=this.snippetMap,P=this.snippetNameMap;y.content?A(y):Array.isArray(y)&&y.forEach(A)},h.prototype.parseSnippetFile=function(y){y=y.replace(/\r/g,"");for(var g=[],A={},x=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,P;P=x.exec(y);){if(P[1])try{A=JSON.parse(P[1]),g.push(A)}catch(I){}if(P[4])A.content=P[4].replace(/^\t/gm,""),g.push(A),A={};else{var M=P[2],N=P[3];if(M=="regex"){var _=/\/((?:[^\/\\]|\\.)*)|$/g;A.guard=_.exec(N)[1],A.trigger=_.exec(N)[1],A.endTrigger=_.exec(N)[1],A.endGuard=_.exec(N)[1]}else M=="snippet"?(A.tabTrigger=N.match(/^\S*/)[0],A.name||(A.name=N)):M&&(A[M]=N)}}return g},h.prototype.getSnippetByName=function(y,g){var A=this.snippetNameMap,x;return this.getActiveScopes(g).some(function(P){var M=A[P];return M&&(x=M[y]),!!x},this),x},h}();f.implement(B.prototype,o);var X=function(h,y,g){function A(ge){for(var Be=[],ze=0;ze<ge.length;ze++){var Te=ge[ze];if(typeof Te=="object"){if(W[Te.tabstopId])continue;var ut=ge.lastIndexOf(Te,ze-1);Te=Be[ut]||{tabstopId:Te.tabstopId}}Be[ze]=Te}return Be}g===void 0&&(g={});var x=h.getCursorPosition(),P=h.session.getLine(x.row),M=h.session.getTabString(),N=P.match(/^\s*/)[0];x.column<N.length&&(N=N.slice(0,x.column)),y=y.replace(/\r/g,"");var _=this.tokenizeTmSnippet(y);_=this.resolveVariables(_,h),_=_.map(function(ge){return ge==`
`&&!g.excludeExtraIndent?ge+N:typeof ge=="string"?ge.replace(/\t/g,M):ge});var I=[];_.forEach(function(ge,Be){if(typeof ge=="object"){var ze=ge.tabstopId,Te=I[ze];if(Te||(Te=I[ze]=[],Te.index=ze,Te.value="",Te.parents={}),Te.indexOf(ge)===-1){ge.choices&&!Te.choices&&(Te.choices=ge.choices),Te.push(ge);var ut=_.indexOf(ge,Be+1);if(ut!==-1){var ct=_.slice(Be+1,ut),gt=ct.some(function(_e){return typeof _e=="object"});gt&&!Te.value?Te.value=ct:ct.length&&(!Te.value||typeof Te.value!="string")&&(Te.value=ct.join(""))}}}}),I.forEach(function(ge){ge.length=0});for(var W={},oe=0;oe<_.length;oe++){var Z=_[oe];if(typeof Z=="object"){var ae=Z.tabstopId,ue=I[ae],J=_.indexOf(Z,oe+1);if(W[ae]){W[ae]===Z&&(delete W[ae],Object.keys(W).forEach(function(ge){ue.parents[ge]=!0}));continue}W[ae]=Z;var Q=ue.value;typeof Q!="string"?Q=A(Q):Z.fmt&&(Q=this.tmStrFormat(Q,Z,h)),_.splice.apply(_,[oe+1,Math.max(0,J-oe)].concat(Q,Z)),ue.indexOf(Z)===-1&&ue.push(Z)}}var j=0,z=0,ke="";return _.forEach(function(ge){if(typeof ge=="string"){var Be=ge.split(`
`);Be.length>1?(z=Be[Be.length-1].length,j+=Be.length-1):z+=ge.length,ke+=ge}else ge&&(ge.start?ge.end={row:j,column:z}:ge.start={row:j,column:z})}),{text:ke,tabstops:I,tokens:_}},ee=function(){function h(y){if(this.index=0,this.ranges=[],this.tabstops=[],y.tabstopManager)return y.tabstopManager;y.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=c.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(y)}return h.prototype.attach=function(y){this.$openTabstops=null,this.selectedTabstop=null,this.editor=y,this.session=y.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},h.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},h.prototype.onChange=function(y){for(var g=y.action[0]=="r",A=this.selectedTabstop||{},x=A.parents||{},P=this.tabstops.slice(),M=0;M<P.length;M++){var N=P[M],_=N==A||x[N.index];if(N.rangeList.$bias=_?0:1,y.action=="remove"&&N!==A){var I=N.parents&&N.parents[A.index],W=N.rangeList.pointIndex(y.start,I);W=W<0?-W-1:W+1;var oe=N.rangeList.pointIndex(y.end,I);oe=oe<0?-oe-1:oe-1;for(var Z=N.rangeList.ranges.slice(W,oe),ae=0;ae<Z.length;ae++)this.removeRange(Z[ae])}N.rangeList.$onChange(y)}var ue=this.session;!this.$inChange&&g&&ue.getLength()==1&&!ue.getValue()&&this.detach()},h.prototype.updateLinkedFields=function(){var y=this.selectedTabstop;if(!(!y||!y.hasLinkedRanges||!y.firstNonLinked)){this.$inChange=!0;for(var g=this.session,A=g.getTextRange(y.firstNonLinked),x=0;x<y.length;x++){var P=y[x];if(P.linked){var M=P.original,N=r.snippetManager.tmStrFormat(A,M,this.editor);g.replace(P,N)}}this.$inChange=!1}},h.prototype.onAfterExec=function(y){y.command&&!y.command.readOnly&&this.updateLinkedFields()},h.prototype.onChangeSelection=function(){if(this.editor){for(var y=this.editor.selection.lead,g=this.editor.selection.anchor,A=this.editor.selection.isEmpty(),x=0;x<this.ranges.length;x++)if(!this.ranges[x].linked){var P=this.ranges[x].contains(y.row,y.column),M=A||this.ranges[x].contains(g.row,g.column);if(P&&M)return}this.detach()}},h.prototype.onChangeSession=function(){this.detach()},h.prototype.tabNext=function(y){var g=this.tabstops.length,A=this.index+(y||1);A=Math.min(Math.max(A,1),g),A==g&&(A=0),this.selectTabstop(A),this.updateTabstopMarkers(),A===0&&this.detach()},h.prototype.selectTabstop=function(y){this.$openTabstops=null;var g=this.tabstops[this.index];if(g&&this.addTabstopMarkers(g),this.index=y,g=this.tabstops[this.index],!(!g||!g.length)){this.selectedTabstop=g;var A=g.firstNonLinked||g;if(g.choices&&(A.cursor=A.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(A);else{var x=this.editor.multiSelect;x.toSingleRange(A);for(var P=0;P<g.length;P++)g.hasLinkedRanges&&g[P].linked||x.addRange(g[P].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},h.prototype.addTabstops=function(y,g,A){var x=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!y[0]){var P=l.fromPoints(A,A);w(P.start,g),w(P.end,g),y[0]=[P],y[0].index=0}var M=this.index,N=[M+1,0],_=this.ranges,I=this.snippetId=(this.snippetId||0)+1;y.forEach(function(W,oe){var Z=this.$openTabstops[oe]||W;Z.snippetId=I;for(var ae=0;ae<W.length;ae++){var ue=W[ae],J=l.fromPoints(ue.start,ue.end||ue.start);m(J.start,g),m(J.end,g),J.original=ue,J.tabstop=Z,_.push(J),Z!=W?Z.unshift(J):Z[ae]=J,ue.fmtString||Z.firstNonLinked&&x?(J.linked=!0,Z.hasLinkedRanges=!0):Z.firstNonLinked||(Z.firstNonLinked=J)}Z.firstNonLinked||(Z.hasLinkedRanges=!1),Z===W&&(N.push(Z),this.$openTabstops[oe]=Z),this.addTabstopMarkers(Z),Z.rangeList=Z.rangeList||new v,Z.rangeList.$bias=0,Z.rangeList.addList(Z)},this),N.length>2&&(this.tabstops.length&&N.push(N.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,N))},h.prototype.addTabstopMarkers=function(y){var g=this.session;y.forEach(function(A){A.markerId||(A.markerId=g.addMarker(A,"ace_snippet-marker","text"))})},h.prototype.removeTabstopMarkers=function(y){var g=this.session;y.forEach(function(A){g.removeMarker(A.markerId),A.markerId=null})},h.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var y=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&y--,this.tabstops.forEach(function(g){g.snippetId===y?this.addTabstopMarkers(g):this.removeTabstopMarkers(g)},this)}},h.prototype.removeRange=function(y){var g=y.tabstop.indexOf(y);g!=-1&&y.tabstop.splice(g,1),g=this.ranges.indexOf(y),g!=-1&&this.ranges.splice(g,1),g=y.tabstop.rangeList.ranges.indexOf(y),g!=-1&&y.tabstop.splice(g,1),this.session.removeMarker(y.markerId),y.tabstop.length||(g=this.tabstops.indexOf(y.tabstop),g!=-1&&this.tabstops.splice(g,1),this.tabstops.length||this.detach())},h}();ee.prototype.keyboardHandler=new F,ee.prototype.keyboardHandler.bindKeys({Tab:function(h){r.snippetManager&&r.snippetManager.expandWithTab(h)||(h.tabstopManager.tabNext(1),h.renderer.scrollCursorIntoView())},"Shift-Tab":function(h){h.tabstopManager.tabNext(-1),h.renderer.scrollCursorIntoView()},Esc:function(h){h.tabstopManager.detach()}});var m=function(h,y){h.row==0&&(h.column+=y.column),h.row+=y.row},w=function(h,y){h.row==y.row&&(h.column-=y.column),h.row-=y.row};C.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),r.snippetManager=new B;var E=b("./editor").Editor;(function(){this.insertSnippet=function(h,y){return r.snippetManager.insertSnippet(this,h,y)},this.expandSnippet=function(h){return r.snippetManager.expandWithTab(this,h)}}).call(E.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(b,r,D){"use strict";var d=b("../virtual_renderer").VirtualRenderer,C=b("../editor").Editor,f=b("../range").Range,o=b("../lib/event"),c=b("../lib/lang"),l=b("../lib/dom"),v=b("../config").nls,F=b("./../lib/useragent"),S=function(m){return"suggest-aria-id:".concat(m)},O=F.isSafari?"menu":"listbox",k=F.isSafari?"menuitem":"option",B=F.isSafari?"aria-current":"aria-selected",X=function(m){var w=new d(m);w.$maxLines=4;var E=new C(w);return E.setHighlightActiveLine(!1),E.setShowPrintMargin(!1),E.renderer.setShowGutter(!1),E.renderer.setHighlightGutterLine(!1),E.$mouseHandler.$focusTimeout=0,E.$highlightTagPending=!0,E},ee=function(){function m(w){var E=l.createElement("div"),h=X(E);w&&w.appendChild(E),E.style.display="none",h.renderer.content.style.cursor="default",h.renderer.setStyle("ace_autocomplete"),h.renderer.$textLayer.element.setAttribute("role",O),h.renderer.$textLayer.element.setAttribute("aria-roledescription",v("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),h.renderer.$textLayer.element.setAttribute("aria-label",v("autocomplete.popup.aria-label","Autocomplete suggestions")),h.renderer.textarea.setAttribute("aria-hidden","true"),h.setOption("displayIndentGuides",!1),h.setOption("dragDelay",150);var y=function(){};h.focus=y,h.$isFocused=!0,h.renderer.$cursorLayer.restartTimer=y,h.renderer.$cursorLayer.element.style.opacity="0",h.renderer.$maxLines=8,h.renderer.$keepTextAreaAtCursor=!1,h.setHighlightActiveLine(!1),h.session.highlight(""),h.session.$searchHighlight.clazz="ace_highlight-marker",h.on("mousedown",function(_){var I=_.getDocumentPosition();h.selection.moveToPosition(I),x.start.row=x.end.row=I.row,_.stop()});var g,A=new f(-1,0,-1,1/0),x=new f(-1,0,-1,1/0);x.id=h.session.addMarker(x,"ace_active-line","fullLine"),h.setSelectOnHover=function(_){_?A.id&&(h.session.removeMarker(A.id),A.id=null):A.id=h.session.addMarker(A,"ace_line-hover","fullLine")},h.setSelectOnHover(!1),h.on("mousemove",function(_){if(!g){g=_;return}if(!(g.x==_.x&&g.y==_.y)){g=_,g.scrollTop=h.renderer.scrollTop,h.isMouseOver=!0;var I=g.getDocumentPosition().row;A.start.row!=I&&(A.id||h.setRow(I),M(I))}}),h.renderer.on("beforeRender",function(){if(g&&A.start.row!=-1){g.$pos=null;var _=g.getDocumentPosition().row;A.id||h.setRow(_),M(_,!0)}}),h.renderer.on("afterRender",function(){var _=h.getRow(),I=h.renderer.$textLayer,W=I.element.childNodes[_-I.config.firstRow],oe=document.activeElement;if(W!==h.selectedNode&&h.selectedNode&&(l.removeCssClass(h.selectedNode,"ace_selected"),oe.removeAttribute("aria-activedescendant"),h.selectedNode.removeAttribute(B),h.selectedNode.removeAttribute("id")),h.selectedNode=W,W){l.addCssClass(W,"ace_selected");var Z=S(_);W.id=Z,I.element.setAttribute("aria-activedescendant",Z),oe.setAttribute("aria-activedescendant",Z),W.setAttribute("role",k),W.setAttribute("aria-roledescription",v("autocomplete.popup.item.aria-roledescription","item")),W.setAttribute("aria-label",h.getData(_).caption||h.getData(_).value),W.setAttribute("aria-setsize",h.data.length),W.setAttribute("aria-posinset",_+1),W.setAttribute("aria-describedby","doc-tooltip"),W.setAttribute(B,"true")}});var P=function(){M(-1)},M=function(_,I){_!==A.start.row&&(A.start.row=A.end.row=_,I||h.session._emit("changeBackMarker"),h._emit("changeHoverMarker"))};h.getHoveredRow=function(){return A.start.row},o.addListener(h.container,"mouseout",function(){h.isMouseOver=!1,P()}),h.on("hide",P),h.on("changeSelection",P),h.session.doc.getLength=function(){return h.data.length},h.session.doc.getLine=function(_){var I=h.data[_];return typeof I=="string"?I:I&&I.value||""};var N=h.session.bgTokenizer;return N.$tokenizeRow=function(_){function I(ge,Be){ge&&oe.push({type:(W.className||"")+(Be||""),value:ge})}var W=h.data[_],oe=[];if(!W)return oe;typeof W=="string"&&(W={value:W});for(var Z=W.caption||W.value||W.name,ae=Z.toLowerCase(),ue=(h.filterText||"").toLowerCase(),J=0,Q=0,j=0;j<=ue.length;j++)if(j!=Q&&(W.matchMask&1<<j||j==ue.length)){var z=ue.slice(Q,j);Q=j;var ke=ae.indexOf(z,J);if(ke==-1)continue;I(Z.slice(J,ke),""),J=ke+z.length,I(Z.slice(ke,J),"completion-highlight")}return I(Z.slice(J,Z.length),""),oe.push({type:"completion-spacer",value:" "}),W.meta&&oe.push({type:"completion-meta",value:W.meta}),W.message&&oe.push({type:"completion-message",value:W.message}),oe},N.$updateOnChange=y,N.start=y,h.session.$computeWidth=function(){return this.screenWidth=0},h.isOpen=!1,h.isTopdown=!1,h.autoSelect=!0,h.filterText="",h.isMouseOver=!1,h.data=[],h.setData=function(_,I){h.filterText=I||"",h.setValue(c.stringRepeat(`
`,_.length),-1),h.data=_||[],h.setRow(0)},h.getData=function(_){return h.data[_]},h.getRow=function(){return x.start.row},h.setRow=function(_){_=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,_)),x.start.row!=_&&(h.selection.clearSelection(),x.start.row=x.end.row=_||0,h.session._emit("changeBackMarker"),h.moveCursorTo(_||0,0),h.isOpen&&h._signal("select"))},h.on("changeSelection",function(){h.isOpen&&h.setRow(h.selection.lead.row),h.renderer.scrollCursorIntoView()}),h.hide=function(){this.container.style.display="none",h.anchorPos=null,h.anchor=null,h.isOpen&&(h.isOpen=!1,this._signal("hide"))},h.tryShow=function(_,I,W,oe){if(!oe&&h.isOpen&&h.anchorPos&&h.anchor&&h.anchorPos.top===_.top&&h.anchorPos.left===_.left&&h.anchor===W)return!0;var Z=this.container,ae=window.innerHeight,ue=window.innerWidth,J=this.renderer,Q=J.$maxLines*I*1.4,j={top:0,bottom:0,left:0},z=ae-_.top-3*this.$borderSize-I,ke=_.top-3*this.$borderSize;W||(ke<=z||z>=Q?W="bottom":W="top"),W==="top"?(j.bottom=_.top-this.$borderSize,j.top=j.bottom-Q):W==="bottom"&&(j.top=_.top+I+this.$borderSize,j.bottom=j.top+Q);var ge=j.top>=0&&j.bottom<=ae;if(!oe&&!ge)return!1;ge?J.$maxPixelHeight=null:W==="top"?J.$maxPixelHeight=ke:J.$maxPixelHeight=z,W==="top"?(Z.style.top="",Z.style.bottom=ae-j.bottom+"px",h.isTopdown=!1):(Z.style.top=j.top+"px",Z.style.bottom="",h.isTopdown=!0),Z.style.display="";var Be=_.left;return Be+Z.offsetWidth>ue&&(Be=ue-Z.offsetWidth),Z.style.left=Be+"px",Z.style.right="",h.isOpen||(h.isOpen=!0,this._signal("show"),g=null),h.anchorPos=_,h.anchor=W,!0},h.show=function(_,I,W){this.tryShow(_,I,W?"bottom":void 0,!0)},h.goTo=function(_){var I=this.getRow(),W=this.session.getLength()-1;switch(_){case"up":I=I<=0?W:I-1;break;case"down":I=I>=W?-1:I+1;break;case"start":I=0;break;case"end":I=W}this.setRow(I)},h.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},h.$imageSize=0,h.$borderSize=1,h}return m}();l.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),r.AcePopup=ee,r.$singleLineEditor=X,r.getAriaId=S}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(b,r,D){"use strict";var d=function(){function C(f){this.editor=f,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return C.prototype.setScreenReaderContent=function(f){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",function(){var c=this.popup.getRow(),l=this.popup.renderer.$textLayer,v=l.element.childNodes[c-l.config.firstRow];if(v){for(var F="doc-tooltip ",S=0;S<this._lines.length;S++)F+="ace-inline-screenreader-line-".concat(S," ");v.setAttribute("aria-describedby",F)}}.bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=f.split(/\r\n|\r|\n/);var o=this.createCodeBlock();this.screenReaderDiv.appendChild(o)},C.prototype.destroy=function(){this.screenReaderDiv.remove()},C.prototype.createCodeBlock=function(){var f=document.createElement("pre");f.setAttribute("id","ace-inline-screenreader");for(var o=0;o<this._lines.length;o++){var c=document.createElement("code");c.setAttribute("id","ace-inline-screenreader-line-".concat(o));var l=document.createTextNode(this._lines[o]);c.appendChild(l),f.appendChild(c)}return f},C}();r.AceInlineScreenReader=d}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(b,r,D){"use strict";var d=b("../snippets").snippetManager,C=b("./inline_screenreader").AceInlineScreenReader,f=function(){function o(){this.editor=null}return o.prototype.show=function(c,l,v){if(v=v||"",c&&this.editor&&this.editor!==c&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!c||!l)return!1;this.inlineScreenReader||(this.inlineScreenReader=new C(c));var F=l.snippet?d.getDisplayTextForSnippet(c,l.snippet):l.value;return l.hideInlinePreview||!F||!F.startsWith(v)?!1:(this.editor=c,this.inlineScreenReader.setScreenReaderContent(F),F=F.slice(v.length),F===""?c.removeGhostText():c.setGhostText(F),!0)},o.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},o.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},o.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},o}();r.AceInline=f}),ace.define("ace/autocomplete/util",["require","exports","module"],function(b,r,D){"use strict";r.parForEach=function(C,f,o){var c=0,l=C.length;l===0&&o();for(var v=0;v<l;v++)f(C[v],function(F,S){c++,c===l&&o(F,S)})};var d=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;r.retrievePrecedingIdentifier=function(C,f,o){o=o||d;for(var c=[],l=f-1;l>=0&&o.test(C[l]);l--)c.push(C[l]);return c.reverse().join("")},r.retrieveFollowingIdentifier=function(C,f,o){o=o||d;for(var c=[],l=f;l<C.length&&o.test(C[l]);l++)c.push(C[l]);return c},r.getCompletionPrefix=function(C){var f=C.getCursorPosition(),o=C.session.getLine(f.row),c;return C.completers.forEach(function(l){l.identifierRegexps&&l.identifierRegexps.forEach(function(v){!c&&v&&(c=this.retrievePrecedingIdentifier(o,f.column,v))}.bind(this))}.bind(this)),c||this.retrievePrecedingIdentifier(o,f.column)},r.triggerAutocomplete=function(C,o){var o=o==null?C.session.getPrecedingCharacter():o;return C.completers.some(function(c){if(c.triggerCharacters&&Array.isArray(c.triggerCharacters))return c.triggerCharacters.includes(o)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(b,r,D){"use strict";var d=b("./keyboard/hash_handler").HashHandler,C=b("./autocomplete/popup").AcePopup,f=b("./autocomplete/inline").AceInline,o=b("./autocomplete/popup").getAriaId,c=b("./autocomplete/util"),l=b("./lib/lang"),v=b("./lib/dom"),F=b("./snippets").snippetManager,S=b("./config"),O=b("./lib/event"),k=b("./lib/scroll").preventParentScroll,B=function(w,E){E.completer&&E.completer.destroy()},X=function(){function w(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new d,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=l.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=l.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=l.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=l.delayedCall(function(){this.stickySelection=!0}.bind(this),this.stickySelectionDelay),this.$firstOpenTimer=l.delayedCall(function(){var E=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!E||this.editor.completers.length===0||(this.completions=new m(w.completionsForLoading),this.openPopup(this.editor,E.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}.bind(this),this.stickySelectionDelay)}return Object.defineProperty(w,"completionsForLoading",{get:function(){return[{caption:S.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),w.prototype.$init=function(){return this.popup=new C(this.parentNode||document.body||document.documentElement),this.popup.on("click",function(E){this.insertMatch(),E.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),O.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},w.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new f,this.inlineRenderer},w.prototype.getPopup=function(){return this.popup||this.$init()},w.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},w.prototype.$seen=function(E){!this.hasSeen.has(E)&&E&&E.completer&&E.completer.onSeen&&typeof E.completer.onSeen=="function"&&(E.completer.onSeen(this.editor,E),this.hasSeen.add(E))},w.prototype.$onPopupChange=function(E){if(this.inlineRenderer&&this.inlineEnabled){var h=E?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(h),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},w.prototype.$updateGhostText=function(E){var h=this.base.row,y=this.base.column,g=this.editor.getCursorPosition().column,A=this.editor.session.getLine(h).slice(y,g);this.inlineRenderer.show(this.editor,E,A)?this.$seen(E):this.inlineRenderer.hide()},w.prototype.$onPopupRender=function(){var E=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var h=this.popup.getFirstVisibleRow();h<=this.popup.getLastVisibleRow();h++){var y=this.popup.getData(h);y&&(!E||y.hideInlinePreview)&&this.$seen(y)}},w.prototype.$onPopupShow=function(E){this.$onPopupChange(E),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},w.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var E=this.editor.container.parentNode,h=[];E;)h.push(E),E.addEventListener("scroll",this.onLayoutChange,{passive:!0}),E=E.parentNode;this.$elements=h}},w.prototype.unObserveLayoutChanges=function(){var E=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(h){h.removeEventListener("scroll",E.onLayoutChange,{passive:!0})}),this.$elements=null},w.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},w.prototype.$updatePopupPosition=function(){var E=this.editor,h=E.renderer,y=h.layerConfig.lineHeight,g=h.$cursorLayer.getPixelPosition(this.base,!0);g.left-=this.popup.getTextLeftOffset();var A=E.container.getBoundingClientRect();g.top+=A.top-h.layerConfig.offset,g.left+=A.left-E.renderer.scrollLeft,g.left+=h.gutterWidth;var x={top:g.top,left:g.left};h.$ghostText&&h.$ghostTextWidget&&this.base.row===h.$ghostText.position.row&&(x.top+=h.$ghostTextWidget.el.offsetHeight);var P=E.container.getBoundingClientRect().bottom-y,M=P<x.top?{top:P,left:x.left}:x;this.popup.tryShow(M,y,"bottom")||this.popup.tryShow(g,y,"top")||this.popup.show(g,y)},w.prototype.openPopup=function(E,h,y){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var g=this.popup.getRow(),A=this.popup.data[g];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:o(this.popup.getRow()),inline:this.inlineEnabled}),E.keyBinding.addKeyboardHandler(this.keyboardHandler);var x;this.stickySelection&&(x=this.popup.data.indexOf(A)),(!x||x===-1)&&(x=0),this.popup.setRow(this.autoSelect?x:-1),x===g&&A!==this.completions.filtered[x]&&this.$onPopupChange();var P=this.inlineRenderer&&this.inlineEnabled;if(x===g&&P){var M=this.popup.getData(this.popup.getRow());this.$updateGhostText(M)}y||(this.popup.setTheme(E.getTheme()),this.popup.setFontSize(E.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},w.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},w.prototype.changeListener=function(E){var h=this.editor.selection.lead;(h.row!=this.base.row||h.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},w.prototype.blurListener=function(E){var h=document.activeElement,y=this.editor.textInput.getElement(),g=E.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(E.relatedTarget),A=this.popup&&this.popup.container;h!=y&&h.parentNode!=A&&!g&&h!=this.tooltipNode&&E.relatedTarget!=y&&this.detach()},w.prototype.mousedownListener=function(E){this.detach()},w.prototype.mousewheelListener=function(E){this.popup&&!this.popup.isMouseOver&&this.detach()},w.prototype.mouseOutListener=function(E){this.popup.isOpen&&this.$updatePopupPosition()},w.prototype.goTo=function(E){this.popup.goTo(E)},w.prototype.insertMatch=function(E,h){if(E||(E=this.popup.getData(this.popup.getRow())),!E)return!1;if(E.value==="")return this.detach();var y=this.completions,g=this.getCompletionProvider().insertMatch(this.editor,E,y.filterText,h);return this.completions==y&&this.detach(),g},w.prototype.showPopup=function(E,h){this.editor&&this.detach(),this.activated=!0,this.editor=E,E.completer!=this&&(E.completer&&E.completer.detach(),E.completer=this),E.on("changeSelection",this.changeListener),E.on("blur",this.blurListener),E.on("mousedown",this.mousedownListener),E.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,h)},w.prototype.getCompletionProvider=function(E){return this.completionProvider||(this.completionProvider=new ee(E)),this.completionProvider},w.prototype.gatherCompletions=function(E,h){return this.getCompletionProvider().gatherCompletions(E,h)},w.prototype.updateCompletions=function(E,h){if(E&&this.base&&this.completions){var g=this.editor.getCursorPosition(),A=this.editor.session.getTextRange({start:this.base,end:g});if(A==this.completions.filterText)return;if(this.completions.setFilter(A),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==A&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,A,E);return}if(h&&h.matches){var g=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(g.row,g.column),this.base.$insertRight=!0,this.completions=new m(h.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",E)}var y=this.editor.getSession(),g=this.editor.getCursorPosition(),A=c.getCompletionPrefix(this.editor);this.base=y.doc.createAnchor(g.row,g.column-A.length),this.base.$insertRight=!0;var x={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:A,pos:g}).provideCompletions(this.editor,x,function(P,M,N){var _=M.filtered,I=c.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),N){if(!_.length){var W=!this.autoShown&&this.emptyMessage;if(typeof W=="function"&&(W=this.emptyMessage(I)),W){var oe=[{caption:W,value:""}];this.completions=new m(oe),this.openPopup(this.editor,I,E),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(_.length==1&&_[0].value==I&&!_[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&_.length==1)return this.insertMatch(_[0])}this.completions=!N&&this.showLoadingState?new m(w.completionsForLoading.concat(_),M.filterText):M,this.openPopup(this.editor,I,E),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!N)}.bind(this)),this.showLoadingState&&!this.autoShown&&(!this.popup||!this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},w.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},w.prototype.updateDocTooltip=function(){var E=this.popup,h=this.completions.filtered,y=h&&(h[E.getHoveredRow()]||h[E.getRow()]),g=null;if(!y||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var A=this.editor.completers.length,x=0;x<A;x++){var P=this.editor.completers[x];if(P.getDocTooltip&&y.completerId===P.id){g=P.getDocTooltip(y);break}}if(!g&&typeof y!="string"&&(g=y),typeof g=="string"&&(g={docText:g}),!g||!g.docHTML&&!g.docText)return this.hideDocTooltip();this.showDocTooltip(g)},w.prototype.showDocTooltip=function(E){this.tooltipNode||(this.tooltipNode=v.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",k));var h=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(h.isDark?"ace_dark ":"")+(h.cssClass||"");var y=this.tooltipNode;E.docHTML?y.innerHTML=E.docHTML:E.docText&&(y.textContent=E.docText),y.parentNode||this.popup.container.appendChild(this.tooltipNode);var g=this.popup,A=g.container.getBoundingClientRect();y.style.top=g.container.style.top,y.style.bottom=g.container.style.bottom,y.style.display="block",window.innerWidth-A.right<320?A.left<320?g.isTopdown?(y.style.top=A.bottom+"px",y.style.left=A.left+"px",y.style.right="",y.style.bottom=""):(y.style.top=g.container.offsetTop-y.offsetHeight+"px",y.style.left=A.left+"px",y.style.right="",y.style.bottom=""):(y.style.right=window.innerWidth-A.left+"px",y.style.left=""):(y.style.left=A.right+1+"px",y.style.right="")},w.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var E=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==E&&this.editor.focus(),this.tooltipNode=null,E.parentNode&&E.parentNode.removeChild(E)}},w.prototype.onTooltipClick=function(E){for(var h=E.target;h&&h!=this.tooltipNode;){if(h.nodeName=="A"&&h.href){h.rel="noreferrer",h.target="_blank";break}h=h.parentNode}},w.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var E=this.popup.container;E&&E.parentNode&&E.parentNode.removeChild(E)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",B),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},w}();X.prototype.commands={Up:function(w){w.completer.goTo("up")},Down:function(w){w.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(w){w.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(w){w.completer.goTo("end")},Esc:function(w){w.completer.detach()},Return:function(w){return w.completer.insertMatch()},"Shift-Return":function(w){w.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(w){var E=w.completer.insertMatch();if(E||w.tabstopManager)return E;w.completer.goTo("down")},Backspace:function(w){w.execCommand("backspace");var E=c.getCompletionPrefix(w);!E&&w.completer&&w.completer.detach()},PageUp:function(w){w.completer.popup.gotoPageUp()},PageDown:function(w){w.completer.popup.gotoPageDown()}},X.for=function(w){return w.completer instanceof X||(w.completer&&(w.completer.destroy(),w.completer=null),S.get("sharedPopups")?(X.$sharedInstance||(X.$sharedInstance=new X),w.completer=X.$sharedInstance):(w.completer=new X,w.once("destroy",B))),w.completer},X.startCommand={name:"startAutocomplete",exec:function(w,E){var h=X.for(w);h.autoInsert=!1,h.autoSelect=!0,h.autoShown=!1,h.showPopup(w,E),h.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var ee=function(){function w(E){this.initialPosition=E,this.active=!0}return w.prototype.insertByIndex=function(E,h,y){return!this.completions||!this.completions.filtered?!1:this.insertMatch(E,this.completions.filtered[h],y)},w.prototype.insertMatch=function(E,h,y){if(!h)return!1;if(E.startOperation({command:{name:"insertMatch"}}),h.completer&&h.completer.insertMatch)h.completer.insertMatch(E,h);else{if(!this.completions)return!1;var g=this.completions.filterText.length,A=0;if(h.range&&h.range.start.row===h.range.end.row&&(g-=this.initialPosition.prefix.length,g+=this.initialPosition.pos.column-h.range.start.column,A+=h.range.end.column-this.initialPosition.pos.column),g||A){var x;E.selection.getAllRanges?x=E.selection.getAllRanges():x=[E.getSelectionRange()];for(var P=0,M;M=x[P];P++)M.start.column-=g,M.end.column+=A,E.session.remove(M)}h.snippet?F.insertSnippet(E,h.snippet):this.$insertString(E,h),h.completer&&h.completer.onInsert&&typeof h.completer.onInsert=="function"&&h.completer.onInsert(E,h),h.command&&h.command==="startAutocomplete"&&E.execCommand(h.command)}return E.endOperation(),!0},w.prototype.$insertString=function(E,h){var y=h.value||h;E.execCommand("insertstring",y)},w.prototype.gatherCompletions=function(E,h){var y=E.getSession(),g=E.getCursorPosition(),A=c.getCompletionPrefix(E),x=[];this.completers=E.completers;var P=E.completers.length;return E.completers.forEach(function(M,N){M.getCompletions(E,y,g,A,function(_,I){M.hideInlinePreview&&(I=I.map(function(W){return Object.assign(W,{hideInlinePreview:M.hideInlinePreview})})),!_&&I&&(x=x.concat(I)),h(null,{prefix:c.getCompletionPrefix(E),matches:x,finished:--P===0})})}),!0},w.prototype.provideCompletions=function(E,h,y){var g=function(M){var N=M.prefix,_=M.matches;this.completions=new m(_),h.exactMatch&&(this.completions.exactMatch=!0),h.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(N),(M.finished||this.completions.filtered.length)&&y(null,this.completions,M.finished)}.bind(this),A=!0,x=null;if(this.gatherCompletions(E,function(M,N){if(this.active){M&&(y(M,[],!0),this.detach());var _=N.prefix;if(_.indexOf(N.prefix)===0){if(A){x=N;return}g(N)}}}.bind(this)),A=!1,x){var P=x;x=null,g(P)}},w.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(E){typeof E.cancel=="function"&&E.cancel()})},w}(),m=function(){function w(E,h){this.all=E,this.filtered=E,this.filterText=h||"",this.exactMatch=!1,this.ignoreCaption=!1}return w.prototype.setFilter=function(E){if(E.length>this.filterText&&E.lastIndexOf(this.filterText,0)===0)var h=this.filtered;else var h=this.all;this.filterText=E,h=this.filterCompletions(h,this.filterText),h=h.sort(function(g,A){return A.exactMatch-g.exactMatch||A.$score-g.$score||(g.caption||g.value).localeCompare(A.caption||A.value)});var y=null;h=h.filter(function(g){var A=g.snippet||g.caption||g.value;return A===y?!1:(y=A,!0)}),this.filtered=h},w.prototype.filterCompletions=function(E,h){var y=[],g=h.toUpperCase(),A=h.toLowerCase();e:for(var x=0,P;P=E[x];x++){var M=!this.ignoreCaption&&P.caption||P.value||P.snippet;if(M){var N=-1,_=0,I=0,W,oe;if(this.exactMatch){if(h!==M.substr(0,h.length))continue e}else{var Z=M.toLowerCase().indexOf(A);if(Z>-1)I=Z;else for(var ae=0;ae<h.length;ae++){var ue=M.indexOf(A[ae],N+1),J=M.indexOf(g[ae],N+1);if(W=ue>=0&&(J<0||ue<J)?ue:J,W<0)continue e;oe=W-N-1,oe>0&&(N===-1&&(I+=10),I+=oe,_|=1<<ae),N=W}}P.matchMask=_,P.exactMatch=I?0:1,P.$score=(P.score||0)-I,y.push(P)}}return y},w}();r.Autocomplete=X,r.CompletionProvider=ee,r.FilteredList=m}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(b,r,D){function d(c,l){var v=c.getTextRange(f.fromPoints({row:0,column:0},l));return v.split(o).length-1}function C(c,l){var v=d(c,l),F=c.getValue().split(o),S=Object.create(null),O=F[v];return F.forEach(function(k,B){if(!(!k||k===O)){var X=Math.abs(v-B),ee=F.length-X;S[k]?S[k]=Math.max(ee,S[k]):S[k]=ee}}),S}var f=b("../range").Range,o=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;r.getCompletions=function(c,l,v,F,S){var O=C(l,v),k=Object.keys(O);S(null,k.map(function(B){return{caption:B,value:B,score:O[B],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(b,r,D){"use strict";var d=b("../snippets").snippetManager,C=b("../autocomplete").Autocomplete,f=b("../config"),o=b("../lib/lang"),c=b("../autocomplete/util"),l=b("../autocomplete/text_completer"),v={getCompletions:function(g,A,x,P,M){if(A.$mode.completer)return A.$mode.completer.getCompletions(g,A,x,P,M);var N=g.session.getState(x.row),_=A.$mode.getCompletions(N,A,x,P);_=_.map(function(I){return I.completerId=v.id,I}),M(null,_)},id:"keywordCompleter"},F=function(g){var A={};return g.replace(/\${(\d+)(:(.*?))?}/g,function(x,P,M,N){return A[P]=N||""}).replace(/\$(\d+?)/g,function(x,P){return A[P]})},S={getCompletions:function(g,A,x,P,M){var N=[],_=A.getTokenAt(x.row,x.column);_&&_.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?N.push("html-tag"):N=d.getActiveScopes(g);var I=d.snippetMap,W=[];N.forEach(function(oe){for(var Z=I[oe]||[],ae=Z.length;ae--;){var ue=Z[ae],J=ue.name||ue.tabTrigger;J&&W.push({caption:J,snippet:ue.content,meta:ue.tabTrigger&&!ue.name?ue.tabTrigger+"\u21E5 ":"snippet",completerId:S.id})}},this),M(null,W)},getDocTooltip:function(g){g.snippet&&!g.docHTML&&(g.docHTML=["<b>",o.escapeHTML(g.caption),"</b>","<hr></hr>",o.escapeHTML(F(g.snippet))].join(""))},id:"snippetCompleter"},O=[S,l,v];r.setCompleters=function(g){O.length=0,g&&O.push.apply(O,g)},r.addCompleter=function(g){O.push(g)},r.textCompleter=l,r.keyWordCompleter=v,r.snippetCompleter=S;var k={name:"expandSnippet",exec:function(g){return d.expandWithTab(g)},bindKey:"Tab"},B=function(g,A){X(A.session.$mode)},X=function(g){typeof g=="string"&&(g=f.$modes[g]),g&&(d.files||(d.files={}),ee(g.$id,g.snippetFileId),g.modes&&g.modes.forEach(X))},ee=function(g,A){!A||!g||d.files[g]||(d.files[g]={},f.loadModule(A,function(x){x&&(d.files[g]=x,!x.snippets&&x.snippetText&&(x.snippets=d.parseSnippetFile(x.snippetText)),d.register(x.snippets||[],x.scope),x.includeScopes&&(d.snippetMap[x.scope].includeScopes=x.includeScopes,x.includeScopes.forEach(function(P){X("ace/mode/"+P)})))}))},m=function(g){var A=g.editor,x=A.completer&&A.completer.activated;if(g.command.name==="backspace")x&&!c.getCompletionPrefix(A)&&A.completer.detach();else if(g.command.name==="insertstring"&&!x){w=g;var P=g.editor.$liveAutocompletionDelay;P?E.delay(P):h(g)}},w,E=o.delayedCall(function(){h(w)},0),h=function(g){var A=g.editor,x=c.getCompletionPrefix(A),P=g.args,M=c.triggerAutocomplete(A,P);if(x&&x.length>=A.$liveAutocompletionThreshold||M){var N=C.for(A);N.autoShown=!0,N.showPopup(A)}},y=b("../editor").Editor;b("../config").defineOptions(y.prototype,"editor",{enableBasicAutocompletion:{set:function(g){g?(this.completers||(this.completers=Array.isArray(g)?g:O),this.commands.addCommand(C.startCommand)):this.commands.removeCommand(C.startCommand)},value:!1},enableLiveAutocompletion:{set:function(g){g?(this.completers||(this.completers=Array.isArray(g)?g:O),this.commands.on("afterExec",m)):this.commands.off("afterExec",m)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(g){g?(this.commands.addCommand(k),this.on("changeMode",B),B(null,this)):(this.commands.removeCommand(k),this.off("changeMode",B))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(b){R&&(R.exports=b)})}()},97726:(R,Y,$)=>{R=$.nmd(R),ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(b,r,D){"use strict";var d=b("../lib/oop"),C=b("./text_highlight_rules").TextHighlightRules,f=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};d.inherits(f,C),r.JsonHighlightRules=f}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(b,r,D){"use strict";var d=b("../range").Range,C=function(){};(function(){this.checkOutdent=function(f,o){return/^\s+$/.test(f)?/^\s*\}/.test(o):!1},this.autoOutdent=function(f,o){var c=f.getLine(o),l=c.match(/^(\s*\})/);if(!l)return 0;var v=l[1].length,F=f.findMatchingBracket({row:o,column:v});if(!F||F.row==o)return 0;var S=this.$getIndent(f.getLine(F.row));f.replace(new d(o,0,o,v-1),S)},this.$getIndent=function(f){return f.match(/^\s*/)[0]}}).call(C.prototype),r.MatchingBraceOutdent=C}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(b,r,D){"use strict";var d=b("../../lib/oop"),C=b("../../range").Range,f=b("./fold_mode").FoldMode,o=r.FoldMode=function(c){c&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+c.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+c.end)))};d.inherits(o,f),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(c,l,v){var F=c.getLine(v);if(this.singleLineBlockCommentRe.test(F)&&!this.startRegionRe.test(F)&&!this.tripleStarBlockCommentRe.test(F))return"";var S=this._getFoldWidgetBase(c,l,v);return!S&&this.startRegionRe.test(F)?"start":S},this.getFoldWidgetRange=function(c,l,v,F){var S=c.getLine(v);if(this.startRegionRe.test(S))return this.getCommentRegionBlock(c,S,v);var B=S.match(this.foldingStartMarker);if(B){var O=B.index;if(B[1])return this.openingBracketBlock(c,B[1],v,O);var k=c.getCommentFoldRange(v,O+B[0].length,1);return k&&!k.isMultiLine()&&(F?k=this.getSectionRange(c,v):l!="all"&&(k=null)),k}if(l!=="markbegin"){var B=S.match(this.foldingStopMarker);if(B){var O=B.index+B[0].length;return B[1]?this.closingBracketBlock(c,B[1],v,O):c.getCommentFoldRange(v,O,-1)}}},this.getSectionRange=function(c,l){var v=c.getLine(l),F=v.search(/\S/),S=l,O=v.length;l+=1;for(var k=l,B=c.getLength();++l<B;){v=c.getLine(l);var X=v.search(/\S/);if(X!==-1){if(F>X)break;var ee=this.getFoldWidgetRange(c,"all",l);if(ee){if(ee.start.row<=S)break;if(ee.isMultiLine())l=ee.end.row;else if(F==X)break}k=l}}return new C(S,O,k,c.getLine(k).length)},this.getCommentRegionBlock=function(c,l,v){for(var F=l.search(/\s*$/),S=c.getLength(),O=v,k=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,B=1;++v<S;){l=c.getLine(v);var X=k.exec(l);if(X&&(X[1]?B--:B++,!B))break}var ee=v;if(ee>O)return new C(O,F,ee,l.length)}}.call(o.prototype)}),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/cstyle","ace/worker/worker_client"],function(b,r,D){"use strict";var d=b("../lib/oop"),C=b("./text").Mode,f=b("./json_highlight_rules").JsonHighlightRules,o=b("./matching_brace_outdent").MatchingBraceOutdent,c=b("./folding/cstyle").FoldMode,l=b("../worker/worker_client").WorkerClient,v=function(){this.HighlightRules=f,this.$outdent=new o,this.$behaviour=this.$defaultBehaviour,this.foldingRules=new c};d.inherits(v,C),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(F,S,O){var k=this.$getIndent(S);if(F=="start"){var B=S.match(/^.*[\{\(\[]\s*$/);B&&(k+=O)}return k},this.checkOutdent=function(F,S,O){return this.$outdent.checkOutdent(S,O)},this.autoOutdent=function(F,S,O){this.$outdent.autoOutdent(S,O)},this.createWorker=function(F){var S=new l(["ace"],"ace/mode/json_worker","JsonWorker");return S.attachToDocument(F.getDocument()),S.on("annotate",function(O){F.setAnnotations(O.data)}),S.on("terminate",function(){F.clearAnnotations()}),S},this.$id="ace/mode/json"}.call(v.prototype),r.Mode=v}),function(){ace.require(["ace/mode/json"],function(b){R&&(R.exports=b)})}()},44210:(R,Y,$)=>{R=$.nmd(R),ace.define("ace/theme/chrome-css",["require","exports","module"],function(b,r,D){D.exports=`.ace-chrome .ace_gutter {
  background: #ebebeb;
  color: #333;
  overflow : hidden;
}

.ace-chrome .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-chrome {
  background-color: #FFFFFF;
  color: black;
}

.ace-chrome .ace_cursor {
  color: black;
}

.ace-chrome .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-chrome .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-chrome .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-chrome .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-chrome .ace_invalid {
  background-color: rgb(153, 0, 0);
  color: white;
}

.ace-chrome .ace_fold {
}

.ace-chrome .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-chrome .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-chrome .ace_support.ace_type,
.ace-chrome .ace_support.ace_class
.ace-chrome .ace_support.ace_other {
  color: rgb(109, 121, 222);
}

.ace-chrome .ace_variable.ace_parameter {
  font-style:italic;
  color:#FD971F;
}
.ace-chrome .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-chrome .ace_comment {
  color: #236e24;
}

.ace-chrome .ace_comment.ace_doc {
  color: #236e24;
}

.ace-chrome .ace_comment.ace_doc.ace_tag {
  color: #236e24;
}

.ace-chrome .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-chrome .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-chrome .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-chrome .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-chrome .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-chrome .ace_list {
  color:rgb(185, 6, 144);
}

.ace-chrome .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}

.ace-chrome .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-chrome .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-chrome .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-chrome .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-chrome .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-chrome .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-chrome .ace_storage,
.ace-chrome .ace_keyword,
.ace-chrome .ace_meta.ace_tag {
  color: rgb(147, 15, 128);
}

.ace-chrome .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-chrome .ace_string {
  color: #1A1AA6;
}

.ace-chrome .ace_entity.ace_other.ace_attribute-name {
  color: #994409;
}

.ace-chrome .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}
  
.ace-chrome .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/chrome",["require","exports","module","ace/theme/chrome-css","ace/lib/dom"],function(b,r,D){r.isDark=!1,r.cssClass="ace-chrome",r.cssText=b("./chrome-css");var d=b("../lib/dom");d.importCssString(r.cssText,r.cssClass,!1)}),function(){ace.require(["ace/theme/chrome"],function(b){R&&(R.exports=b)})}()},9285:(R,Y,$)=>{R=$.nmd(R),ace.define("ace/theme/clouds_midnight-css",["require","exports","module"],function(b,r,D){D.exports=`.ace-clouds-midnight .ace_gutter {
  background: #232323;
  color: #929292
}

.ace-clouds-midnight .ace_print-margin {
  width: 1px;
  background: #232323
}

.ace-clouds-midnight {
  background-color: #191919;
  color: #929292
}

.ace-clouds-midnight .ace_cursor {
  color: #7DA5DC
}

.ace-clouds-midnight .ace_marker-layer .ace_selection {
  background: #000000
}

.ace-clouds-midnight.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #191919;
}

.ace-clouds-midnight .ace_marker-layer .ace_step {
  background: rgb(102, 82, 0)
}

.ace-clouds-midnight .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #BFBFBF
}

.ace-clouds-midnight .ace_marker-layer .ace_active-line {
  background: rgba(215, 215, 215, 0.031)
}

.ace-clouds-midnight .ace_gutter-active-line {
  background-color: rgba(215, 215, 215, 0.031)
}

.ace-clouds-midnight .ace_marker-layer .ace_selected-word {
  border: 1px solid #000000
}

.ace-clouds-midnight .ace_invisible {
  color: #666
}

.ace-clouds-midnight .ace_keyword,
.ace-clouds-midnight .ace_meta,
.ace-clouds-midnight .ace_support.ace_constant.ace_property-value {
  color: #927C5D
}

.ace-clouds-midnight .ace_keyword.ace_operator {
  color: #4B4B4B
}

.ace-clouds-midnight .ace_keyword.ace_other.ace_unit {
  color: #366F1A
}

.ace-clouds-midnight .ace_constant.ace_language {
  color: #39946A
}

.ace-clouds-midnight .ace_constant.ace_numeric {
  color: #46A609
}

.ace-clouds-midnight .ace_constant.ace_character.ace_entity {
  color: #A165AC
}

.ace-clouds-midnight .ace_invalid {
  color: #FFFFFF;
  background-color: #E92E2E
}

.ace-clouds-midnight .ace_fold {
  background-color: #927C5D;
  border-color: #929292
}

.ace-clouds-midnight .ace_storage,
.ace-clouds-midnight .ace_support.ace_class,
.ace-clouds-midnight .ace_support.ace_function,
.ace-clouds-midnight .ace_support.ace_other,
.ace-clouds-midnight .ace_support.ace_type {
  color: #E92E2E
}

.ace-clouds-midnight .ace_string {
  color: #5D90CD
}

.ace-clouds-midnight .ace_comment {
  color: #3C403B
}

.ace-clouds-midnight .ace_entity.ace_name.ace_tag,
.ace-clouds-midnight .ace_entity.ace_other.ace_attribute-name {
  color: #606060
}

.ace-clouds-midnight .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y
}

.ace-clouds-midnight .ace_indent-guide-active {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/clouds_midnight",["require","exports","module","ace/theme/clouds_midnight-css","ace/lib/dom"],function(b,r,D){r.isDark=!0,r.cssClass="ace-clouds-midnight",r.cssText=b("./clouds_midnight-css");var d=b("../lib/dom");d.importCssString(r.cssText,r.cssClass,!1)}),function(){ace.require(["ace/theme/clouds_midnight"],function(b){R&&(R.exports=b)})}()},51197:function(){"no use strict";(function(R){function Y(r,D){for(var d=r,C="";d;){var f=D[d];if(typeof f=="string")return f+C;if(f)return f.location.replace(/\/*$/,"/")+(C||f.main||f.name);if(f===!1)return"";var o=d.lastIndexOf("/");if(o===-1)break;C=d.substr(o)+C,d=d.slice(0,o)}return r}if(!(typeof R.window!="undefined"&&R.document)&&!(R.require&&R.define)){R.console||(R.console=function(){var r=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:r})},R.console.error=R.console.warn=R.console.log=R.console.trace=R.console),R.window=R,R.ace=R,R.onerror=function(r,D,d,C,f){postMessage({type:"error",data:{message:r,data:f&&f.data,file:D,line:d,col:C,stack:f&&f.stack}})},R.normalizeModule=function(r,D){if(D.indexOf("!")!==-1){var d=D.split("!");return R.normalizeModule(r,d[0])+"!"+R.normalizeModule(r,d[1])}if(D.charAt(0)=="."){var C=r.split("/").slice(0,-1).join("/");for(D=(C?C+"/":"")+D;D.indexOf(".")!==-1&&f!=D;){var f=D;D=D.replace(/^\.\//,"").replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return D},R.require=function(r,D){if(D||(D=r,r=null),!D.charAt)throw new Error("worker.js require() accepts only (parentId, id) as arguments");D=R.normalizeModule(r,D);var d=R.require.modules[D];if(d)return d.initialized||(d.initialized=!0,d.exports=d.factory().exports),d.exports;if(!R.require.tlns)return console.log("unable to load "+D);var C=Y(D,R.require.tlns);return C.slice(-3)!=".js"&&(C+=".js"),R.require.id=D,R.require.modules[D]={},importScripts(C),R.require(r,D)},R.require.modules={},R.require.tlns={},R.define=function(r,D,d){if(arguments.length==2?(d=D,typeof r!="string"&&(D=r,r=R.require.id)):arguments.length==1&&(d=r,D=[],r=R.require.id),typeof d!="function"){R.require.modules[r]={exports:d,initialized:!0};return}D.length||(D=["require","exports","module"]);var C=function(f){return R.require(r,f)};R.require.modules[r]={exports:{},factory:function(){var f=this,o=d.apply(this,D.slice(0,d.length).map(function(c){switch(c){case"require":return C;case"exports":return f.exports;case"module":return f;default:return C(c)}}));return o&&(f.exports=o),f}}},R.define.amd={},R.require.tlns={},R.initBaseUrls=function(r){for(var D in r)this.require.tlns[D]=r[D]},R.initSender=function(){var r=R.require("ace/lib/event_emitter").EventEmitter,D=R.require("ace/lib/oop"),d=function(){};return function(){D.implement(this,r),this.callback=function(C,f){postMessage({type:"call",id:f,data:C})},this.emit=function(C,f){postMessage({type:"event",name:C,data:f})}}.call(d.prototype),new d};var $=R.main=null,b=R.sender=null;R.onmessage=function(r){var D=r.data;if(D.event&&b)b._signal(D.event,D.data);else if(D.command)if($[D.command])$[D.command].apply($,D.args);else{if(!R[D.command])throw new Error("Unknown command:"+D.command);R[D.command].apply(R,D.args)}else if(D.init){R.initBaseUrls(D.tlns),b=R.sender=R.initSender();var d=this.require(D.module)[D.classname];$=R.main=new d(b)}}}})(this),ace.define("ace/lib/oop",[],function(R,Y,$){"use strict";Y.inherits=function(b,r){b.super_=r,b.prototype=Object.create(r.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})},Y.mixin=function(b,r){for(var D in r)b[D]=r[D];return b},Y.implement=function(b,r){Y.mixin(b,r)}}),ace.define("ace/apply_delta",[],function(R,Y,$){"use strict";function b(d,C){throw console.log("Invalid Delta:",d),"Invalid Delta: "+C}function r(d,C){return C.row>=0&&C.row<d.length&&C.column>=0&&C.column<=d[C.row].length}function D(d,C){C.action!="insert"&&C.action!="remove"&&b(C,"delta.action must be 'insert' or 'remove'"),C.lines instanceof Array||b(C,"delta.lines must be an Array"),(!C.start||!C.end)&&b(C,"delta.start/end must be an present");var f=C.start;r(d,C.start)||b(C,"delta.start must be contained in document");var o=C.end;C.action=="remove"&&!r(d,o)&&b(C,"delta.end must contained in document for 'remove' actions");var c=o.row-f.row,l=o.column-(c==0?f.column:0);(c!=C.lines.length-1||C.lines[c].length!=l)&&b(C,"delta.range must match delta lines")}Y.applyDelta=function(d,C,f){var o=C.start.row,c=C.start.column,l=d[o]||"";switch(C.action){case"insert":var v=C.lines;if(v.length===1)d[o]=l.substring(0,c)+C.lines[0]+l.substring(c);else{var F=[o,1].concat(C.lines);d.splice.apply(d,F),d[o]=l.substring(0,c)+d[o],d[o+C.lines.length-1]+=l.substring(c)}break;case"remove":var S=C.end.column,O=C.end.row;o===O?d[o]=l.substring(0,c)+l.substring(S):d.splice(o,O-o+1,l.substring(0,c)+d[O].substring(S))}}}),ace.define("ace/lib/event_emitter",[],function(R,Y,$){"use strict";var b={},r=function(){this.propagationStopped=!0},D=function(){this.defaultPrevented=!0};b._emit=b._dispatchEvent=function(d,C){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var f=this._eventRegistry[d]||[],o=this._defaultHandlers[d];if(!(!f.length&&!o)){(typeof C!="object"||!C)&&(C={}),C.type||(C.type=d),C.stopPropagation||(C.stopPropagation=r),C.preventDefault||(C.preventDefault=D),f=f.slice();for(var c=0;c<f.length&&(f[c](C,this),!C.propagationStopped);c++);if(o&&!C.defaultPrevented)return o(C,this)}},b._signal=function(d,C){var f=(this._eventRegistry||{})[d];if(f){f=f.slice();for(var o=0;o<f.length;o++)f[o](C,this)}},b.once=function(d,C){var f=this;if(this.on(d,function o(){f.off(d,o),C.apply(null,arguments)}),!C)return new Promise(function(o){C=o})},b.setDefaultHandler=function(d,C){var f=this._defaultHandlers;if(f||(f=this._defaultHandlers={_disabled_:{}}),f[d]){var o=f[d],c=f._disabled_[d];c||(f._disabled_[d]=c=[]),c.push(o);var l=c.indexOf(C);l!=-1&&c.splice(l,1)}f[d]=C},b.removeDefaultHandler=function(d,C){var f=this._defaultHandlers;if(f){var o=f._disabled_[d];if(f[d]==C)o&&this.setDefaultHandler(d,o.pop());else if(o){var c=o.indexOf(C);c!=-1&&o.splice(c,1)}}},b.on=b.addEventListener=function(d,C,f){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[d];return o||(o=this._eventRegistry[d]=[]),o.indexOf(C)==-1&&o[f?"unshift":"push"](C),C},b.off=b.removeListener=b.removeEventListener=function(d,C){this._eventRegistry=this._eventRegistry||{};var f=this._eventRegistry[d];if(f){var o=f.indexOf(C);o!==-1&&f.splice(o,1)}},b.removeAllListeners=function(d){d||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[d]=void 0),this._defaultHandlers&&(this._defaultHandlers[d]=void 0)},Y.EventEmitter=b}),ace.define("ace/range",[],function(R,Y,$){"use strict";var b=function(){function r(D,d,C,f){this.start={row:D,column:d},this.end={row:C,column:f}}return r.prototype.isEqual=function(D){return this.start.row===D.start.row&&this.end.row===D.end.row&&this.start.column===D.start.column&&this.end.column===D.end.column},r.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},r.prototype.contains=function(D,d){return this.compare(D,d)==0},r.prototype.compareRange=function(D){var d,C=D.end,f=D.start;return d=this.compare(C.row,C.column),d==1?(d=this.compare(f.row,f.column),d==1?2:d==0?1:0):d==-1?-2:(d=this.compare(f.row,f.column),d==-1?-1:d==1?42:0)},r.prototype.comparePoint=function(D){return this.compare(D.row,D.column)},r.prototype.containsRange=function(D){return this.comparePoint(D.start)==0&&this.comparePoint(D.end)==0},r.prototype.intersects=function(D){var d=this.compareRange(D);return d==-1||d==0||d==1},r.prototype.isEnd=function(D,d){return this.end.row==D&&this.end.column==d},r.prototype.isStart=function(D,d){return this.start.row==D&&this.start.column==d},r.prototype.setStart=function(D,d){typeof D=="object"?(this.start.column=D.column,this.start.row=D.row):(this.start.row=D,this.start.column=d)},r.prototype.setEnd=function(D,d){typeof D=="object"?(this.end.column=D.column,this.end.row=D.row):(this.end.row=D,this.end.column=d)},r.prototype.inside=function(D,d){return this.compare(D,d)==0?!(this.isEnd(D,d)||this.isStart(D,d)):!1},r.prototype.insideStart=function(D,d){return this.compare(D,d)==0?!this.isEnd(D,d):!1},r.prototype.insideEnd=function(D,d){return this.compare(D,d)==0?!this.isStart(D,d):!1},r.prototype.compare=function(D,d){return!this.isMultiLine()&&D===this.start.row?d<this.start.column?-1:d>this.end.column?1:0:D<this.start.row?-1:D>this.end.row?1:this.start.row===D?d>=this.start.column?0:-1:this.end.row===D?d<=this.end.column?0:1:0},r.prototype.compareStart=function(D,d){return this.start.row==D&&this.start.column==d?-1:this.compare(D,d)},r.prototype.compareEnd=function(D,d){return this.end.row==D&&this.end.column==d?1:this.compare(D,d)},r.prototype.compareInside=function(D,d){return this.end.row==D&&this.end.column==d?1:this.start.row==D&&this.start.column==d?-1:this.compare(D,d)},r.prototype.clipRows=function(D,d){if(this.end.row>d)var C={row:d+1,column:0};else if(this.end.row<D)var C={row:D,column:0};if(this.start.row>d)var f={row:d+1,column:0};else if(this.start.row<D)var f={row:D,column:0};return r.fromPoints(f||this.start,C||this.end)},r.prototype.extend=function(D,d){var C=this.compare(D,d);if(C==0)return this;if(C==-1)var f={row:D,column:d};else var o={row:D,column:d};return r.fromPoints(f||this.start,o||this.end)},r.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},r.prototype.isMultiLine=function(){return this.start.row!==this.end.row},r.prototype.clone=function(){return r.fromPoints(this.start,this.end)},r.prototype.collapseRows=function(){return this.end.column==0?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},r.prototype.toScreenRange=function(D){var d=D.documentToScreenPosition(this.start),C=D.documentToScreenPosition(this.end);return new r(d.row,d.column,C.row,C.column)},r.prototype.moveBy=function(D,d){this.start.row+=D,this.start.column+=d,this.end.row+=D,this.end.column+=d},r}();b.fromPoints=function(r,D){return new b(r.row,r.column,D.row,D.column)},b.comparePoints=function(r,D){return r.row-D.row||r.column-D.column},Y.Range=b}),ace.define("ace/anchor",[],function(R,Y,$){"use strict";function b(f,o,c){var l=c?f.column<=o.column:f.column<o.column;return f.row<o.row||f.row==o.row&&l}function r(f,o,c){var l=f.action=="insert",v=(l?1:-1)*(f.end.row-f.start.row),F=(l?1:-1)*(f.end.column-f.start.column),S=f.start,O=l?S:f.end;return b(o,S,c)?{row:o.row,column:o.column}:b(O,o,!c)?{row:o.row+v,column:o.column+(o.row==O.row?F:0)}:{row:S.row,column:S.column}}var D=R("./lib/oop"),d=R("./lib/event_emitter").EventEmitter,C=function(){function f(o,c,l){this.$onChange=this.onChange.bind(this),this.attach(o),typeof c!="number"?this.setPosition(c.row,c.column):this.setPosition(c,l)}return f.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},f.prototype.getDocument=function(){return this.document},f.prototype.onChange=function(o){if(!(o.start.row==o.end.row&&o.start.row!=this.row)&&!(o.start.row>this.row)){var c=r(o,{row:this.row,column:this.column},this.$insertRight);this.setPosition(c.row,c.column,!0)}},f.prototype.setPosition=function(o,c,l){var v;if(l?v={row:o,column:c}:v=this.$clipPositionToDocument(o,c),!(this.row==v.row&&this.column==v.column)){var F={row:this.row,column:this.column};this.row=v.row,this.column=v.column,this._signal("change",{old:F,value:v})}},f.prototype.detach=function(){this.document.off("change",this.$onChange)},f.prototype.attach=function(o){this.document=o||this.document,this.document.on("change",this.$onChange)},f.prototype.$clipPositionToDocument=function(o,c){var l={};return o>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):o<0?(l.row=0,l.column=0):(l.row=o,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,c))),c<0&&(l.column=0),l},f}();C.prototype.$insertRight=!1,D.implement(C.prototype,d),Y.Anchor=C}),ace.define("ace/document",[],function(R,Y,$){"use strict";var b=R("./lib/oop"),r=R("./apply_delta").applyDelta,D=R("./lib/event_emitter").EventEmitter,d=R("./range").Range,C=R("./anchor").Anchor,f=function(){function o(c){this.$lines=[""],c.length===0?this.$lines=[""]:Array.isArray(c)?this.insertMergedLines({row:0,column:0},c):this.insert({row:0,column:0},c)}return o.prototype.setValue=function(c){var l=this.getLength()-1;this.remove(new d(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},c||"")},o.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},o.prototype.createAnchor=function(c,l){return new C(this,c,l)},o.prototype.$detectNewLine=function(c){var l=c.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},o.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},o.prototype.setNewLineMode=function(c){this.$newLineMode!==c&&(this.$newLineMode=c,this._signal("changeNewLineMode"))},o.prototype.getNewLineMode=function(){return this.$newLineMode},o.prototype.isNewLine=function(c){return c==`\r
`||c=="\r"||c==`
`},o.prototype.getLine=function(c){return this.$lines[c]||""},o.prototype.getLines=function(c,l){return this.$lines.slice(c,l+1)},o.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},o.prototype.getLength=function(){return this.$lines.length},o.prototype.getTextRange=function(c){return this.getLinesForRange(c).join(this.getNewLineCharacter())},o.prototype.getLinesForRange=function(c){var l;if(c.start.row===c.end.row)l=[this.getLine(c.start.row).substring(c.start.column,c.end.column)];else{l=this.getLines(c.start.row,c.end.row),l[0]=(l[0]||"").substring(c.start.column);var v=l.length-1;c.end.row-c.start.row==v&&(l[v]=l[v].substring(0,c.end.column))}return l},o.prototype.insertLines=function(c,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(c,l)},o.prototype.removeLines=function(c,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(c,l)},o.prototype.insertNewLine=function(c){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(c,["",""])},o.prototype.insert=function(c,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(c,this.$split(l))},o.prototype.insertInLine=function(c,l){var v=this.clippedPos(c.row,c.column),F=this.pos(c.row,c.column+l.length);return this.applyDelta({start:v,end:F,action:"insert",lines:[l]},!0),this.clonePos(F)},o.prototype.clippedPos=function(c,l){var v=this.getLength();c===void 0?c=v:c<0?c=0:c>=v&&(c=v-1,l=void 0);var F=this.getLine(c);return l==null&&(l=F.length),l=Math.min(Math.max(l,0),F.length),{row:c,column:l}},o.prototype.clonePos=function(c){return{row:c.row,column:c.column}},o.prototype.pos=function(c,l){return{row:c,column:l}},o.prototype.$clipPosition=function(c){var l=this.getLength();return c.row>=l?(c.row=Math.max(0,l-1),c.column=this.getLine(l-1).length):(c.row=Math.max(0,c.row),c.column=Math.min(Math.max(c.column,0),this.getLine(c.row).length)),c},o.prototype.insertFullLines=function(c,l){c=Math.min(Math.max(c,0),this.getLength());var v=0;c<this.getLength()?(l=l.concat([""]),v=0):(l=[""].concat(l),c--,v=this.$lines[c].length),this.insertMergedLines({row:c,column:v},l)},o.prototype.insertMergedLines=function(c,l){var v=this.clippedPos(c.row,c.column),F={row:v.row+l.length-1,column:(l.length==1?v.column:0)+l[l.length-1].length};return this.applyDelta({start:v,end:F,action:"insert",lines:l}),this.clonePos(F)},o.prototype.remove=function(c){var l=this.clippedPos(c.start.row,c.start.column),v=this.clippedPos(c.end.row,c.end.column);return this.applyDelta({start:l,end:v,action:"remove",lines:this.getLinesForRange({start:l,end:v})}),this.clonePos(l)},o.prototype.removeInLine=function(c,l,v){var F=this.clippedPos(c,l),S=this.clippedPos(c,v);return this.applyDelta({start:F,end:S,action:"remove",lines:this.getLinesForRange({start:F,end:S})},!0),this.clonePos(F)},o.prototype.removeFullLines=function(c,l){c=Math.min(Math.max(0,c),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var v=l==this.getLength()-1&&c>0,F=l<this.getLength()-1,S=v?c-1:c,O=v?this.getLine(S).length:0,k=F?l+1:l,B=F?0:this.getLine(k).length,X=new d(S,O,k,B),ee=this.$lines.slice(c,l+1);return this.applyDelta({start:X.start,end:X.end,action:"remove",lines:this.getLinesForRange(X)}),ee},o.prototype.removeNewLine=function(c){c<this.getLength()-1&&c>=0&&this.applyDelta({start:this.pos(c,this.getLine(c).length),end:this.pos(c+1,0),action:"remove",lines:["",""]})},o.prototype.replace=function(c,l){if(c instanceof d||(c=d.fromPoints(c.start,c.end)),l.length===0&&c.isEmpty())return c.start;if(l==this.getTextRange(c))return c.end;this.remove(c);var v;return l?v=this.insert(c.start,l):v=c.start,v},o.prototype.applyDeltas=function(c){for(var l=0;l<c.length;l++)this.applyDelta(c[l])},o.prototype.revertDeltas=function(c){for(var l=c.length-1;l>=0;l--)this.revertDelta(c[l])},o.prototype.applyDelta=function(c,l){var v=c.action=="insert";(v?c.lines.length<=1&&!c.lines[0]:!d.comparePoints(c.start,c.end))||(v&&c.lines.length>2e4?this.$splitAndapplyLargeDelta(c,2e4):(r(this.$lines,c,l),this._signal("change",c)))},o.prototype.$safeApplyDelta=function(c){var l=this.$lines.length;(c.action=="remove"&&c.start.row<l&&c.end.row<l||c.action=="insert"&&c.start.row<=l)&&this.applyDelta(c)},o.prototype.$splitAndapplyLargeDelta=function(c,l){for(var v=c.lines,F=v.length-l+1,S=c.start.row,O=c.start.column,k=0,B=0;k<F;k=B){B+=l-1;var X=v.slice(k,B);X.push(""),this.applyDelta({start:this.pos(S+k,O),end:this.pos(S+B,O=0),action:c.action,lines:X},!0)}c.lines=v.slice(k),c.start.row=S+k,c.start.column=O,this.applyDelta(c,!0)},o.prototype.revertDelta=function(c){this.$safeApplyDelta({start:this.clonePos(c.start),end:this.clonePos(c.end),action:c.action=="insert"?"remove":"insert",lines:c.lines.slice()})},o.prototype.indexToPosition=function(c,l){for(var v=this.$lines||this.getAllLines(),F=this.getNewLineCharacter().length,S=l||0,O=v.length;S<O;S++)if(c-=v[S].length+F,c<0)return{row:S,column:c+v[S].length+F};return{row:O-1,column:c+v[O-1].length+F}},o.prototype.positionToIndex=function(c,l){for(var v=this.$lines||this.getAllLines(),F=this.getNewLineCharacter().length,S=0,O=Math.min(c.row,v.length),k=l||0;k<O;++k)S+=v[k].length+F;return S+c.column},o.prototype.$split=function(c){return c.split(/\r\n|\r|\n/)},o}();f.prototype.$autoNewLine="",f.prototype.$newLineMode="auto",b.implement(f.prototype,D),Y.Document=f}),ace.define("ace/lib/deep_copy",[],function(R,Y,$){Y.deepCopy=function b(r){if(typeof r!="object"||!r)return r;var D;if(Array.isArray(r)){D=[];for(var d=0;d<r.length;d++)D[d]=b(r[d]);return D}if(Object.prototype.toString.call(r)!=="[object Object]")return r;D={};for(var d in r)D[d]=b(r[d]);return D}}),ace.define("ace/lib/lang",[],function(R,Y,$){"use strict";Y.last=function(D){return D[D.length-1]},Y.stringReverse=function(D){return D.split("").reverse().join("")},Y.stringRepeat=function(D,d){for(var C="";d>0;)d&1&&(C+=D),(d>>=1)&&(D+=D);return C};var b=/^\s\s*/,r=/\s\s*$/;Y.stringTrimLeft=function(D){return D.replace(b,"")},Y.stringTrimRight=function(D){return D.replace(r,"")},Y.copyObject=function(D){var d={};for(var C in D)d[C]=D[C];return d},Y.copyArray=function(D){for(var d=[],C=0,f=D.length;C<f;C++)D[C]&&typeof D[C]=="object"?d[C]=this.copyObject(D[C]):d[C]=D[C];return d},Y.deepCopy=R("./deep_copy").deepCopy,Y.arrayToMap=function(D){for(var d={},C=0;C<D.length;C++)d[D[C]]=1;return d},Y.createMap=function(D){var d=Object.create(null);for(var C in D)d[C]=D[C];return d},Y.arrayRemove=function(D,d){for(var C=0;C<=D.length;C++)d===D[C]&&D.splice(C,1)},Y.escapeRegExp=function(D){return D.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},Y.escapeHTML=function(D){return(""+D).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},Y.getMatchOffsets=function(D,d){var C=[];return D.replace(d,function(f){C.push({offset:arguments[arguments.length-2],length:f.length})}),C},Y.deferredCall=function(D){var d=null,C=function(){d=null,D()},f=function(o){return f.cancel(),d=setTimeout(C,o||0),f};return f.schedule=f,f.call=function(){return this.cancel(),D(),f},f.cancel=function(){return clearTimeout(d),d=null,f},f.isPending=function(){return d},f},Y.delayedCall=function(D,d){var C=null,f=function(){C=null,D()},o=function(c){C==null&&(C=setTimeout(f,c||d))};return o.delay=function(c){C&&clearTimeout(C),C=setTimeout(f,c||d)},o.schedule=o,o.call=function(){this.cancel(),D()},o.cancel=function(){C&&clearTimeout(C),C=null},o.isPending=function(){return C},o},Y.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch(D){return!1}return!0},Y.skipEmptyMatch=function(D,d,C){return C&&D.codePointAt(d)>65535?2:1}}),ace.define("ace/worker/mirror",[],function(R,Y,$){"use strict";var b=R("../document").Document,r=R("../lib/lang"),D=Y.Mirror=function(d){this.sender=d;var C=this.doc=new b(""),f=this.deferredUpdate=r.delayedCall(this.onUpdate.bind(this)),o=this;d.on("change",function(c){var l=c.data;if(l[0].start)C.applyDeltas(l);else for(var v=0;v<l.length;v+=2){var F,S;if(Array.isArray(l[v+1])?F={action:"insert",start:l[v],lines:l[v+1]}:F={action:"remove",start:l[v],end:l[v+1]},(F.action=="insert"?F.start:F.end).row>=C.$lines.length)throw S=new Error("Invalid delta"),S.data={path:o.$path,linesLength:C.$lines.length,start:F.start,end:F.end},S;C.applyDelta(F,!0)}if(o.$timeout)return f.schedule(o.$timeout);o.onUpdate()})};(function(){this.$timeout=500,this.setTimeout=function(d){this.$timeout=d},this.setValue=function(d){this.doc.setValue(d),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(d){this.sender.callback(this.doc.getValue(),d)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(D.prototype)}),ace.define("ace/mode/json/json_parse",[],function(R,Y,$){"use strict";var b,r,D={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},d,C=function(k){throw{name:"SyntaxError",message:k,at:b,text:d}},f=function(k){return k&&k!==r&&C("Expected '"+k+"' instead of '"+r+"'"),r=d.charAt(b),b+=1,r},o=function(){var k,B="";for(r==="-"&&(B="-",f("-"));r>="0"&&r<="9";)B+=r,f();if(r===".")for(B+=".";f()&&r>="0"&&r<="9";)B+=r;if(r==="e"||r==="E")for(B+=r,f(),(r==="-"||r==="+")&&(B+=r,f());r>="0"&&r<="9";)B+=r,f();if(k=+B,!isNaN(k))return k;C("Bad number")},c=function(){var k,B,X="",ee;if(r==='"')for(;f();){if(r==='"')return f(),X;if(r==="\\")if(f(),r==="u"){for(ee=0,B=0;B<4&&(k=parseInt(f(),16),!!isFinite(k));B+=1)ee=ee*16+k;X+=String.fromCharCode(ee)}else{if(typeof D[r]!="string")break;X+=D[r]}else{if(r==`
`||r=="\r")break;X+=r}}C("Bad string")},l=function(){for(;r&&r<=" ";)f()},v=function(){switch(r){case"t":return f("t"),f("r"),f("u"),f("e"),!0;case"f":return f("f"),f("a"),f("l"),f("s"),f("e"),!1;case"n":return f("n"),f("u"),f("l"),f("l"),null}C("Unexpected '"+r+"'")},F,S=function(){var k=[];if(r==="["){if(f("["),l(),r==="]")return f("]"),k;for(;r;){if(k.push(F()),l(),r==="]")return f("]"),k;f(","),l()}}C("Bad array")},O=function(){var k,B={};if(r==="{"){if(f("{"),l(),r==="}")return f("}"),B;for(;r;){if(k=c(),l(),f(":"),Object.hasOwnProperty.call(B,k)&&C('Duplicate key "'+k+'"'),B[k]=F(),l(),r==="}")return f("}"),B;f(","),l()}}C("Bad object")};return F=function(){switch(l(),r){case"{":return O();case"[":return S();case'"':return c();case"-":return o();default:return r>="0"&&r<="9"?o():v()}},function(k,B){var X;return d=k,b=0,r=" ",X=F(),l(),r&&C("Syntax error"),typeof B=="function"?function ee(m,w){var E,h,y=m[w];if(y&&typeof y=="object")for(E in y)Object.hasOwnProperty.call(y,E)&&(h=ee(y,E),h!==void 0?y[E]=h:delete y[E]);return B.call(m,w,y)}({"":X},""):X}}),ace.define("ace/mode/json_worker",[],function(R,Y,$){"use strict";var b=R("../lib/oop"),r=R("../worker/mirror").Mirror,D=R("./json/json_parse"),d=Y.JsonWorker=function(C){r.call(this,C),this.setTimeout(200)};b.inherits(d,r),function(){this.onUpdate=function(){var C=this.doc.getValue(),f=[];try{C&&D(C)}catch(c){var o=this.doc.indexToPosition(c.at-1);f.push({row:o.row,column:o.column,text:c.message,type:"error"})}this.sender.emit("annotate",f)}}.call(d.prototype)})},57051:function(R,Y,$){(function(b,r){R.exports=Y=r()})(this,function(){var b=b||function(r,D){var d;if(typeof window!="undefined"&&window.crypto&&(d=window.crypto),typeof self!="undefined"&&self.crypto&&(d=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(d=globalThis.crypto),!d&&typeof window!="undefined"&&window.msCrypto&&(d=window.msCrypto),!d&&typeof $.g!="undefined"&&$.g.crypto&&(d=$.g.crypto),!d)try{d=$(50477)}catch(m){}var C=function(){if(d){if(typeof d.getRandomValues=="function")try{return d.getRandomValues(new Uint32Array(1))[0]}catch(m){}if(typeof d.randomBytes=="function")try{return d.randomBytes(4).readInt32LE()}catch(m){}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function m(){}return function(w){var E;return m.prototype=w,E=new m,m.prototype=null,E}}(),o={},c=o.lib={},l=c.Base=function(){return{extend:function(m){var w=f(this);return m&&w.mixIn(m),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var w in m)m.hasOwnProperty(w)&&(this[w]=m[w]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),v=c.WordArray=l.extend({init:function(m,w){m=this.words=m||[],w!=D?this.sigBytes=w:this.sigBytes=m.length*4},toString:function(m){return(m||S).stringify(this)},concat:function(m){var w=this.words,E=m.words,h=this.sigBytes,y=m.sigBytes;if(this.clamp(),h%4)for(var g=0;g<y;g++){var A=E[g>>>2]>>>24-g%4*8&255;w[h+g>>>2]|=A<<24-(h+g)%4*8}else for(var x=0;x<y;x+=4)w[h+x>>>2]=E[x>>>2];return this.sigBytes+=y,this},clamp:function(){var m=this.words,w=this.sigBytes;m[w>>>2]&=4294967295<<32-w%4*8,m.length=r.ceil(w/4)},clone:function(){var m=l.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var w=[],E=0;E<m;E+=4)w.push(C());return new v.init(w,m)}}),F=o.enc={},S=F.Hex={stringify:function(m){for(var w=m.words,E=m.sigBytes,h=[],y=0;y<E;y++){var g=w[y>>>2]>>>24-y%4*8&255;h.push((g>>>4).toString(16)),h.push((g&15).toString(16))}return h.join("")},parse:function(m){for(var w=m.length,E=[],h=0;h<w;h+=2)E[h>>>3]|=parseInt(m.substr(h,2),16)<<24-h%8*4;return new v.init(E,w/2)}},O=F.Latin1={stringify:function(m){for(var w=m.words,E=m.sigBytes,h=[],y=0;y<E;y++){var g=w[y>>>2]>>>24-y%4*8&255;h.push(String.fromCharCode(g))}return h.join("")},parse:function(m){for(var w=m.length,E=[],h=0;h<w;h++)E[h>>>2]|=(m.charCodeAt(h)&255)<<24-h%4*8;return new v.init(E,w)}},k=F.Utf8={stringify:function(m){try{return decodeURIComponent(escape(O.stringify(m)))}catch(w){throw new Error("Malformed UTF-8 data")}},parse:function(m){return O.parse(unescape(encodeURIComponent(m)))}},B=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=k.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var w,E=this._data,h=E.words,y=E.sigBytes,g=this.blockSize,A=g*4,x=y/A;m?x=r.ceil(x):x=r.max((x|0)-this._minBufferSize,0);var P=x*g,M=r.min(P*4,y);if(P){for(var N=0;N<P;N+=g)this._doProcessBlock(h,N);w=h.splice(0,P),E.sigBytes-=M}return new v.init(w,M)},clone:function(){var m=l.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0}),X=c.Hasher=B.extend({cfg:l.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){B.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var w=this._doFinalize();return w},blockSize:512/32,_createHelper:function(m){return function(w,E){return new m.init(E).finalize(w)}},_createHmacHelper:function(m){return function(w,E){return new ee.HMAC.init(m,E).finalize(w)}}}),ee=o.algo={};return o}(Math);return b})},91778:function(R,Y,$){(function(b,r){R.exports=Y=r($(57051))})(this,function(b){return function(r){var D=b,d=D.lib,C=d.WordArray,f=d.Hasher,o=D.algo,c=[];(function(){for(var k=0;k<64;k++)c[k]=r.abs(r.sin(k+1))*4294967296|0})();var l=o.MD5=f.extend({_doReset:function(){this._hash=new C.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(k,B){for(var X=0;X<16;X++){var ee=B+X,m=k[ee];k[ee]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var w=this._hash.words,E=k[B+0],h=k[B+1],y=k[B+2],g=k[B+3],A=k[B+4],x=k[B+5],P=k[B+6],M=k[B+7],N=k[B+8],_=k[B+9],I=k[B+10],W=k[B+11],oe=k[B+12],Z=k[B+13],ae=k[B+14],ue=k[B+15],J=w[0],Q=w[1],j=w[2],z=w[3];J=v(J,Q,j,z,E,7,c[0]),z=v(z,J,Q,j,h,12,c[1]),j=v(j,z,J,Q,y,17,c[2]),Q=v(Q,j,z,J,g,22,c[3]),J=v(J,Q,j,z,A,7,c[4]),z=v(z,J,Q,j,x,12,c[5]),j=v(j,z,J,Q,P,17,c[6]),Q=v(Q,j,z,J,M,22,c[7]),J=v(J,Q,j,z,N,7,c[8]),z=v(z,J,Q,j,_,12,c[9]),j=v(j,z,J,Q,I,17,c[10]),Q=v(Q,j,z,J,W,22,c[11]),J=v(J,Q,j,z,oe,7,c[12]),z=v(z,J,Q,j,Z,12,c[13]),j=v(j,z,J,Q,ae,17,c[14]),Q=v(Q,j,z,J,ue,22,c[15]),J=F(J,Q,j,z,h,5,c[16]),z=F(z,J,Q,j,P,9,c[17]),j=F(j,z,J,Q,W,14,c[18]),Q=F(Q,j,z,J,E,20,c[19]),J=F(J,Q,j,z,x,5,c[20]),z=F(z,J,Q,j,I,9,c[21]),j=F(j,z,J,Q,ue,14,c[22]),Q=F(Q,j,z,J,A,20,c[23]),J=F(J,Q,j,z,_,5,c[24]),z=F(z,J,Q,j,ae,9,c[25]),j=F(j,z,J,Q,g,14,c[26]),Q=F(Q,j,z,J,N,20,c[27]),J=F(J,Q,j,z,Z,5,c[28]),z=F(z,J,Q,j,y,9,c[29]),j=F(j,z,J,Q,M,14,c[30]),Q=F(Q,j,z,J,oe,20,c[31]),J=S(J,Q,j,z,x,4,c[32]),z=S(z,J,Q,j,N,11,c[33]),j=S(j,z,J,Q,W,16,c[34]),Q=S(Q,j,z,J,ae,23,c[35]),J=S(J,Q,j,z,h,4,c[36]),z=S(z,J,Q,j,A,11,c[37]),j=S(j,z,J,Q,M,16,c[38]),Q=S(Q,j,z,J,I,23,c[39]),J=S(J,Q,j,z,Z,4,c[40]),z=S(z,J,Q,j,E,11,c[41]),j=S(j,z,J,Q,g,16,c[42]),Q=S(Q,j,z,J,P,23,c[43]),J=S(J,Q,j,z,_,4,c[44]),z=S(z,J,Q,j,oe,11,c[45]),j=S(j,z,J,Q,ue,16,c[46]),Q=S(Q,j,z,J,y,23,c[47]),J=O(J,Q,j,z,E,6,c[48]),z=O(z,J,Q,j,M,10,c[49]),j=O(j,z,J,Q,ae,15,c[50]),Q=O(Q,j,z,J,x,21,c[51]),J=O(J,Q,j,z,oe,6,c[52]),z=O(z,J,Q,j,g,10,c[53]),j=O(j,z,J,Q,I,15,c[54]),Q=O(Q,j,z,J,h,21,c[55]),J=O(J,Q,j,z,N,6,c[56]),z=O(z,J,Q,j,ue,10,c[57]),j=O(j,z,J,Q,P,15,c[58]),Q=O(Q,j,z,J,Z,21,c[59]),J=O(J,Q,j,z,A,6,c[60]),z=O(z,J,Q,j,W,10,c[61]),j=O(j,z,J,Q,y,15,c[62]),Q=O(Q,j,z,J,_,21,c[63]),w[0]=w[0]+J|0,w[1]=w[1]+Q|0,w[2]=w[2]+j|0,w[3]=w[3]+z|0},_doFinalize:function(){var k=this._data,B=k.words,X=this._nDataBytes*8,ee=k.sigBytes*8;B[ee>>>5]|=128<<24-ee%32;var m=r.floor(X/4294967296),w=X;B[(ee+64>>>9<<4)+15]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,B[(ee+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,k.sigBytes=(B.length+1)*4,this._process();for(var E=this._hash,h=E.words,y=0;y<4;y++){var g=h[y];h[y]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}return E},clone:function(){var k=f.clone.call(this);return k._hash=this._hash.clone(),k}});function v(k,B,X,ee,m,w,E){var h=k+(B&X|~B&ee)+m+E;return(h<<w|h>>>32-w)+B}function F(k,B,X,ee,m,w,E){var h=k+(B&ee|X&~ee)+m+E;return(h<<w|h>>>32-w)+B}function S(k,B,X,ee,m,w,E){var h=k+(B^X^ee)+m+E;return(h<<w|h>>>32-w)+B}function O(k,B,X,ee,m,w,E){var h=k+(X^(B|~ee))+m+E;return(h<<w|h>>>32-w)+B}D.MD5=f._createHelper(l),D.HmacMD5=f._createHmacHelper(l)}(Math),b.MD5})},85589:function(R){(function(Y,$){R.exports=$()})(this,function(){"use strict";function Y(T,U){return U={exports:{}},T(U,U.exports),U.exports}var $=Y(function(T){var U=T.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=U)}),b=Y(function(T){var U=T.exports={version:"2.6.5"};typeof __e=="number"&&(__e=U)}),r=b.version,D=function(T){return typeof T=="object"?T!==null:typeof T=="function"},d=function(T){if(!D(T))throw TypeError(T+" is not an object!");return T},C=function(T){try{return!!T()}catch(U){return!0}},f=!C(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),o=$.document,c=D(o)&&D(o.createElement),l=function(T){return c?o.createElement(T):{}},v=!f&&!C(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7}),F=function(T,U){if(!D(T))return T;var ie,se;if(U&&typeof(ie=T.toString)=="function"&&!D(se=ie.call(T))||typeof(ie=T.valueOf)=="function"&&!D(se=ie.call(T))||!U&&typeof(ie=T.toString)=="function"&&!D(se=ie.call(T)))return se;throw TypeError("Can't convert object to primitive value")},S=Object.defineProperty,O=f?Object.defineProperty:function(U,ie,se){if(d(U),ie=F(ie,!0),d(se),v)try{return S(U,ie,se)}catch(le){}if("get"in se||"set"in se)throw TypeError("Accessors not supported!");return"value"in se&&(U[ie]=se.value),U},k={f:O},B=function(T,U){return{enumerable:!(T&1),configurable:!(T&2),writable:!(T&4),value:U}},X=f?function(T,U,ie){return k.f(T,U,B(1,ie))}:function(T,U,ie){return T[U]=ie,T},ee={}.hasOwnProperty,m=function(T,U){return ee.call(T,U)},w=0,E=Math.random(),h=function(T){return"Symbol(".concat(T===void 0?"":T,")_",(++w+E).toString(36))},y=!1,g=Y(function(T){var U="__core-js_shared__",ie=$[U]||($[U]={});(T.exports=function(se,le){return ie[se]||(ie[se]=le!==void 0?le:{})})("versions",[]).push({version:b.version,mode:y?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),A=g("native-function-to-string",Function.toString),x=Y(function(T){var U=h("src"),ie="toString",se=(""+A).split(ie);b.inspectSource=function(le){return A.call(le)},(T.exports=function(le,De,Ce,Me){var Ie=typeof Ce=="function";Ie&&(m(Ce,"name")||X(Ce,"name",De)),le[De]!==Ce&&(Ie&&(m(Ce,U)||X(Ce,U,le[De]?""+le[De]:se.join(String(De)))),le===$?le[De]=Ce:Me?le[De]?le[De]=Ce:X(le,De,Ce):(delete le[De],X(le,De,Ce)))})(Function.prototype,ie,function(){return typeof this=="function"&&this[U]||A.call(this)})}),P=function(T){if(typeof T!="function")throw TypeError(T+" is not a function!");return T},M=function(T,U,ie){if(P(T),U===void 0)return T;switch(ie){case 1:return function(se){return T.call(U,se)};case 2:return function(se,le){return T.call(U,se,le)};case 3:return function(se,le,De){return T.call(U,se,le,De)}}return function(){return T.apply(U,arguments)}},N="prototype",_=function(T,U,ie){var se=T&_.F,le=T&_.G,De=T&_.S,Ce=T&_.P,Me=T&_.B,Ie=le?$:De?$[U]||($[U]={}):($[U]||{})[N],ot=le?b:b[U]||(b[U]={}),at=ot[N]||(ot[N]={}),Je,Ge,$e,ht;le&&(ie=U);for(Je in ie)Ge=!se&&Ie&&Ie[Je]!==void 0,$e=(Ge?Ie:ie)[Je],ht=Me&&Ge?M($e,$):Ce&&typeof $e=="function"?M(Function.call,$e):$e,Ie&&x(Ie,Je,$e,T&_.U),ot[Je]!=$e&&X(ot,Je,ht),Ce&&at[Je]!=$e&&(at[Je]=$e)};$.core=b,_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128;var I=_,W=Math.ceil,oe=Math.floor,Z=function(T){return isNaN(T=+T)?0:(T>0?oe:W)(T)},ae=function(T){if(T==null)throw TypeError("Can't call method on  "+T);return T},ue=function(T){return function(U,ie){var se=String(ae(U)),le=Z(ie),De=se.length,Ce,Me;return le<0||le>=De?T?"":void 0:(Ce=se.charCodeAt(le),Ce<55296||Ce>56319||le+1===De||(Me=se.charCodeAt(le+1))<56320||Me>57343?T?se.charAt(le):Ce:T?se.slice(le,le+2):(Ce-55296<<10)+(Me-56320)+65536)}},J=ue(!1);I(I.P,"String",{codePointAt:function(U){return J(this,U)}});var Q=b.String.codePointAt,j=Math.max,z=Math.min,ke=function(T,U){return T=Z(T),T<0?j(T+U,0):z(T,U)},ge=String.fromCharCode,Be=String.fromCodePoint;I(I.S+I.F*(!!Be&&Be.length!=1),"String",{fromCodePoint:function(U){for(var ie=arguments,se=[],le=arguments.length,De=0,Ce;le>De;){if(Ce=+ie[De++],ke(Ce,1114111)!==Ce)throw RangeError(Ce+" is not a valid code point");se.push(Ce<65536?ge(Ce):ge(((Ce-=65536)>>10)+55296,Ce%1024+56320))}return se.join("")}});var ze=b.String.fromCodePoint,Te=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ut=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ct=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,gt={Space_Separator:Te,ID_Start:ut,ID_Continue:ct},_e={isSpaceSeparator:function(U){return typeof U=="string"&&gt.Space_Separator.test(U)},isIdStartChar:function(U){return typeof U=="string"&&(U>="a"&&U<="z"||U>="A"&&U<="Z"||U==="$"||U==="_"||gt.ID_Start.test(U))},isIdContinueChar:function(U){return typeof U=="string"&&(U>="a"&&U<="z"||U>="A"&&U<="Z"||U>="0"&&U<="9"||U==="$"||U==="_"||U==="\u200C"||U==="\u200D"||gt.ID_Continue.test(U))},isDigit:function(U){return typeof U=="string"&&/[0-9]/.test(U)},isHexDigit:function(U){return typeof U=="string"&&/[0-9A-Fa-f]/.test(U)}},kt,Oe,qe,bt,et,je,Le,wt,Dt,Xt=function(U,ie){kt=String(U),Oe="start",qe=[],bt=0,et=1,je=0,Le=void 0,wt=void 0,Dt=void 0;do Le=xt(),qt[Oe]();while(Le.type!=="eof");return typeof ie=="function"?Bt({"":Dt},"",ie):Dt};function Bt(T,U,ie){var se=T[U];if(se!=null&&typeof se=="object")if(Array.isArray(se))for(var le=0;le<se.length;le++){var De=String(le),Ce=Bt(se,De,ie);Ce===void 0?delete se[De]:Object.defineProperty(se,De,{value:Ce,writable:!0,enumerable:!0,configurable:!0})}else for(var Me in se){var Ie=Bt(se,Me,ie);Ie===void 0?delete se[Me]:Object.defineProperty(se,Me,{value:Ie,writable:!0,enumerable:!0,configurable:!0})}return ie.call(T,U,se)}var pe,he,vt,Ze,ve;function xt(){for(pe="default",he="",vt=!1,Ze=1;;){ve=Ke();var T=Mt[pe]();if(T)return T}}function Ke(){if(kt[bt])return String.fromCodePoint(kt.codePointAt(bt))}function H(){var T=Ke();return T===`
`?(et++,je=0):T?je+=T.length:je++,T&&(bt+=T.length),T}var Mt={default:function(){switch(ve){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":H();return;case"/":H(),pe="comment";return;case void 0:return H(),we("eof")}if(_e.isSpaceSeparator(ve)){H();return}return Mt[Oe]()},comment:function(){switch(ve){case"*":H(),pe="multiLineComment";return;case"/":H(),pe="singleLineComment";return}throw xe(H())},multiLineComment:function(){switch(ve){case"*":H(),pe="multiLineCommentAsterisk";return;case void 0:throw xe(H())}H()},multiLineCommentAsterisk:function(){switch(ve){case"*":H();return;case"/":H(),pe="default";return;case void 0:throw xe(H())}H(),pe="multiLineComment"},singleLineComment:function(){switch(ve){case`
`:case"\r":case"\u2028":case"\u2029":H(),pe="default";return;case void 0:return H(),we("eof")}H()},value:function(){switch(ve){case"{":case"[":return we("punctuator",H());case"n":return H(),rt("ull"),we("null",null);case"t":return H(),rt("rue"),we("boolean",!0);case"f":return H(),rt("alse"),we("boolean",!1);case"-":case"+":H()==="-"&&(Ze=-1),pe="sign";return;case".":he=H(),pe="decimalPointLeading";return;case"0":he=H(),pe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":he=H(),pe="decimalInteger";return;case"I":return H(),rt("nfinity"),we("numeric",1/0);case"N":return H(),rt("aN"),we("numeric",NaN);case'"':case"'":vt=H()==='"',he="",pe="string";return}throw xe(H())},identifierNameStartEscape:function(){if(ve!=="u")throw xe(H());H();var U=We();switch(U){case"$":case"_":break;default:if(!_e.isIdStartChar(U))throw Ft();break}he+=U,pe="identifierName"},identifierName:function(){switch(ve){case"$":case"_":case"\u200C":case"\u200D":he+=H();return;case"\\":H(),pe="identifierNameEscape";return}if(_e.isIdContinueChar(ve)){he+=H();return}return we("identifier",he)},identifierNameEscape:function(){if(ve!=="u")throw xe(H());H();var U=We();switch(U){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!_e.isIdContinueChar(U))throw Ft();break}he+=U,pe="identifierName"},sign:function(){switch(ve){case".":he=H(),pe="decimalPointLeading";return;case"0":he=H(),pe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":he=H(),pe="decimalInteger";return;case"I":return H(),rt("nfinity"),we("numeric",Ze*(1/0));case"N":return H(),rt("aN"),we("numeric",NaN)}throw xe(H())},zero:function(){switch(ve){case".":he+=H(),pe="decimalPoint";return;case"e":case"E":he+=H(),pe="decimalExponent";return;case"x":case"X":he+=H(),pe="hexadecimal";return}return we("numeric",Ze*0)},decimalInteger:function(){switch(ve){case".":he+=H(),pe="decimalPoint";return;case"e":case"E":he+=H(),pe="decimalExponent";return}if(_e.isDigit(ve)){he+=H();return}return we("numeric",Ze*Number(he))},decimalPointLeading:function(){if(_e.isDigit(ve)){he+=H(),pe="decimalFraction";return}throw xe(H())},decimalPoint:function(){switch(ve){case"e":case"E":he+=H(),pe="decimalExponent";return}if(_e.isDigit(ve)){he+=H(),pe="decimalFraction";return}return we("numeric",Ze*Number(he))},decimalFraction:function(){switch(ve){case"e":case"E":he+=H(),pe="decimalExponent";return}if(_e.isDigit(ve)){he+=H();return}return we("numeric",Ze*Number(he))},decimalExponent:function(){switch(ve){case"+":case"-":he+=H(),pe="decimalExponentSign";return}if(_e.isDigit(ve)){he+=H(),pe="decimalExponentInteger";return}throw xe(H())},decimalExponentSign:function(){if(_e.isDigit(ve)){he+=H(),pe="decimalExponentInteger";return}throw xe(H())},decimalExponentInteger:function(){if(_e.isDigit(ve)){he+=H();return}return we("numeric",Ze*Number(he))},hexadecimal:function(){if(_e.isHexDigit(ve)){he+=H(),pe="hexadecimalInteger";return}throw xe(H())},hexadecimalInteger:function(){if(_e.isHexDigit(ve)){he+=H();return}return we("numeric",Ze*Number(he))},string:function(){switch(ve){case"\\":H(),he+=Vt();return;case'"':if(vt)return H(),we("string",he);he+=H();return;case"'":if(!vt)return H(),we("string",he);he+=H();return;case`
`:case"\r":throw xe(H());case"\u2028":case"\u2029":Ut(ve);break;case void 0:throw xe(H())}he+=H()},start:function(){switch(ve){case"{":case"[":return we("punctuator",H())}pe="value"},beforePropertyName:function(){switch(ve){case"$":case"_":he=H(),pe="identifierName";return;case"\\":H(),pe="identifierNameStartEscape";return;case"}":return we("punctuator",H());case'"':case"'":vt=H()==='"',pe="string";return}if(_e.isIdStartChar(ve)){he+=H(),pe="identifierName";return}throw xe(H())},afterPropertyName:function(){if(ve===":")return we("punctuator",H());throw xe(H())},beforePropertyValue:function(){pe="value"},afterPropertyValue:function(){switch(ve){case",":case"}":return we("punctuator",H())}throw xe(H())},beforeArrayValue:function(){if(ve==="]")return we("punctuator",H());pe="value"},afterArrayValue:function(){switch(ve){case",":case"]":return we("punctuator",H())}throw xe(H())},end:function(){throw xe(H())}};function we(T,U){return{type:T,value:U,line:et,column:je}}function rt(T){for(var U=0,ie=T;U<ie.length;U+=1){var se=ie[U],le=Ke();if(le!==se)throw xe(H());H()}}function Vt(){var T=Ke();switch(T){case"b":return H(),"\b";case"f":return H(),"\f";case"n":return H(),`
`;case"r":return H(),"\r";case"t":return H(),"	";case"v":return H(),"\v";case"0":if(H(),_e.isDigit(Ke()))throw xe(H());return"\0";case"x":return H(),Qt();case"u":return H(),We();case`
`:case"\u2028":case"\u2029":return H(),"";case"\r":return H(),Ke()===`
`&&H(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw xe(H());case void 0:throw xe(H())}return H()}function Qt(){var T="",U=Ke();if(!_e.isHexDigit(U)||(T+=H(),U=Ke(),!_e.isHexDigit(U)))throw xe(H());return T+=H(),String.fromCodePoint(parseInt(T,16))}function We(){for(var T="",U=4;U-- >0;){var ie=Ke();if(!_e.isHexDigit(ie))throw xe(H());T+=H()}return String.fromCodePoint(parseInt(T,16))}var qt={start:function(){if(Le.type==="eof")throw it();Ot()},beforePropertyName:function(){switch(Le.type){case"identifier":case"string":wt=Le.value,Oe="afterPropertyName";return;case"punctuator":At();return;case"eof":throw it()}},afterPropertyName:function(){if(Le.type==="eof")throw it();Oe="beforePropertyValue"},beforePropertyValue:function(){if(Le.type==="eof")throw it();Ot()},beforeArrayValue:function(){if(Le.type==="eof")throw it();if(Le.type==="punctuator"&&Le.value==="]"){At();return}Ot()},afterPropertyValue:function(){if(Le.type==="eof")throw it();switch(Le.value){case",":Oe="beforePropertyName";return;case"}":At()}},afterArrayValue:function(){if(Le.type==="eof")throw it();switch(Le.value){case",":Oe="beforeArrayValue";return;case"]":At()}},end:function(){}};function Ot(){var T;switch(Le.type){case"punctuator":switch(Le.value){case"{":T={};break;case"[":T=[];break}break;case"null":case"boolean":case"numeric":case"string":T=Le.value;break}if(Dt===void 0)Dt=T;else{var U=qe[qe.length-1];Array.isArray(U)?U.push(T):Object.defineProperty(U,wt,{value:T,writable:!0,enumerable:!0,configurable:!0})}if(T!==null&&typeof T=="object")qe.push(T),Array.isArray(T)?Oe="beforeArrayValue":Oe="beforePropertyName";else{var ie=qe[qe.length-1];ie==null?Oe="end":Array.isArray(ie)?Oe="afterArrayValue":Oe="afterPropertyValue"}}function At(){qe.pop();var T=qe[qe.length-1];T==null?Oe="end":Array.isArray(T)?Oe="afterArrayValue":Oe="afterPropertyValue"}function xe(T){return St(T===void 0?"JSON5: invalid end of input at "+et+":"+je:"JSON5: invalid character '"+Ct(T)+"' at "+et+":"+je)}function it(){return St("JSON5: invalid end of input at "+et+":"+je)}function Ft(){return je-=5,St("JSON5: invalid identifier character at "+et+":"+je)}function Ut(T){console.warn("JSON5: '"+Ct(T)+"' in strings is not valid ECMAScript; consider escaping")}function Ct(T){var U={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(U[T])return U[T];if(T<" "){var ie=T.charCodeAt(0).toString(16);return"\\x"+("00"+ie).substring(ie.length)}return T}function St(T){var U=new SyntaxError(T);return U.lineNumber=et,U.columnNumber=je,U}var Zt=function(U,ie,se){var le=[],De="",Ce,Me,Ie="",ot;if(ie!=null&&typeof ie=="object"&&!Array.isArray(ie)&&(se=ie.space,ot=ie.quote,ie=ie.replacer),typeof ie=="function")Me=ie;else if(Array.isArray(ie)){Ce=[];for(var at=0,Je=ie;at<Je.length;at+=1){var Ge=Je[at],$e=void 0;typeof Ge=="string"?$e=Ge:(typeof Ge=="number"||Ge instanceof String||Ge instanceof Number)&&($e=String(Ge)),$e!==void 0&&Ce.indexOf($e)<0&&Ce.push($e)}}return se instanceof Number?se=Number(se):se instanceof String&&(se=String(se)),typeof se=="number"?se>0&&(se=Math.min(10,Math.floor(se)),Ie="          ".substr(0,se)):typeof se=="string"&&(Ie=se.substr(0,10)),ht("",{"":U});function ht(be,Pe){var me=Pe[be];switch(me!=null&&(typeof me.toJSON5=="function"?me=me.toJSON5(be):typeof me.toJSON=="function"&&(me=me.toJSON(be))),Me&&(me=Me.call(Pe,be,me)),me instanceof Number?me=Number(me):me instanceof String?me=String(me):me instanceof Boolean&&(me=me.valueOf()),me){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof me=="string")return Tt(me,!1);if(typeof me=="number")return String(me);if(typeof me=="object")return Array.isArray(me)?sn(me):pt(me)}function Tt(be){for(var Pe={"'":.1,'"':.2},me={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Re="",Ye=0;Ye<be.length;Ye++){var Ve=be[Ye];switch(Ve){case"'":case'"':Pe[Ve]++,Re+=Ve;continue;case"\0":if(_e.isDigit(be[Ye+1])){Re+="\\x00";continue}}if(me[Ve]){Re+=me[Ve];continue}if(Ve<" "){var dt=Ve.charCodeAt(0).toString(16);Re+="\\x"+("00"+dt).substring(dt.length);continue}Re+=Ve}var Xe=ot||Object.keys(Pe).reduce(function(tt,lt){return Pe[tt]<Pe[lt]?tt:lt});return Re=Re.replace(new RegExp(Xe,"g"),me[Xe]),Xe+Re+Xe}function pt(be){if(le.indexOf(be)>=0)throw TypeError("Converting circular structure to JSON5");le.push(be);var Pe=De;De=De+Ie;for(var me=Ce||Object.keys(be),Re=[],Ye=0,Ve=me;Ye<Ve.length;Ye+=1){var dt=Ve[Ye],Xe=ht(dt,be);if(Xe!==void 0){var tt=Dn(dt)+":";Ie!==""&&(tt+=" "),tt+=Xe,Re.push(tt)}}var lt;if(Re.length===0)lt="{}";else{var mt;if(Ie==="")mt=Re.join(","),lt="{"+mt+"}";else{var Lt=`,
`+De;mt=Re.join(Lt),lt=`{
`+De+mt+`,
`+Pe+"}"}}return le.pop(),De=Pe,lt}function Dn(be){if(be.length===0)return Tt(be,!0);var Pe=String.fromCodePoint(be.codePointAt(0));if(!_e.isIdStartChar(Pe))return Tt(be,!0);for(var me=Pe.length;me<be.length;me++)if(!_e.isIdContinueChar(String.fromCodePoint(be.codePointAt(me))))return Tt(be,!0);return be}function sn(be){if(le.indexOf(be)>=0)throw TypeError("Converting circular structure to JSON5");le.push(be);var Pe=De;De=De+Ie;for(var me=[],Re=0;Re<be.length;Re++){var Ye=ht(String(Re),be);me.push(Ye!==void 0?Ye:"null")}var Ve;if(me.length===0)Ve="[]";else if(Ie===""){var dt=me.join(",");Ve="["+dt+"]"}else{var Xe=`,
`+De,tt=me.join(Xe);Ve=`[
`+De+tt+`,
`+Pe+"]"}return le.pop(),De=Pe,Ve}},en={parse:Xt,stringify:Zt},tn=en,nn=tn;return nn})},5324:(R,Y,$)=>{var b=$(40294);function r(D){this.mode=b.MODE_8BIT_BYTE,this.data=D}r.prototype={getLength:function(D){return this.data.length},write:function(D){for(var d=0;d<this.data.length;d++)D.put(this.data.charCodeAt(d),8)}},R.exports=r},71580:R=>{function Y(){this.buffer=new Array,this.length=0}Y.prototype={get:function($){var b=Math.floor($/8);return(this.buffer[b]>>>7-$%8&1)==1},put:function($,b){for(var r=0;r<b;r++)this.putBit(($>>>b-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function($){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),$&&(this.buffer[b]|=128>>>this.length%8),this.length++}},R.exports=Y},91075:R=>{R.exports={L:1,M:0,Q:3,H:2}},14199:(R,Y,$)=>{var b=$(43979);function r(D,d){if(D.length==null)throw new Error(D.length+"/"+d);for(var C=0;C<D.length&&D[C]==0;)C++;this.num=new Array(D.length-C+d);for(var f=0;f<D.length-C;f++)this.num[f]=D[f+C]}r.prototype={get:function(D){return this.num[D]},getLength:function(){return this.num.length},multiply:function(D){for(var d=new Array(this.getLength()+D.getLength()-1),C=0;C<this.getLength();C++)for(var f=0;f<D.getLength();f++)d[C+f]^=b.gexp(b.glog(this.get(C))+b.glog(D.get(f)));return new r(d,0)},mod:function(D){if(this.getLength()-D.getLength()<0)return this;for(var d=b.glog(this.get(0))-b.glog(D.get(0)),C=new Array(this.getLength()),f=0;f<this.getLength();f++)C[f]=this.get(f);for(var f=0;f<D.getLength();f++)C[f]^=b.gexp(b.glog(D.get(f))+d);return new r(C,0).mod(D)}},R.exports=r},56139:(R,Y,$)=>{var b=$(5324),r=$(92157),D=$(71580),d=$(14549),C=$(14199);function f(c,l){this.typeNumber=c,this.errorCorrectLevel=l,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var o=f.prototype;o.addData=function(c){var l=new b(c);this.dataList.push(l),this.dataCache=null},o.isDark=function(c,l){if(c<0||this.moduleCount<=c||l<0||this.moduleCount<=l)throw new Error(c+","+l);return this.modules[c][l]},o.getModuleCount=function(){return this.moduleCount},o.make=function(){if(this.typeNumber<1){var c=1;for(c=1;c<40;c++){for(var l=r.getRSBlocks(c,this.errorCorrectLevel),v=new D,F=0,S=0;S<l.length;S++)F+=l[S].dataCount;for(var S=0;S<this.dataList.length;S++){var O=this.dataList[S];v.put(O.mode,4),v.put(O.getLength(),d.getLengthInBits(O.mode,c)),O.write(v)}if(v.getLengthInBits()<=F*8)break}this.typeNumber=c}this.makeImpl(!1,this.getBestMaskPattern())},o.makeImpl=function(c,l){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++){this.modules[v]=new Array(this.moduleCount);for(var F=0;F<this.moduleCount;F++)this.modules[v][F]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(c,l),this.typeNumber>=7&&this.setupTypeNumber(c),this.dataCache==null&&(this.dataCache=f.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,l)},o.setupPositionProbePattern=function(c,l){for(var v=-1;v<=7;v++)if(!(c+v<=-1||this.moduleCount<=c+v))for(var F=-1;F<=7;F++)l+F<=-1||this.moduleCount<=l+F||(0<=v&&v<=6&&(F==0||F==6)||0<=F&&F<=6&&(v==0||v==6)||2<=v&&v<=4&&2<=F&&F<=4?this.modules[c+v][l+F]=!0:this.modules[c+v][l+F]=!1)},o.getBestMaskPattern=function(){for(var c=0,l=0,v=0;v<8;v++){this.makeImpl(!0,v);var F=d.getLostPoint(this);(v==0||c>F)&&(c=F,l=v)}return l},o.createMovieClip=function(c,l,v){var F=c.createEmptyMovieClip(l,v),S=1;this.make();for(var O=0;O<this.modules.length;O++)for(var k=O*S,B=0;B<this.modules[O].length;B++){var X=B*S,ee=this.modules[O][B];ee&&(F.beginFill(0,100),F.moveTo(X,k),F.lineTo(X+S,k),F.lineTo(X+S,k+S),F.lineTo(X,k+S),F.endFill())}return F},o.setupTimingPattern=function(){for(var c=8;c<this.moduleCount-8;c++)this.modules[c][6]==null&&(this.modules[c][6]=c%2==0);for(var l=8;l<this.moduleCount-8;l++)this.modules[6][l]==null&&(this.modules[6][l]=l%2==0)},o.setupPositionAdjustPattern=function(){for(var c=d.getPatternPosition(this.typeNumber),l=0;l<c.length;l++)for(var v=0;v<c.length;v++){var F=c[l],S=c[v];if(this.modules[F][S]==null)for(var O=-2;O<=2;O++)for(var k=-2;k<=2;k++)O==-2||O==2||k==-2||k==2||O==0&&k==0?this.modules[F+O][S+k]=!0:this.modules[F+O][S+k]=!1}},o.setupTypeNumber=function(c){for(var l=d.getBCHTypeNumber(this.typeNumber),v=0;v<18;v++){var F=!c&&(l>>v&1)==1;this.modules[Math.floor(v/3)][v%3+this.moduleCount-8-3]=F}for(var v=0;v<18;v++){var F=!c&&(l>>v&1)==1;this.modules[v%3+this.moduleCount-8-3][Math.floor(v/3)]=F}},o.setupTypeInfo=function(c,l){for(var v=this.errorCorrectLevel<<3|l,F=d.getBCHTypeInfo(v),S=0;S<15;S++){var O=!c&&(F>>S&1)==1;S<6?this.modules[S][8]=O:S<8?this.modules[S+1][8]=O:this.modules[this.moduleCount-15+S][8]=O}for(var S=0;S<15;S++){var O=!c&&(F>>S&1)==1;S<8?this.modules[8][this.moduleCount-S-1]=O:S<9?this.modules[8][15-S-1+1]=O:this.modules[8][15-S-1]=O}this.modules[this.moduleCount-8][8]=!c},o.mapData=function(c,l){for(var v=-1,F=this.moduleCount-1,S=7,O=0,k=this.moduleCount-1;k>0;k-=2)for(k==6&&k--;;){for(var B=0;B<2;B++)if(this.modules[F][k-B]==null){var X=!1;O<c.length&&(X=(c[O]>>>S&1)==1);var ee=d.getMask(l,F,k-B);ee&&(X=!X),this.modules[F][k-B]=X,S--,S==-1&&(O++,S=7)}if(F+=v,F<0||this.moduleCount<=F){F-=v,v=-v;break}}},f.PAD0=236,f.PAD1=17,f.createData=function(c,l,v){for(var F=r.getRSBlocks(c,l),S=new D,O=0;O<v.length;O++){var k=v[O];S.put(k.mode,4),S.put(k.getLength(),d.getLengthInBits(k.mode,c)),k.write(S)}for(var B=0,O=0;O<F.length;O++)B+=F[O].dataCount;if(S.getLengthInBits()>B*8)throw new Error("code length overflow. ("+S.getLengthInBits()+">"+B*8+")");for(S.getLengthInBits()+4<=B*8&&S.put(0,4);S.getLengthInBits()%8!=0;)S.putBit(!1);for(;!(S.getLengthInBits()>=B*8||(S.put(f.PAD0,8),S.getLengthInBits()>=B*8));)S.put(f.PAD1,8);return f.createBytes(S,F)},f.createBytes=function(c,l){for(var v=0,F=0,S=0,O=new Array(l.length),k=new Array(l.length),B=0;B<l.length;B++){var X=l[B].dataCount,ee=l[B].totalCount-X;F=Math.max(F,X),S=Math.max(S,ee),O[B]=new Array(X);for(var m=0;m<O[B].length;m++)O[B][m]=255&c.buffer[m+v];v+=X;var w=d.getErrorCorrectPolynomial(ee),E=new C(O[B],w.getLength()-1),h=E.mod(w);k[B]=new Array(w.getLength()-1);for(var m=0;m<k[B].length;m++){var y=m+h.getLength()-k[B].length;k[B][m]=y>=0?h.get(y):0}}for(var g=0,m=0;m<l.length;m++)g+=l[m].totalCount;for(var A=new Array(g),x=0,m=0;m<F;m++)for(var B=0;B<l.length;B++)m<O[B].length&&(A[x++]=O[B][m]);for(var m=0;m<S;m++)for(var B=0;B<l.length;B++)m<k[B].length&&(A[x++]=k[B][m]);return A},R.exports=f},92157:(R,Y,$)=>{var b=$(91075);function r(D,d){this.totalCount=D,this.dataCount=d}r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(D,d){var C=r.getRsBlockTable(D,d);if(C==null)throw new Error("bad rs block @ typeNumber:"+D+"/errorCorrectLevel:"+d);for(var f=C.length/3,o=new Array,c=0;c<f;c++)for(var l=C[c*3+0],v=C[c*3+1],F=C[c*3+2],S=0;S<l;S++)o.push(new r(v,F));return o},r.getRsBlockTable=function(D,d){switch(d){case b.L:return r.RS_BLOCK_TABLE[(D-1)*4+0];case b.M:return r.RS_BLOCK_TABLE[(D-1)*4+1];case b.Q:return r.RS_BLOCK_TABLE[(D-1)*4+2];case b.H:return r.RS_BLOCK_TABLE[(D-1)*4+3];default:return}},R.exports=r},43979:R=>{for(var Y={glog:function(b){if(b<1)throw new Error("glog("+b+")");return Y.LOG_TABLE[b]},gexp:function(b){for(;b<0;)b+=255;for(;b>=256;)b-=255;return Y.EXP_TABLE[b]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},$=0;$<8;$++)Y.EXP_TABLE[$]=1<<$;for(var $=8;$<256;$++)Y.EXP_TABLE[$]=Y.EXP_TABLE[$-4]^Y.EXP_TABLE[$-5]^Y.EXP_TABLE[$-6]^Y.EXP_TABLE[$-8];for(var $=0;$<255;$++)Y.LOG_TABLE[Y.EXP_TABLE[$]]=$;R.exports=Y},40294:R=>{R.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},14549:(R,Y,$)=>{var b=$(40294),r=$(14199),D=$(43979),d={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},C={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(f){for(var o=f<<10;C.getBCHDigit(o)-C.getBCHDigit(C.G15)>=0;)o^=C.G15<<C.getBCHDigit(o)-C.getBCHDigit(C.G15);return(f<<10|o)^C.G15_MASK},getBCHTypeNumber:function(f){for(var o=f<<12;C.getBCHDigit(o)-C.getBCHDigit(C.G18)>=0;)o^=C.G18<<C.getBCHDigit(o)-C.getBCHDigit(C.G18);return f<<12|o},getBCHDigit:function(f){for(var o=0;f!=0;)o++,f>>>=1;return o},getPatternPosition:function(f){return C.PATTERN_POSITION_TABLE[f-1]},getMask:function(f,o,c){switch(f){case d.PATTERN000:return(o+c)%2==0;case d.PATTERN001:return o%2==0;case d.PATTERN010:return c%3==0;case d.PATTERN011:return(o+c)%3==0;case d.PATTERN100:return(Math.floor(o/2)+Math.floor(c/3))%2==0;case d.PATTERN101:return o*c%2+o*c%3==0;case d.PATTERN110:return(o*c%2+o*c%3)%2==0;case d.PATTERN111:return(o*c%3+(o+c)%2)%2==0;default:throw new Error("bad maskPattern:"+f)}},getErrorCorrectPolynomial:function(f){for(var o=new r([1],0),c=0;c<f;c++)o=o.multiply(new r([1,D.gexp(c)],0));return o},getLengthInBits:function(f,o){if(1<=o&&o<10)switch(f){case b.MODE_NUMBER:return 10;case b.MODE_ALPHA_NUM:return 9;case b.MODE_8BIT_BYTE:return 8;case b.MODE_KANJI:return 8;default:throw new Error("mode:"+f)}else if(o<27)switch(f){case b.MODE_NUMBER:return 12;case b.MODE_ALPHA_NUM:return 11;case b.MODE_8BIT_BYTE:return 16;case b.MODE_KANJI:return 10;default:throw new Error("mode:"+f)}else if(o<41)switch(f){case b.MODE_NUMBER:return 14;case b.MODE_ALPHA_NUM:return 13;case b.MODE_8BIT_BYTE:return 16;case b.MODE_KANJI:return 12;default:throw new Error("mode:"+f)}else throw new Error("type:"+o)},getLostPoint:function(f){for(var o=f.getModuleCount(),c=0,l=0;l<o;l++)for(var v=0;v<o;v++){for(var F=0,S=f.isDark(l,v),O=-1;O<=1;O++)if(!(l+O<0||o<=l+O))for(var k=-1;k<=1;k++)v+k<0||o<=v+k||O==0&&k==0||S==f.isDark(l+O,v+k)&&F++;F>5&&(c+=3+F-5)}for(var l=0;l<o-1;l++)for(var v=0;v<o-1;v++){var B=0;f.isDark(l,v)&&B++,f.isDark(l+1,v)&&B++,f.isDark(l,v+1)&&B++,f.isDark(l+1,v+1)&&B++,(B==0||B==4)&&(c+=3)}for(var l=0;l<o;l++)for(var v=0;v<o-6;v++)f.isDark(l,v)&&!f.isDark(l,v+1)&&f.isDark(l,v+2)&&f.isDark(l,v+3)&&f.isDark(l,v+4)&&!f.isDark(l,v+5)&&f.isDark(l,v+6)&&(c+=40);for(var v=0;v<o;v++)for(var l=0;l<o-6;l++)f.isDark(l,v)&&!f.isDark(l+1,v)&&f.isDark(l+2,v)&&f.isDark(l+3,v)&&f.isDark(l+4,v)&&!f.isDark(l+5,v)&&f.isDark(l+6,v)&&(c+=40);for(var X=0,v=0;v<o;v++)for(var l=0;l<o;l++)f.isDark(l,v)&&X++;var ee=Math.abs(100*X/o/o-50)/5;return c+=ee*10,c}};R.exports=C},15315:(R,Y,$)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var b=Object.assign||function(v){for(var F=1;F<arguments.length;F++){var S=arguments[F];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(v[O]=S[O])}return v},r=$(95973),D=f(r),d=$(28437),C=f(d);function f(v){return v&&v.__esModule?v:{default:v}}function o(v,F){var S={};for(var O in v)F.indexOf(O)>=0||Object.prototype.hasOwnProperty.call(v,O)&&(S[O]=v[O]);return S}var c={bgColor:D.default.oneOfType([D.default.object,D.default.string]).isRequired,bgD:D.default.string.isRequired,fgColor:D.default.oneOfType([D.default.object,D.default.string]).isRequired,fgD:D.default.string.isRequired,size:D.default.number.isRequired,title:D.default.string,viewBoxSize:D.default.number.isRequired,xmlns:D.default.string},l=(0,d.forwardRef)(function(v,F){var S=v.bgColor,O=v.bgD,k=v.fgD,B=v.fgColor,X=v.size,ee=v.title,m=v.viewBoxSize,w=v.xmlns,E=w===void 0?"http://www.w3.org/2000/svg":w,h=o(v,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return C.default.createElement("svg",b({},h,{height:X,ref:F,viewBox:"0 0 "+m+" "+m,width:X,xmlns:E}),ee?C.default.createElement("title",null,ee):null,C.default.createElement("path",{d:O,fill:S}),C.default.createElement("path",{d:k,fill:B}))});l.displayName="QRCodeSvg",l.propTypes=c,Y.default=l},10732:(R,Y,$)=>{"use strict";var b;b={value:!0},b=void 0;var r=Object.assign||function(ee){for(var m=1;m<arguments.length;m++){var w=arguments[m];for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(ee[E]=w[E])}return ee},D=$(95973),d=O(D),C=$(91075),f=O(C),o=$(56139),c=O(o),l=$(28437),v=O(l),F=$(15315),S=O(F);function O(ee){return ee&&ee.__esModule?ee:{default:ee}}function k(ee,m){var w={};for(var E in ee)m.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(ee,E)&&(w[E]=ee[E]);return w}var B={bgColor:d.default.oneOfType([d.default.object,d.default.string]),fgColor:d.default.oneOfType([d.default.object,d.default.string]),level:d.default.string,size:d.default.number,value:d.default.string.isRequired},X=(0,l.forwardRef)(function(ee,m){var w=ee.bgColor,E=w===void 0?"#FFFFFF":w,h=ee.fgColor,y=h===void 0?"#000000":h,g=ee.level,A=g===void 0?"L":g,x=ee.size,P=x===void 0?256:x,M=ee.value,N=k(ee,["bgColor","fgColor","level","size","value"]),_=new c.default(-1,f.default[A]);_.addData(M),_.make();var I=_.modules;return v.default.createElement(S.default,r({},N,{bgColor:E,bgD:I.map(function(W,oe){return W.map(function(Z,ae){return Z?"":"M "+ae+" "+oe+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:y,fgD:I.map(function(W,oe){return W.map(function(Z,ae){return Z?"M "+ae+" "+oe+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:m,size:P,viewBoxSize:I.length}))});b=X,X.displayName="QRCode",X.propTypes=B,Y.Ay=X}}]);

//# sourceMappingURL=vendors-node_modules_iobroker_json-config_build_index_js.7c00ce2a.chunk.js.map